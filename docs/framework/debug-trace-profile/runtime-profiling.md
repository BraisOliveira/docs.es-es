---
title: Generar perfiles en tiempo de ejecución
ms.date: 03/30/2017
helpviewer_keywords:
- performance counters
- common language runtime, profiling
- Perfmon.exe
- System Monitor
- profiling
- runtime, profiling
- profiling applications
- Performance Console
ms.assetid: ccd68284-f3a8-47b8-bc3f-92e5fe3a1640
ms.openlocfilehash: daa2ae4fbbed78bda4648b4b3077fa7d96a9b3f3
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/30/2019
ms.locfileid: "73121560"
---
# <a name="runtime-profiling"></a><span data-ttu-id="1b4e5-102">Generar perfiles en tiempo de ejecución</span><span class="sxs-lookup"><span data-stu-id="1b4e5-102">Runtime Profiling</span></span>
<span data-ttu-id="1b4e5-103">La generación de perfiles es un método de recopilación de datos de rendimiento en cualquier escenario de desarrollo o implementación.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-103">Profiling is a method of gathering performance data in any development or deployment scenario.</span></span> <span data-ttu-id="1b4e5-104">Esta sección está dirigida a los desarrolladores y administradores del sistema que quieren recopilar información sobre el rendimiento de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-104">This section is for developers and system administrators who want to gather information about application performance.</span></span>  
  
## <a name="tracking-performance-using-the-performance-monitor-perfmonexe"></a><span data-ttu-id="1b4e5-105">Seguimiento del rendimiento mediante el Monitor de rendimiento (Perfmon.exe)</span><span class="sxs-lookup"><span data-stu-id="1b4e5-105">Tracking Performance Using the Performance Monitor (Perfmon.exe)</span></span>  
 <span data-ttu-id="1b4e5-106">El monitor de rendimiento es la herramienta más sencilla de usar para generar perfiles de la aplicación .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-106">The Performance Monitor is the easiest tool to use to profile your .NET Framework application.</span></span> <span data-ttu-id="1b4e5-107">El monitor de rendimiento representa gráficamente los datos encontrados en los .NET Framework contadores de rendimiento que se instalan con el Common Language Runtime y el Windows SDK.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-107">The Performance Monitor graphically represents data found in the .NET Framework performance counters that are installed with the common language runtime and the Windows SDK.</span></span> <span data-ttu-id="1b4e5-108">Estos contadores se pueden usar para supervisar todo, desde la administración de la memoria hasta el rendimiento del compilador Just-In-Time (JIT).</span><span class="sxs-lookup"><span data-stu-id="1b4e5-108">These counters can be used to monitor everything from memory management to just-in-time (JIT) compiler performance.</span></span> <span data-ttu-id="1b4e5-109">Le informan sobre los recursos que la aplicación usa, que es una medida indirecta del rendimiento de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-109">They tell you about the resources your application uses, which is an indirect measure of your application's performance.</span></span> <span data-ttu-id="1b4e5-110">Use estos contadores para entender cómo funciona internamente su aplicación.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-110">Use these counters to understand how your application works internally.</span></span>  
  
#### <a name="to-run-perfmonexe-on-windows-vista-and-later-versions"></a><span data-ttu-id="1b4e5-111">Para ejecutar Perfmon.exe en Windows Vista y versiones posteriores</span><span class="sxs-lookup"><span data-stu-id="1b4e5-111">To run Perfmon.exe on Windows Vista and later versions</span></span>  
  
1. <span data-ttu-id="1b4e5-112">En el símbolo del sistema, escriba **perfmon**.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-112">At the command prompt, type **perfmon**.</span></span> <span data-ttu-id="1b4e5-113">Aparece la consola **Monitor de rendimiento** .</span><span class="sxs-lookup"><span data-stu-id="1b4e5-113">The **Performance Monitor** console appears.</span></span>  
  
2. <span data-ttu-id="1b4e5-114">En la carpeta **Herramientas de supervisión** , haga clic en **Monitor de rendimiento**.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-114">In the **Monitoring Tools** folder, click **Performance Monitor**.</span></span>  
  
3. <span data-ttu-id="1b4e5-115">En la barra de herramientas del Monitor de rendimiento, haga clic en el icono **Agregar** (el signo más), si está presente.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-115">In the Performance Monitor toolbar, click the **Add** icon (the plus sign), if it is present.</span></span> <span data-ttu-id="1b4e5-116">Si no está presente, haga clic con el botón secundario en la ventana del monitor y seleccione la opción **Agregar contadores** .</span><span class="sxs-lookup"><span data-stu-id="1b4e5-116">If it is not present, right-click in the monitor window and select the **Add Counters** option.</span></span>  
  
     <span data-ttu-id="1b4e5-117">De este modo se abrirá el cuadro de diálogo **Agregar contadores** .</span><span class="sxs-lookup"><span data-stu-id="1b4e5-117">This opens the **Add Counters** dialog box.</span></span> <span data-ttu-id="1b4e5-118">El cuadro de lista **Contadores disponibles** muestra los objetos de rendimiento disponibles.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-118">The **Available counters** list box displays the available performance objects.</span></span> <span data-ttu-id="1b4e5-119">Hay una serie de objetos predefinidos para las aplicaciones de .NET Framework, incluidos los de administración de memoria (**memoria de .NET CLR**), interoperabilidad (**interoperabilidad de .NET CLR**), control de excepciones (**excepciones de .NET CLR**) y el multithreading (**LocksAndThreads de .NET CLR**).</span><span class="sxs-lookup"><span data-stu-id="1b4e5-119">There are a number of predefined objects for .NET Framework applications, including those for memory management (**.NET CLR Memory**), interoperability (**.NET CLR Interop**), exception handling (**.NET CLR Exceptions**), and multithreading (**.NET CLR LocksAndThreads**).</span></span> <span data-ttu-id="1b4e5-120">Cada objeto de rendimiento incluye una serie de contadores de rendimiento individuales.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-120">Each performance object includes a number of individual performance counters.</span></span> <span data-ttu-id="1b4e5-121">Para obtener una lista de los contadores de rendimiento disponibles en el Monitor de rendimiento, consulte [Performance Counters](performance-counters.md).</span><span class="sxs-lookup"><span data-stu-id="1b4e5-121">For a list of the performance counters available in Performance Monitor, see [Performance Counters](performance-counters.md).</span></span>  
  
4. <span data-ttu-id="1b4e5-122">Active la casilla situada junto al nombre de un objeto de rendimiento para ver la lista de contadores de rendimiento individuales que admite.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-122">Select the check box next to a performance object's name to view the list of individual performance counters that it supports.</span></span>  
  
5. <span data-ttu-id="1b4e5-123">Haga clic en el contador de rendimiento que quiere ver.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-123">Click the performance counter you want to view.</span></span>  
  
6. <span data-ttu-id="1b4e5-124">En el cuadro de lista **Instancias del objeto seleccionado**, haga clic en **\<Todas las instancias>** para especificar que quiere supervisar el contador de rendimiento para Common Language Runtime globalmente (es decir, en todo el sistema).</span><span class="sxs-lookup"><span data-stu-id="1b4e5-124">In the **Instances of selected object** list box, click **\<All instances>** to specify that you want to monitor the performance counter for the common language runtime globally (that is, on a system-wide basis).</span></span>  
  
     <span data-ttu-id="1b4e5-125">o bien</span><span class="sxs-lookup"><span data-stu-id="1b4e5-125">-or-</span></span>  
  
     <span data-ttu-id="1b4e5-126">En el cuadro de lista **Instancias del objeto seleccionado** , haga clic en el nombre de una aplicación para supervisar el contador de rendimiento de dicha aplicación.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-126">In the **Instances of selected object** list box, click an application name to monitor the performance counter for that application.</span></span>  
  
     <span data-ttu-id="1b4e5-127">Para diferenciar varias versiones del runtime, o para eliminar la ambigüedad de varias aplicaciones con el mismo nombre, también debe modificar una clave del Registro.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-127">To differentiate multiple versions of the runtime, or to disambiguate multiple applications with the same name, you must also modify a registry key.</span></span> <span data-ttu-id="1b4e5-128">Para obtener más información, consulta [Performance Counters and In-Process Side-By-Side Applications](performance-counters-and-in-process-side-by-side-applications.md).</span><span class="sxs-lookup"><span data-stu-id="1b4e5-128">For more information, see [Performance Counters and In-Process Side-By-Side Applications](performance-counters-and-in-process-side-by-side-applications.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="1b4e5-129">Cuando se instalan nuevos contadores de rendimiento mientras se ejecuta la consola de rendimiento, detenga y reinicie la consola de rendimiento para que los nuevos contadores sean visibles.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-129">When new performance counters are installed while the Performance console is running, stop and restart the Performance console to make the new counters visible.</span></span>  
  
 <span data-ttu-id="1b4e5-130">Si quiere generar perfiles de un ensamblado que existe en una zona o en un recurso compartido remoto, asegúrese de que el ensamblado remoto tiene plena confianza en el equipo que ejecuta los contadores de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-130">If you want to profile an assembly that exists in a zone or on a remote share, make sure that the remote assembly has full trust on the computer that runs the performance counters.</span></span> <span data-ttu-id="1b4e5-131">Si el ensamblado no tiene suficiente confianza, los contadores de rendimiento no funcionarán.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-131">If the assembly does not have sufficient trust, the performance counters will not work.</span></span> <span data-ttu-id="1b4e5-132">Para obtener información sobre cómo conceder confianza a distintas zonas, vea [Caspol.exe (Herramienta de la directiva de seguridad de acceso del código)](../tools/caspol-exe-code-access-security-policy-tool.md).</span><span class="sxs-lookup"><span data-stu-id="1b4e5-132">For information about granting trust to different zones, see [Caspol.exe (Code Access Security Policy Tool)](../tools/caspol-exe-code-access-security-policy-tool.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="1b4e5-133">En los sistemas en los que está instalado el .NET Framework 4, es posible que el monitor de rendimiento no muestre datos de contadores de rendimiento en algunas categorías, como **datos de .net CLR** y **redes de .net CLR**, para las aplicaciones desarrolladas mediante .net. Marco de trabajo 1,1.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-133">On systems on which the .NET Framework 4 is installed, the Performance Monitor may not display data for performance counters in some categories, such as **.NET CLR Data** and **.NET CLR Networking**, for applications that were developed using the .NET Framework 1.1.</span></span> <span data-ttu-id="1b4e5-134">Si este es el caso, puede configurar el Monitor de rendimiento para mostrar estos datos agregando el elemento [\<forcePerformanceCounterUniqueSharedMemoryReads>](../configure-apps/file-schema/runtime/forceperformancecounteruniquesharedmemoryreads-element.md) al archivo de configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-134">If this is the case, you can configure Performance Monitor to display this data by adding the [\<forcePerformanceCounterUniqueSharedMemoryReads>](../configure-apps/file-schema/runtime/forceperformancecounteruniquesharedmemoryreads-element.md) element to the application's configuration file.</span></span>  
  
## <a name="reading-and-creating-performance-counters-programmatically"></a><span data-ttu-id="1b4e5-135">Lectura y creación de contadores de rendimiento mediante programación</span><span class="sxs-lookup"><span data-stu-id="1b4e5-135">Reading and Creating Performance Counters Programmatically</span></span>  
 <span data-ttu-id="1b4e5-136">El .NET Framework proporciona clases que puede usar para tener acceso mediante programación a la misma información de rendimiento que está disponible en la consola de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-136">The .NET Framework provides classes you can use to programmatically access the same performance information that is available in the Performance console.</span></span> <span data-ttu-id="1b4e5-137">También puede usar estas clases para crear contadores de rendimiento personalizados.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-137">You can also use these classes to create custom performance counters.</span></span> <span data-ttu-id="1b4e5-138">En la tabla siguiente se describen algunas de las clases de supervisión de rendimiento que se proporcionan en el .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-138">The following table describes some of the performance monitoring classes that are provided in the .NET Framework.</span></span>  
  
|<span data-ttu-id="1b4e5-139">Clase</span><span class="sxs-lookup"><span data-stu-id="1b4e5-139">Class</span></span>|<span data-ttu-id="1b4e5-140">Descripción</span><span class="sxs-lookup"><span data-stu-id="1b4e5-140">Description</span></span>|  
|-----------|-----------------|  
|<xref:System.Diagnostics.PerformanceCounter?displayProperty=nameWithType>|<span data-ttu-id="1b4e5-141">Representa un componente de contador de rendimiento de Windows NT.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-141">Represents a Windows NT performance counter component.</span></span> <span data-ttu-id="1b4e5-142">Use esta clase para leer contadores personalizados o predefinidos existentes y publicar datos de rendimiento (de escritura) en contadores personalizados.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-142">Use this class to read existing predefined or custom counters and publish (write) performance data to custom counters.</span></span>|  
|<xref:System.Diagnostics.PerformanceCounterCategory?displayProperty=nameWithType>|<span data-ttu-id="1b4e5-143">Ofrece varios métodos para interactuar con contadores y categorías de contadores en el equipo.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-143">Provides several methods for interacting with counters and categories of counters on the computer.</span></span>|  
|<xref:System.Diagnostics.PerformanceCounterInstaller?displayProperty=nameWithType>|<span data-ttu-id="1b4e5-144">Especifica un instalador para el componente `PerformanceCounter` .</span><span class="sxs-lookup"><span data-stu-id="1b4e5-144">Specifies an installer for the `PerformanceCounter` component.</span></span>|  
|<xref:System.Diagnostics.PerformanceCounterType?displayProperty=nameWithType>|<span data-ttu-id="1b4e5-145">Especifica la fórmula para calcular el método `NextValue` para un `PerformanceCounter`.</span><span class="sxs-lookup"><span data-stu-id="1b4e5-145">Specifies the formula to calculate the `NextValue` method for a `PerformanceCounter`.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="1b4e5-146">Vea también</span><span class="sxs-lookup"><span data-stu-id="1b4e5-146">See also</span></span>

- [<span data-ttu-id="1b4e5-147">Contadores de rendimiento</span><span class="sxs-lookup"><span data-stu-id="1b4e5-147">Performance Counters</span></span>](performance-counters.md)

---
title: Seguridad del flujo de trabajo
ms.date: 03/30/2017
helpviewer_keywords:
- programming [WF], workflow security
ms.assetid: d712a566-f435-44c0-b8c0-49298e84b114
ms.openlocfilehash: 4553a81fcd15426bf09d2f293cb35dbe831aeb07
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/28/2019
ms.locfileid: "64655816"
---
# <a name="workflow-security"></a><span data-ttu-id="d7e4f-102">Seguridad del flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="d7e4f-102">Workflow Security</span></span>
<span data-ttu-id="d7e4f-103">Windows Workflow Foundation (WF) se integra con varias tecnologías diferentes, como Microsoft SQL Server y Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="d7e4f-103">Windows Workflow Foundation (WF) is integrated with several different technologies, such as Microsoft SQL Server and Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="d7e4f-104">Al interactuar con estas tecnologías, se pueden introducir problemas de seguridad en su flujo de trabajo si no se hace de manera correcta.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-104">Interacting with these technologies may introduce security issues into your workflow if done improperly.</span></span>

## <a name="persistence-security-concerns"></a><span data-ttu-id="d7e4f-105">Problemas de seguridad de persistencia</span><span class="sxs-lookup"><span data-stu-id="d7e4f-105">Persistence Security Concerns</span></span>

1. <span data-ttu-id="d7e4f-106">Los flujos de trabajo que usan una actividad <xref:System.Activities.Statements.Delay> y persistencia se deben reactivar mediante un servicio.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-106">Workflows that use a <xref:System.Activities.Statements.Delay> activity and persistence need to be reactivated by a service.</span></span> <span data-ttu-id="d7e4f-107">Windows AppFabric usa el Servicio de administración de flujos de trabajo (WMS) para reactivar flujos de trabajo con temporizadores expirados.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-107">Windows AppFabric uses the Workflow Management Service (WMS) to reactivate workflows with expired timers.</span></span> <span data-ttu-id="d7e4f-108">WMS crea un <xref:System.ServiceModel.WorkflowServiceHost> para hospedar el flujo de trabajo reactivado.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-108">WMS creates a <xref:System.ServiceModel.WorkflowServiceHost> to host the reactivated workflow.</span></span> <span data-ttu-id="d7e4f-109">Si se detiene el servicio de WMS, los flujos de trabajo conservados no se reactivarán cuando sus temporizadores expiren.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-109">If the WMS service is stopped, persisted workflows will not be reactivated when their timers expire.</span></span>

2. <span data-ttu-id="d7e4f-110">El acceso a la creación de instancias duraderas debe protegerse contra entidades malintencionadas externas al dominio de aplicación.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-110">Access to durable instancing should be protected against malicious entities external to the application domain.</span></span> <span data-ttu-id="d7e4f-111">Además, los desarrolladores deben asegurarse de que el código malintencionado no se pueda ejecutar en el mismo dominio de aplicación que el código de creación de instancias duraderas.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-111">In addition, developers should ensure that malicious code can't be executed in the same application domain as the durable instancing code.</span></span>

3. <span data-ttu-id="d7e4f-112">La creación de instancias duraderas no se debe ejecutar con permisos elevados (administrador).</span><span class="sxs-lookup"><span data-stu-id="d7e4f-112">Durable instancing should not be run with elevated (Administrator) permissions.</span></span>

4. <span data-ttu-id="d7e4f-113">Los datos que se procesan fuera del dominio de aplicación deben ser protegidos.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-113">Data being processed outside the application domain should be protected.</span></span>

5. <span data-ttu-id="d7e4f-114">Las aplicaciones que necesitan aislamiento de seguridad no deben compartir la misma instancia de abstracción de esquema.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-114">Applications that require security isolation should not share the same instance of the schema abstraction.</span></span> <span data-ttu-id="d7e4f-115">Dichas aplicaciones deben usar proveedores de almacén diferentes o proveedores de almacén configurados usar diferentes instancias de almacén.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-115">Such applications should use different store providers, or store providers configured to use different store instantiations.</span></span>

## <a name="sql-server-security-concerns"></a><span data-ttu-id="d7e4f-116">Problemas de seguridad de SQL Server</span><span class="sxs-lookup"><span data-stu-id="d7e4f-116">SQL Server Security Concerns</span></span>

- <span data-ttu-id="d7e4f-117">Cuando se usan numerosas actividades secundarias, ubicaciones, marcadores, extensiones de host o ámbitos, o cuando se usan marcadores con grandes cantidades de carga, puede ocurrir que la memoria se acabe o que se asignen cantidades indebidas de espacio a la base de datos durante la persistencia.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-117">When large numbers of child activities, locations, bookmarks, host extensions, or scopes are used, or when bookmarks with very large payloads are used, memory can be exhausted, or undue amounts of database space can be allocated during persistence.</span></span> <span data-ttu-id="d7e4f-118">Este hecho se puede reducir usando la seguridad del nivel de objeto o de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-118">This can be mitigated by using object-level and database-level security.</span></span>

- <span data-ttu-id="d7e4f-119">Al usar <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>, se debe proteger el almacén de instancias.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-119">When using <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>, the instance store must be secured.</span></span> <span data-ttu-id="d7e4f-120">Para obtener más información, consulte [SQL Server Best Practices](https://go.microsoft.com/fwlink/?LinkId=164972).</span><span class="sxs-lookup"><span data-stu-id="d7e4f-120">For more information, see [SQL Server Best Practices](https://go.microsoft.com/fwlink/?LinkId=164972).</span></span>

- <span data-ttu-id="d7e4f-121">Se deberían cifrar los datos confidenciales del almacén de instancias.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-121">Sensitive data in the instance store should be encrypted.</span></span> <span data-ttu-id="d7e4f-122">Para obtener más información, consulte [cifrado de seguridad de SQL](https://go.microsoft.com/fwlink/?LinkId=164976).</span><span class="sxs-lookup"><span data-stu-id="d7e4f-122">For more information, see [SQL Security Encryption](https://go.microsoft.com/fwlink/?LinkId=164976).</span></span>

- <span data-ttu-id="d7e4f-123">Puesto que la cadena de conexión a bases de datos se suele incluir en un archivo de configuración, la seguridad de nivel de Windows (ACL) se debe usar para asegurarse de que el archivo de configuración (Web.Config normalmente) es seguro, y que la información de inicio de sesión y contraseña no se incluyen en la cadena de conexión.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-123">Since the database connection string is often included in a configuration file, windows-level security (ACL) should be used to ensure that the configuration file (Web.Config usually) is secure, and that login and password information are not included in the connection string.</span></span> <span data-ttu-id="d7e4f-124">La autenticación de Windows se debe usar entre la base de datos y el servidor web en su lugar.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-124">Windows authentication should be used between the database and the web server instead.</span></span>

## <a name="considerations-for-workflowservicehost"></a><span data-ttu-id="d7e4f-125">Consideraciones para WorkflowServiceHost</span><span class="sxs-lookup"><span data-stu-id="d7e4f-125">Considerations for WorkflowServiceHost</span></span>

- <span data-ttu-id="d7e4f-126">Se deben proteger los extremos de Windows Communication Foundation (WCF) que se usan en flujos de trabajo.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-126">Windows Communication Foundation (WCF) endpoints used in workflows should be secured.</span></span> <span data-ttu-id="d7e4f-127">Para obtener más información, consulte [información general sobre la seguridad de WCF](https://go.microsoft.com/fwlink/?LinkID=164975).</span><span class="sxs-lookup"><span data-stu-id="d7e4f-127">For more information, see [WCF Security Overview](https://go.microsoft.com/fwlink/?LinkID=164975).</span></span>

- <span data-ttu-id="d7e4f-128">La autorización en el nivel de host puede implementarse mediante <xref:System.ServiceModel.ServiceAuthorizationManager>.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-128">Host-level authorization can be implemented by using <xref:System.ServiceModel.ServiceAuthorizationManager>.</span></span> <span data-ttu-id="d7e4f-129">Vea [Cómo: Crear un administrador de autorización personalizado para un servicio](https://go.microsoft.com/fwlink/?LinkId=192228) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-129">See [How To: Create a Custom Authorization Manager for a Service](https://go.microsoft.com/fwlink/?LinkId=192228) for details.</span></span>

- <span data-ttu-id="d7e4f-130">El ServiceSecurityContext para el mensaje entrante también está disponible desde el flujo de trabajo mediante el acceso a OperationContext.</span><span class="sxs-lookup"><span data-stu-id="d7e4f-130">The ServiceSecurityContext for the incoming message is also available from within workflow by accessing OperationContext.</span></span>

## <a name="wf-security-pack-ctp"></a><span data-ttu-id="d7e4f-131">CTP del paquete de seguridad de WF</span><span class="sxs-lookup"><span data-stu-id="d7e4f-131">WF Security Pack CTP</span></span>
 <span data-ttu-id="d7e4f-132">El CTP 1 del paquete de seguridad de Microsoft WF es la primera versión de community technology preview (CTP) de un conjunto de actividades y su implementación basada en [Windows Workflow Foundation](index.md) en [.NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/w0x726c2(v=vs.100)) (WF (4) y el [Windows Identity Foundation (WIF)](../security/index.md).</span><span class="sxs-lookup"><span data-stu-id="d7e4f-132">The Microsoft WF Security Pack CTP 1 is the first community technology preview (CTP) release of a set of activities and their implementation based on [Windows Workflow Foundation](index.md) in [.NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/w0x726c2(v=vs.100)) (WF 4) and the [Windows Identity Foundation (WIF)](../security/index.md).</span></span>  <span data-ttu-id="d7e4f-133">El CTP 1 del paquete de seguridad de Microsoft WF contiene ambas actividades y sus diseñadores que muestran cómo habilitar fácilmente diferentes escenarios relacionados con la seguridad usando el flujo de trabajo, incluidas:</span><span class="sxs-lookup"><span data-stu-id="d7e4f-133">The Microsoft WF Security Pack CTP 1 contains both activities and their designers which illustrate how to easily enable various security-related scenarios using workflow, including:</span></span>

1. <span data-ttu-id="d7e4f-134">Suplantar una identidad del cliente en el flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="d7e4f-134">Impersonating a client identity in the workflow</span></span>

2. <span data-ttu-id="d7e4f-135">Autorización en el flujo de trabajo, como PrincipalPermission y validación de notificaciones</span><span class="sxs-lookup"><span data-stu-id="d7e4f-135">In-workflow authorization, such as PrincipalPermission and validation of Claims</span></span>

3. <span data-ttu-id="d7e4f-136">Mensajería autenticada mediante ClientCredentials especificadas en el flujo de trabajo, como nombre de usuario/contraseña o un token recuperado de un Servicio de token de seguridad (STS)</span><span class="sxs-lookup"><span data-stu-id="d7e4f-136">Authenticated messaging using ClientCredentials specified in the workflow, such as username/password or a token retrieved from a Security Token Service (STS)</span></span>

4. <span data-ttu-id="d7e4f-137">Llevar un token de seguridad de cliente a un servicio de fondo (delegación basada en notificaciones) mediante ActAs de WS-Trust</span><span class="sxs-lookup"><span data-stu-id="d7e4f-137">Flowing a client security token to a back-end service (claims-based delegation) using WS-Trust ActAs</span></span>

<span data-ttu-id="d7e4f-138">Para obtener más información y descargar el CTP del paquete de seguridad de WF, vea: [CTP del paquete de seguridad WF](https://archive.codeplex.com/?p=wf)</span><span class="sxs-lookup"><span data-stu-id="d7e4f-138">For more information and to download the WF Security Pack CTP, see: [WF Security Pack CTP](https://archive.codeplex.com/?p=wf)</span></span>
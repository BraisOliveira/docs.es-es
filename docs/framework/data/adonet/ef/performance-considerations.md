---
title: Consideraciones sobre el rendimiento (Entity Framework)
ms.date: 03/30/2017
ms.assetid: 61913f3b-4f42-4d9b-810f-2a13c2388a4a
ms.openlocfilehash: ec7f3571f60dc7f10816cad90911e50d271a9ce1
ms.sourcegitcommit: 558d78d2a68acd4c95ef23231c8b4e4c7bac3902
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/09/2019
ms.locfileid: "59324050"
---
# <a name="performance-considerations-entity-framework"></a><span data-ttu-id="1f7c5-102">Consideraciones sobre el rendimiento (Entity Framework)</span><span class="sxs-lookup"><span data-stu-id="1f7c5-102">Performance Considerations (Entity Framework)</span></span>
<span data-ttu-id="1f7c5-103">En este tema se describen las características de rendimiento de ADO.NET Entity Framework y se facilitan algunas consideraciones para ayudar a mejorar el rendimiento de las aplicaciones de Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-103">This topic describes performance characteristics of the ADO.NET Entity Framework and provides some considerations to help improve the performance of Entity Framework applications.</span></span>  
  
## <a name="stages-of-query-execution"></a><span data-ttu-id="1f7c5-104">Fases de la ejecución de consultas</span><span class="sxs-lookup"><span data-stu-id="1f7c5-104">Stages of Query Execution</span></span>  
 <span data-ttu-id="1f7c5-105">Para entender mejor el rendimiento de las consultas en Entity Framework, resulta útil comprender las operaciones que se realizan cuando se ejecuta una consulta en un modelo conceptual y se devuelven datos como objetos.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-105">In order to better understand the performance of queries in the Entity Framework, it is helpful to understand the operations that occur when a query executes against a conceptual model and returns data as objects.</span></span> <span data-ttu-id="1f7c5-106">En la tabla siguiente se describe esta serie de operaciones.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-106">The following table describes this series of operations.</span></span>  
  
|<span data-ttu-id="1f7c5-107">Operación</span><span class="sxs-lookup"><span data-stu-id="1f7c5-107">Operation</span></span>|<span data-ttu-id="1f7c5-108">Costo relativo</span><span class="sxs-lookup"><span data-stu-id="1f7c5-108">Relative Cost</span></span>|<span data-ttu-id="1f7c5-109">Frecuencia</span><span class="sxs-lookup"><span data-stu-id="1f7c5-109">Frequency</span></span>|<span data-ttu-id="1f7c5-110">Comentarios</span><span class="sxs-lookup"><span data-stu-id="1f7c5-110">Comments</span></span>|  
|---------------|-------------------|---------------|--------------|  
|<span data-ttu-id="1f7c5-111">Cargar los metadatos</span><span class="sxs-lookup"><span data-stu-id="1f7c5-111">Loading metadata</span></span>|<span data-ttu-id="1f7c5-112">Moderado</span><span class="sxs-lookup"><span data-stu-id="1f7c5-112">Moderate</span></span>|<span data-ttu-id="1f7c5-113">Una vez en cada dominio de aplicación.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-113">Once in each application domain.</span></span>|<span data-ttu-id="1f7c5-114">Los metadatos de la asignación y del modelo usados por Entity Framework se cargan en una instancia de <xref:System.Data.Metadata.Edm.MetadataWorkspace>.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-114">Model and mapping metadata used by the Entity Framework is loaded into a <xref:System.Data.Metadata.Edm.MetadataWorkspace>.</span></span> <span data-ttu-id="1f7c5-115">Estos metadatos se almacenan globalmente en caché y están disponibles para otras instancias de <xref:System.Data.Objects.ObjectContext> en el mismo dominio de aplicación.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-115">This metadata is cached globally and is available to other instances of <xref:System.Data.Objects.ObjectContext> in the same application domain.</span></span>|  
|<span data-ttu-id="1f7c5-116">Abrir la conexión de la base de datos</span><span class="sxs-lookup"><span data-stu-id="1f7c5-116">Opening the database connection</span></span>|<span data-ttu-id="1f7c5-117">Moderado<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="1f7c5-117">Moderate<sup>1</sup></span></span>|<span data-ttu-id="1f7c5-118">Según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-118">As needed.</span></span>|<span data-ttu-id="1f7c5-119">Dado que una conexión abierta a la base de datos consume recursos valiosos, el [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] abre y cierra la conexión de base de datos según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-119">Because an open connection to the database consumes a valuable resource, the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] opens and closes the database connection only as needed.</span></span> <span data-ttu-id="1f7c5-120">También puede abrir explícitamente la conexión.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-120">You can also explicitly open the connection.</span></span> <span data-ttu-id="1f7c5-121">Para obtener más información, consulte [administrar conexiones y transacciones](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896325(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-121">For more information, see [Managing Connections and Transactions](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896325(v=vs.100)).</span></span>|  
|<span data-ttu-id="1f7c5-122">Generar vistas</span><span class="sxs-lookup"><span data-stu-id="1f7c5-122">Generating views</span></span>|<span data-ttu-id="1f7c5-123">Alto</span><span class="sxs-lookup"><span data-stu-id="1f7c5-123">High</span></span>|<span data-ttu-id="1f7c5-124">Una vez en cada dominio de aplicación.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-124">Once in each application domain.</span></span> <span data-ttu-id="1f7c5-125">(Se pueden generar previamente).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-125">(Can be pre-generated.)</span></span>|<span data-ttu-id="1f7c5-126">Antes de que Entity Framework pueda ejecutar una consulta en un modelo conceptual o guardar los cambios realizados en el origen de datos, debe generar un conjunto de vistas de consulta locales para obtener acceso a la base de datos.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-126">Before the Entity Framework can execute a query against a conceptual model or save changes to the data source, it must generate a set of local query views to access the database.</span></span> <span data-ttu-id="1f7c5-127">Debido al alto costo de generar estas vistas, es posible generarlas previamente y agregarlas al proyecto en tiempo de diseño.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-127">Because of the high cost of generating these views, you can pre-generate the views and add them to the project at design-time.</span></span> <span data-ttu-id="1f7c5-128">Para obtener más información, vea [Cómo: Generar previamente vistas para mejorar el rendimiento de las consultas](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896240(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-128">For more information, see [How to: Pre-Generate Views to Improve Query Performance](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896240(v=vs.100)).</span></span>|  
|<span data-ttu-id="1f7c5-129">Preparar la consulta</span><span class="sxs-lookup"><span data-stu-id="1f7c5-129">Preparing the query</span></span>|<span data-ttu-id="1f7c5-130">Moderado<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="1f7c5-130">Moderate<sup>2</sup></span></span>|<span data-ttu-id="1f7c5-131">Una vez para cada consulta única.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-131">Once for each unique query.</span></span>|<span data-ttu-id="1f7c5-132">Incluye los costos para crear el comando de consulta, generar un árbol de comandos basado en los metadatos de asignación y del modelo, y definir la forma de los datos devueltos.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-132">Includes the costs to compose the query command, generate a command tree based on model and mapping metadata, and define the shape of the returned data.</span></span> <span data-ttu-id="1f7c5-133">Dado que tanto los comandos de consulta de Entity SQL como las consultas LINQ se almacenan en memoria caché, las ejecuciones posteriores de la misma consulta tardarán menos tiempo.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-133">Because now both Entity SQL query commands and LINQ queries are cached, later executions of the same query take less time.</span></span> <span data-ttu-id="1f7c5-134">Todavía puede usar consultas LINQ compiladas para reducir este costo en ejecuciones posteriores y las consultas compiladas pueden ser más eficaces que las consultas LINQ que se almacenan en memoria caché automáticamente.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-134">You can still use compiled LINQ queries to reduce this cost in later executions and compiled queries can be more efficient than LINQ queries that are automatically cached.</span></span> <span data-ttu-id="1f7c5-135">Para obtener más información, consulte [consultas compiladas (LINQ to Entities)](../../../../../docs/framework/data/adonet/ef/language-reference/compiled-queries-linq-to-entities.md).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-135">For more information, see [Compiled Queries  (LINQ to Entities)](../../../../../docs/framework/data/adonet/ef/language-reference/compiled-queries-linq-to-entities.md).</span></span> <span data-ttu-id="1f7c5-136">Para obtener información general sobre la ejecución de consultas LINQ, vea [LINQ to Entities](../../../../../docs/framework/data/adonet/ef/language-reference/linq-to-entities.md).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-136">For general information about LINQ query execution, see [LINQ to Entities](../../../../../docs/framework/data/adonet/ef/language-reference/linq-to-entities.md).</span></span> <span data-ttu-id="1f7c5-137">**Nota:**  Las consultas LINQ to Entities que aplican el operador `Enumerable.Contains` a colecciones en memoria no se almacenan en memoria caché automáticamente.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-137">**Note:**  LINQ to Entities queries that apply the `Enumerable.Contains` operator to in-memory collections are not automatically cached.</span></span> <span data-ttu-id="1f7c5-138">Tampoco se permite parametrizar colecciones en memoria en consultas LINQ compiladas.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-138">Also parameterizing in-memory collections in compiled LINQ queries is not allowed.</span></span>|  
|<span data-ttu-id="1f7c5-139">Ejecutar la consulta</span><span class="sxs-lookup"><span data-stu-id="1f7c5-139">Executing the query</span></span>|<span data-ttu-id="1f7c5-140">Baja<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="1f7c5-140">Low<sup>2</sup></span></span>|<span data-ttu-id="1f7c5-141">Una vez para cada consulta.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-141">Once for each query.</span></span>|<span data-ttu-id="1f7c5-142">El costo de ejecutar el comando en el origen de datos usando el proveedor de datos de ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-142">The cost of executing the command against the data source by using the ADO.NET data provider.</span></span> <span data-ttu-id="1f7c5-143">Dado que la mayoría de los orígenes de datos almacenan en la caché los planes de consulta, las posteriores ejecuciones de la misma consulta pueden tardar menos tiempo.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-143">Because most data sources cache query plans, later executions of the same query may take even less time.</span></span>|  
|<span data-ttu-id="1f7c5-144">Cargar y validar los tipos</span><span class="sxs-lookup"><span data-stu-id="1f7c5-144">Loading and validating types</span></span>|<span data-ttu-id="1f7c5-145">Baja<sup>3</sup></span><span class="sxs-lookup"><span data-stu-id="1f7c5-145">Low<sup>3</sup></span></span>|<span data-ttu-id="1f7c5-146">Una vez para cada instancia de <xref:System.Data.Objects.ObjectContext>.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-146">Once for each <xref:System.Data.Objects.ObjectContext> instance.</span></span>|<span data-ttu-id="1f7c5-147">Los tipos se cargan y se validan con los tipos definidos por el modelo conceptual.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-147">Types are loaded and validated against the types that the conceptual model defines.</span></span>|  
|<span data-ttu-id="1f7c5-148">Seguimiento</span><span class="sxs-lookup"><span data-stu-id="1f7c5-148">Tracking</span></span>|<span data-ttu-id="1f7c5-149">Baja<sup>3</sup></span><span class="sxs-lookup"><span data-stu-id="1f7c5-149">Low<sup>3</sup></span></span>|<span data-ttu-id="1f7c5-150">Una vez para cada objeto devuelto por una consulta.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-150">Once for each object that a query returns.</span></span> <sup><span data-ttu-id="1f7c5-151">4</span><span class="sxs-lookup"><span data-stu-id="1f7c5-151">4</span></span></sup>|<span data-ttu-id="1f7c5-152">Si una consulta usa la opción de fusión mediante combinación <xref:System.Data.Objects.MergeOption.NoTracking>, esta fase no afecta al rendimiento.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-152">If a query uses the <xref:System.Data.Objects.MergeOption.NoTracking> merge option, this stage does not affect performance.</span></span><br /><br /> <span data-ttu-id="1f7c5-153">Si la consulta usa la opción de fusión mediante combinación <xref:System.Data.Objects.MergeOption.AppendOnly>, <xref:System.Data.Objects.MergeOption.PreserveChanges> o <xref:System.Data.Objects.MergeOption.OverwriteChanges>, el seguimiento de los resultados de la consulta se realiza en la instancia de <xref:System.Data.Objects.ObjectStateManager>.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-153">If the query uses the <xref:System.Data.Objects.MergeOption.AppendOnly>, <xref:System.Data.Objects.MergeOption.PreserveChanges>, or <xref:System.Data.Objects.MergeOption.OverwriteChanges> merge option, query results are tracked in the <xref:System.Data.Objects.ObjectStateManager>.</span></span> <span data-ttu-id="1f7c5-154">Se genera una instancia de <xref:System.Data.EntityKey> para cada objeto devuelto por la consulta al que se ha hecho un seguimiento y se usa para crear un objeto <xref:System.Data.Objects.ObjectStateEntry> en la instancia de <xref:System.Data.Objects.ObjectStateManager>.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-154">An <xref:System.Data.EntityKey> is generated for each tracked object that the query returns and is used to create an <xref:System.Data.Objects.ObjectStateEntry> in the <xref:System.Data.Objects.ObjectStateManager>.</span></span> <span data-ttu-id="1f7c5-155">Si se encuentra un objeto <xref:System.Data.Objects.ObjectStateEntry> existente para la instancia de <xref:System.Data.EntityKey>, se devuelve dicho objeto.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-155">If an existing <xref:System.Data.Objects.ObjectStateEntry> can be found for the <xref:System.Data.EntityKey>, the existing object is returned.</span></span> <span data-ttu-id="1f7c5-156">Si se usa la opción <xref:System.Data.Objects.MergeOption.PreserveChanges> o <xref:System.Data.Objects.MergeOption.OverwriteChanges>, el objeto se actualiza antes de ser devuelto.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-156">If the <xref:System.Data.Objects.MergeOption.PreserveChanges>, or <xref:System.Data.Objects.MergeOption.OverwriteChanges> option is used, the object is updated before it is returned.</span></span><br /><br /> <span data-ttu-id="1f7c5-157">Para obtener más información, consulte [resolución de identidades, administración de Estados y seguimiento de cambios](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896269(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-157">For more information, see [Identity Resolution, State Management, and Change Tracking](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896269(v=vs.100)).</span></span>|  
|<span data-ttu-id="1f7c5-158">Materializar los objetos</span><span class="sxs-lookup"><span data-stu-id="1f7c5-158">Materializing the objects</span></span>|<span data-ttu-id="1f7c5-159">Moderado<sup>3</sup></span><span class="sxs-lookup"><span data-stu-id="1f7c5-159">Moderate<sup>3</sup></span></span>|<span data-ttu-id="1f7c5-160">Una vez para cada objeto devuelto por una consulta.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-160">Once for each object that a query returns.</span></span> <sup><span data-ttu-id="1f7c5-161">4</span><span class="sxs-lookup"><span data-stu-id="1f7c5-161">4</span></span></sup>|<span data-ttu-id="1f7c5-162">El proceso de leer el objeto <xref:System.Data.Common.DbDataReader> devuelto, crear los objetos y establecer valores de propiedad basados en los valores de cada instancia de la clase <xref:System.Data.Common.DbDataRecord>.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-162">The process of reading the returned <xref:System.Data.Common.DbDataReader> object and creating objects and setting property values that are based on the values in each instance of the <xref:System.Data.Common.DbDataRecord> class.</span></span> <span data-ttu-id="1f7c5-163">Si el objeto ya existe en <xref:System.Data.Objects.ObjectContext> y la consulta usa las opciones de fusión mediante combinación <xref:System.Data.Objects.MergeOption.AppendOnly> o <xref:System.Data.Objects.MergeOption.PreserveChanges>, esta fase no afecta al rendimiento.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-163">If the object already exists in the <xref:System.Data.Objects.ObjectContext> and the query uses the <xref:System.Data.Objects.MergeOption.AppendOnly> or <xref:System.Data.Objects.MergeOption.PreserveChanges> merge options, this stage does not affect performance.</span></span> <span data-ttu-id="1f7c5-164">Para obtener más información, consulte [resolución de identidades, administración de Estados y seguimiento de cambios](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896269(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-164">For more information, see [Identity Resolution, State Management, and Change Tracking](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896269(v=vs.100)).</span></span>|  
  
 <span data-ttu-id="1f7c5-165"><sup>1</sup> cuando un proveedor de origen de datos implementa la agrupación de conexiones, el costo de abrir una conexión se distribuye entre el grupo.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-165"><sup>1</sup> When a data source provider implements connection pooling, the cost of opening a connection is distributed across the pool.</span></span> <span data-ttu-id="1f7c5-166">El proveedor de datos .NET para SQL Server admite la agrupación de conexiones.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-166">The .NET Provider for SQL Server supports connection pooling.</span></span>  
  
 <span data-ttu-id="1f7c5-167"><sup>2</sup> costo aumenta con la complejidad de la consulta.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-167"><sup>2</sup> Cost increases with increased query complexity.</span></span>  
  
 <span data-ttu-id="1f7c5-168"><sup>3</sup> costo total aumenta proporcionalmente al número de objetos devueltos por la consulta.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-168"><sup>3</sup> Total cost increases proportional to the number of objects returned by the query.</span></span>  
  
 <span data-ttu-id="1f7c5-169"><sup>4</sup> esta sobrecarga no es necesaria para las consultas de EntityClient, ya que estas devuelven una <xref:System.Data.EntityClient.EntityDataReader> en lugar de objetos.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-169"><sup>4</sup> This overhead is not required for EntityClient queries because EntityClient queries return an <xref:System.Data.EntityClient.EntityDataReader> instead of objects.</span></span> <span data-ttu-id="1f7c5-170">Para obtener más información, consulte [proveedor de EntityClient para Entity Framework](../../../../../docs/framework/data/adonet/ef/entityclient-provider-for-the-entity-framework.md).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-170">For more information, see [EntityClient Provider for the Entity Framework](../../../../../docs/framework/data/adonet/ef/entityclient-provider-for-the-entity-framework.md).</span></span>  
  
## <a name="additional-considerations"></a><span data-ttu-id="1f7c5-171">Consideraciones adicionales</span><span class="sxs-lookup"><span data-stu-id="1f7c5-171">Additional Considerations</span></span>  
 <span data-ttu-id="1f7c5-172">A continuación se muestran otras consideraciones que pueden afectar al rendimiento de las aplicaciones de Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-172">The following are other considerations that may affect the performance of Entity Framework applications.</span></span>  
  
### <a name="query-execution"></a><span data-ttu-id="1f7c5-173">Ejecución de la consulta</span><span class="sxs-lookup"><span data-stu-id="1f7c5-173">Query Execution</span></span>  
 <span data-ttu-id="1f7c5-174">Dado que las consultas usan muchos recursos, considere detenidamente en qué punto del código y en qué equipo se va ejecutar una consulta.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-174">Because queries can be resource intensive, consider at what point in your code and on what computer a query is executed.</span></span>  
  
#### <a name="deferred-versus-immediate-execution"></a><span data-ttu-id="1f7c5-175">Ejecución diferida frente a ejecución inmediata</span><span class="sxs-lookup"><span data-stu-id="1f7c5-175">Deferred versus immediate execution</span></span>  
 <span data-ttu-id="1f7c5-176">Cuando se crea una instancia de <xref:System.Data.Objects.ObjectQuery%601> o una consulta LINQ, la consulta no se puede ejecutar inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-176">When you create an <xref:System.Data.Objects.ObjectQuery%601> or LINQ query, the query may not be executed immediately.</span></span> <span data-ttu-id="1f7c5-177">La ejecución de la consulta se aplaza hasta que se necesiten los resultados, como por ejemplo, durante una enumeración `foreach` (C#) o `For Each` (Visual Basic) o cuando se asigna para rellenar una colección <xref:System.Collections.Generic.List%601>.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-177">Query execution is deferred until the results are needed, such as during a `foreach` (C#) or `For Each` (Visual Basic) enumeration or when it is assigned to fill a <xref:System.Collections.Generic.List%601> collection.</span></span> <span data-ttu-id="1f7c5-178">La ejecución de la consulta comienza inmediatamente cuando se llama al método <xref:System.Data.Objects.ObjectQuery%601.Execute%2A> de una <xref:System.Data.Objects.ObjectQuery%601> o cuando se llama a un método LINQ que devuelve una consulta singleton, como <xref:System.Linq.Enumerable.First%2A> o <xref:System.Linq.Enumerable.Any%2A>.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-178">Query execution begins immediately when you call the <xref:System.Data.Objects.ObjectQuery%601.Execute%2A> method on an <xref:System.Data.Objects.ObjectQuery%601> or when you call a LINQ method that returns a singleton query, such as <xref:System.Linq.Enumerable.First%2A> or <xref:System.Linq.Enumerable.Any%2A>.</span></span> <span data-ttu-id="1f7c5-179">Para obtener más información, consulte [las consultas de objeto](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896241(v=vs.100)) y [consultas (LINQ to Entities)](../../../../../docs/framework/data/adonet/ef/language-reference/query-execution.md).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-179">For more information, see [Object Queries](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896241(v=vs.100)) and [Query Execution (LINQ to Entities)](../../../../../docs/framework/data/adonet/ef/language-reference/query-execution.md).</span></span>  
  
#### <a name="client-side-execution-of-linq-queries"></a><span data-ttu-id="1f7c5-180">Ejecución de consultas LINQ en el cliente</span><span class="sxs-lookup"><span data-stu-id="1f7c5-180">Client-side execution of LINQ queries</span></span>  
 <span data-ttu-id="1f7c5-181">Aunque la ejecución de una consulta LINQ se produce en el equipo que hospeda el origen de datos, algunas partes de dicha consulta se pueden evaluar en el equipo cliente.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-181">Although the execution of a LINQ query occurs on the computer that hosts the data source, some parts of a LINQ query may be evaluated on the client computer.</span></span> <span data-ttu-id="1f7c5-182">Para obtener más información, consulte la sección de ejecución Store [consultas (LINQ to Entities)](../../../../../docs/framework/data/adonet/ef/language-reference/query-execution.md).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-182">For more information, see the Store Execution section of [Query Execution (LINQ to Entities)](../../../../../docs/framework/data/adonet/ef/language-reference/query-execution.md).</span></span>  
  
### <a name="query-and-mapping-complexity"></a><span data-ttu-id="1f7c5-183">Complejidad de la asignación y de la consulta</span><span class="sxs-lookup"><span data-stu-id="1f7c5-183">Query and Mapping Complexity</span></span>  
 <span data-ttu-id="1f7c5-184">La complejidad de las consultas individuales y de la asignación en el modelo de entidades tendrá un efecto significativo en el rendimiento de las consultas.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-184">The complexity of individual queries and of the mapping in the entity model will have a significant effect on query performance.</span></span>  
  
#### <a name="mapping-complexity"></a><span data-ttu-id="1f7c5-185">Complejidad de la asignación</span><span class="sxs-lookup"><span data-stu-id="1f7c5-185">Mapping complexity</span></span>  
 <span data-ttu-id="1f7c5-186">Los modelos con una complejidad superior a la de una asignación unívoca simple entre entidades del modelo conceptual y tablas del modelo de almacenamiento generan comandos más complejos.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-186">Models that are more complex than a simple one-to-one mapping between entities in the conceptual model and tables in the storage model generate more complex commands than models that have a one-to-one mapping.</span></span>  
  
#### <a name="query-complexity"></a><span data-ttu-id="1f7c5-187">Complejidad de la consulta</span><span class="sxs-lookup"><span data-stu-id="1f7c5-187">Query complexity</span></span>  
 <span data-ttu-id="1f7c5-188">Las consultas que requieren un gran número de combinaciones en los comandos que se ejecutan en el origen de datos o que devuelven una gran cantidad de datos pueden afectar al rendimiento de las maneras siguientes:</span><span class="sxs-lookup"><span data-stu-id="1f7c5-188">Queries that require a large number of joins in the commands that are executed against the data source or that return a large amount of data may affect performance in the following ways:</span></span>  
  
-   <span data-ttu-id="1f7c5-189">Las consultas realizadas en un modelo conceptual y que parecen sencillas pueden ocasionar la ejecución de consultas más complejas en el origen de datos.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-189">Queries against a conceptual model that seem simple may result in the execution of more complex queries against the data source.</span></span> <span data-ttu-id="1f7c5-190">Esto se puede producir porque Entity Framework traduce una consulta en un modelo conceptual en una consulta equivalente en el origen de datos.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-190">This can occur because the Entity Framework translates a query against a conceptual model into an equivalent query against the data source.</span></span> <span data-ttu-id="1f7c5-191">Cuando un único conjunto de entidades en el modelo conceptual se asigna a varias tablas en el origen de datos, o cuando una relación entre entidades se asigna a una tabla de combinación, el comando de consulta ejecutado en la consulta del origen de datos puede requerir una o más combinaciones.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-191">When a single entity set in the conceptual model maps to more than one table in the data source, or when a relationship between entities is mapped to a join table, the query command executed against the data source query may require one or more joins.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="1f7c5-192">Use el método <xref:System.Data.Objects.ObjectQuery.ToTraceString%2A> de las clases <xref:System.Data.Objects.ObjectQuery%601> o <xref:System.Data.EntityClient.EntityCommand> para ver los comandos que se ejecutan en el origen de datos para una consulta determinada.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-192">Use the <xref:System.Data.Objects.ObjectQuery.ToTraceString%2A> method of the <xref:System.Data.Objects.ObjectQuery%601> or <xref:System.Data.EntityClient.EntityCommand> classes to view the commands that are executed against the data source for a given query.</span></span> <span data-ttu-id="1f7c5-193">Para obtener más información, vea [Cómo: Ver los comandos Store](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896348(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-193">For more information, see [How to: View the Store Commands](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896348(v=vs.100)).</span></span>  
  
-   <span data-ttu-id="1f7c5-194">Las consultas de Entity SQL anidadas pueden crear combinaciones en el servidor y devolver un gran número de filas.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-194">Nested Entity SQL queries may create joins on the server and can return a large number of rows.</span></span>  
  
     <span data-ttu-id="1f7c5-195">El siguiente es un ejemplo de una consulta anidada en una cláusula de proyección:</span><span class="sxs-lookup"><span data-stu-id="1f7c5-195">The following is an example of a nested query in a projection clause:</span></span>  
  
    ```  
    SELECT c, (SELECT c, (SELECT c FROM AdventureWorksModel.Vendor AS c  ) As Inner2   
        FROM AdventureWorksModel.JobCandidate AS c  ) As Inner1   
        FROM AdventureWorksModel.EmployeeDepartmentHistory AS c  
    ```  
  
     <span data-ttu-id="1f7c5-196">Además, provocan que la canalización de la consulta genere una consulta única con duplicación de objetos en las consultas anidadas.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-196">In addition, such queries cause the query pipeline to generate a single query with duplication of objects across nested queries.</span></span> <span data-ttu-id="1f7c5-197">Debido a esto, una sola columna se puede duplicar varias veces.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-197">Because of this, a single column may be duplicated multiple times.</span></span> <span data-ttu-id="1f7c5-198">En algunas bases de datos, incluyendo SQL Server, esto puede ocasionar que la tabla TempDB crezca demasiado, lo que puede disminuir el rendimiento del servidor.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-198">On some databases, including SQL Server, this can cause the TempDB table to grow very large, which can decrease server performance.</span></span> <span data-ttu-id="1f7c5-199">Conviene tener cuidado al ejecutar consultas anidadas.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-199">Care should be taken when you execute nested queries.</span></span>  
  
-   <span data-ttu-id="1f7c5-200">Las consultas que devuelven una gran cantidad de datos pueden disminuir el rendimiento si el cliente está realizando operaciones que tienen un consumo de recursos proporcional al tamaño del conjunto de resultados.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-200">Any queries that return a large amount of data can cause decreased performance if the client is performing operations that consume resources in a way that is proportional to the size of the result set.</span></span> <span data-ttu-id="1f7c5-201">En casos como este, considere la posibilidad de limitar la cantidad de datos devuelta por la consulta.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-201">In such cases, you should consider limiting the amount of data returned by the query.</span></span> <span data-ttu-id="1f7c5-202">Para obtener más información, vea [Cómo: Resultados de la página a través de la consulta](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb738702(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-202">For more information, see [How to: Page Through Query Results](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb738702(v=vs.100)).</span></span>  
  
 <span data-ttu-id="1f7c5-203">Los comandos generados automáticamente por Entity Framework pueden ser más complejos que los comandos similares escritos explícitamente por un desarrollador de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-203">Any commands automatically generated by the Entity Framework may be more complex than similar commands written explicitly by a database developer.</span></span> <span data-ttu-id="1f7c5-204">Si necesita un control explícito sobre los comandos ejecutados en el origen de datos, considere la posibilidad de definir una asignación a una función con valores de tabla o a un procedimiento almacenado.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-204">If you need explicit control over the commands executed against your data source, consider defining a mapping to a table-valued function or stored procedure.</span></span>  
  
#### <a name="relationships"></a><span data-ttu-id="1f7c5-205">Relaciones</span><span class="sxs-lookup"><span data-stu-id="1f7c5-205">Relationships</span></span>  
 <span data-ttu-id="1f7c5-206">Para obtener un rendimiento óptimo de las consultas, debe definir las relaciones entre entidades como asociaciones en el modelo de entidades y también como relaciones lógicas en el origen de datos.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-206">For optimal query performance, you must define relationships between entities both as associations in the entity model and as logical relationships in the data source.</span></span>  
  
### <a name="query-paths"></a><span data-ttu-id="1f7c5-207">Rutas de la consulta</span><span class="sxs-lookup"><span data-stu-id="1f7c5-207">Query Paths</span></span>  
 <span data-ttu-id="1f7c5-208">De forma predeterminada, al ejecutar una consulta <xref:System.Data.Objects.ObjectQuery%601>, no se devuelven los objetos relacionados (aunque los propios objetos que representan las relaciones lo son).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-208">By default, when you execute an <xref:System.Data.Objects.ObjectQuery%601>, related objects are not returned (although objects that represent the relationships themselves are).</span></span> <span data-ttu-id="1f7c5-209">Puede cargar objetos relacionados de una de las tres maneras siguientes:</span><span class="sxs-lookup"><span data-stu-id="1f7c5-209">You can load related objects in one of three ways:</span></span>  
  
1. <span data-ttu-id="1f7c5-210">Establezca la ruta de acceso de la consulta antes de que se ejecute <xref:System.Data.Objects.ObjectQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-210">Set the query path before the <xref:System.Data.Objects.ObjectQuery%601> is executed.</span></span>  
  
2. <span data-ttu-id="1f7c5-211">Llame al método `Load` sobre la propiedad de navegación expuesta por el objeto.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-211">Call the `Load` method on the navigation property that the object exposes.</span></span>  
  
3. <span data-ttu-id="1f7c5-212">Establezca la opción <xref:System.Data.Objects.ObjectContextOptions.LazyLoadingEnabled%2A> del <xref:System.Data.Objects.ObjectContext> en `true`.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-212">Set the <xref:System.Data.Objects.ObjectContextOptions.LazyLoadingEnabled%2A> option on the <xref:System.Data.Objects.ObjectContext> to `true`.</span></span> <span data-ttu-id="1f7c5-213">Tenga en cuenta que esto se realiza automáticamente al generar código de nivel de objeto con el [Entity Data Model Designer](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/cc716685(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-213">Note that this is done automatically when you generate object-layer code with the [Entity Data Model Designer](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/cc716685(v=vs.100)).</span></span> <span data-ttu-id="1f7c5-214">Para obtener más información, consulte [información general del código generado](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/cc982041(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-214">For more information see [Generated Code Overview](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/cc982041(v=vs.100)).</span></span>  
  
 <span data-ttu-id="1f7c5-215">Cuando considere qué opción se debe usar, sea consciente de que hay una correlación entre el número de solicitudes a la base de datos y la cantidad de datos devueltos en una sola consulta.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-215">When you consider which option to use, be aware that there is a tradeoff between the number of requests against the database and the amount of data returned in a single query.</span></span> <span data-ttu-id="1f7c5-216">Para obtener más información, consulte [cargar objetos relacionados](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896272(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-216">For more information, see [Loading Related Objects](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896272(v=vs.100)).</span></span>  
  
#### <a name="using-query-paths"></a><span data-ttu-id="1f7c5-217">Usar las rutas de la consulta</span><span class="sxs-lookup"><span data-stu-id="1f7c5-217">Using query paths</span></span>  
 <span data-ttu-id="1f7c5-218">Las rutas de la consulta definen el gráfico de los objetos devueltos por una consulta.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-218">Query paths define the graph of objects that a query returns.</span></span> <span data-ttu-id="1f7c5-219">Al definir la ruta de una consulta, solo se requiere una solicitud única en la base de datos para que se devuelvan todos los objetos definidos por la ruta.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-219">When you define a query path, only a single request against the database is required to return all objects that the path defines.</span></span> <span data-ttu-id="1f7c5-220">El uso de rutas de consulta puede dar lugar a la ejecución de comandos complejos en el origen de datos partiendo de consultas de objeto aparentemente simples.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-220">Using query paths can result in complex commands being executed against the data source from seemingly simple object queries.</span></span> <span data-ttu-id="1f7c5-221">Esto se produce porque se requieren una o más combinaciones para la devolución de objetos relacionados en una consulta única.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-221">This occurs because one or more joins are required to return related objects in a single query.</span></span> <span data-ttu-id="1f7c5-222">Esta complejidad es mayor en consultas con un modelo de entidades complejo, como una entidad con herencia o una ruta que incluye relaciones varios a varios.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-222">This complexity is greater in queries against a complex entity model, such as an entity with inheritance or a path that includes many-to-many relationships.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1f7c5-223">Use el método <xref:System.Data.Objects.ObjectQuery.ToTraceString%2A> para ver el comando que se generará mediante una consulta <xref:System.Data.Objects.ObjectQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-223">Use the <xref:System.Data.Objects.ObjectQuery.ToTraceString%2A> method to see the command that will be generated by an <xref:System.Data.Objects.ObjectQuery%601>.</span></span> <span data-ttu-id="1f7c5-224">Para obtener más información, vea [Cómo: Ver los comandos Store](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896348(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-224">For more information, see [How to: View the Store Commands](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896348(v=vs.100)).</span></span>  
  
 <span data-ttu-id="1f7c5-225">Cuando la ruta de una consulta incluye demasiados objetos relacionados o cuando los objetos contienen demasiados datos de fila, es posible que el origen de datos no pueda completar la consulta.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-225">When a query path includes too many related objects or the objects contain too much row data, the data source might be unable to complete the query.</span></span> <span data-ttu-id="1f7c5-226">Esto sucede si la consulta requiere un almacenamiento temporal intermedio que supera la capacidad del origen de datos.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-226">This occurs if the query requires intermediate temporary storage that exceeds the capabilities of the data source.</span></span> <span data-ttu-id="1f7c5-227">Cuando esto se produce, se puede reducir la complejidad de la consulta del origen de datos cargando explícitamente los objetos relacionados.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-227">When this occurs, you can reduce the complexity of the data source query by explicitly loading related objects.</span></span>  
  
#### <a name="explicitly-loading-related-objects"></a><span data-ttu-id="1f7c5-228">Cargar explícitamente los objetos relacionados</span><span class="sxs-lookup"><span data-stu-id="1f7c5-228">Explicitly loading related objects</span></span>  
 <span data-ttu-id="1f7c5-229">Puede cargar explícitamente los objetos relacionados llamando al método `Load` de una propiedad de navegación que devuelve una <xref:System.Data.Objects.DataClasses.EntityCollection%601> o <xref:System.Data.Objects.DataClasses.EntityReference%601>.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-229">You can explicitly load related objects by calling the `Load` method on a navigation property that returns an <xref:System.Data.Objects.DataClasses.EntityCollection%601> or <xref:System.Data.Objects.DataClasses.EntityReference%601>.</span></span> <span data-ttu-id="1f7c5-230">La carga explícita de objetos requiere un viaje de ida y vuelta a la base de datos cada vez que se llama al método `Load`.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-230">Explicitly loading objects requires a round-trip to the database every time `Load` is called.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1f7c5-231">Si llama al método `Load` mientras se recorre en bucle una colección de objetos devueltos, como cuando se usa la instrucción `foreach` (`For Each` en Visual Basic), el proveedor específico del origen de datos debe admitir varios conjuntos de resultados activos en una sola conexión.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-231">if you call `Load` while looping through a collection of returned objects, such as when you use the `foreach` statement (`For Each` in Visual Basic), the data source-specific provider must support multiple active results sets on a single connection.</span></span> <span data-ttu-id="1f7c5-232">En una base de datos de SQL Server, debe especificar un valor `MultipleActiveResultSets = true` en la cadena de conexión del proveedor.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-232">For a SQL Server database, you must specify a value of `MultipleActiveResultSets = true` in the provider connection string.</span></span>  
  
 <span data-ttu-id="1f7c5-233">También puede utilizar el método <xref:System.Data.Objects.ObjectContext.LoadProperty%2A> cuando no haya propiedades <xref:System.Data.Objects.DataClasses.EntityCollection%601> o <xref:System.Data.Objects.DataClasses.EntityReference%601> en entidades.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-233">You can also use the <xref:System.Data.Objects.ObjectContext.LoadProperty%2A> method when there is no <xref:System.Data.Objects.DataClasses.EntityCollection%601> or <xref:System.Data.Objects.DataClasses.EntityReference%601> properties on entities.</span></span> <span data-ttu-id="1f7c5-234">Esto es útil cuando se usan entidades POCO.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-234">This is useful when you are using POCO entities.</span></span>  
  
 <span data-ttu-id="1f7c5-235">Aunque la carga explícita de objetos relacionados reducirá el número de combinaciones y la cantidad de datos redundantes, `Load` requiere varias conexiones a la base de datos, lo que puede resultar costoso cuando se carga explícitamente un gran número de objetos.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-235">Although explicitly loading related objects will reduce the number of joins and reduced the amount of redundant data, `Load` requires repeated connections to the database, which can become costly when explicitly loading a large number of objects.</span></span>  
  
### <a name="saving-changes"></a><span data-ttu-id="1f7c5-236">Guardar los cambios</span><span class="sxs-lookup"><span data-stu-id="1f7c5-236">Saving Changes</span></span>  
 <span data-ttu-id="1f7c5-237">Cuando se llama al método <xref:System.Data.Objects.ObjectContext.SaveChanges%2A> de una instancia de <xref:System.Data.Objects.ObjectContext>, se genera un comando de creación, actualización o eliminación independiente para cada objeto agregado, actualizado o eliminado en el contexto.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-237">When you call the <xref:System.Data.Objects.ObjectContext.SaveChanges%2A> method on an <xref:System.Data.Objects.ObjectContext>, a separate create, update, or delete command is generated for every added, updated, or deleted object in the context.</span></span> <span data-ttu-id="1f7c5-238">Estos comandos se ejecutan en el origen de datos en una transacción única.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-238">These commands are executed on the data source in a single transaction.</span></span> <span data-ttu-id="1f7c5-239">Al igual que ocurre en las consultas, el rendimiento de las operaciones de creación, actualización y eliminación depende de la complejidad de la asignación en el modelo conceptual.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-239">As with queries, the performance of create, update, and delete operations depends on the complexity of the mapping in the conceptual model.</span></span>  
  
### <a name="distributed-transactions"></a><span data-ttu-id="1f7c5-240">Transacciones distribuidas</span><span class="sxs-lookup"><span data-stu-id="1f7c5-240">Distributed Transactions</span></span>  
 <span data-ttu-id="1f7c5-241">Las operaciones de una transacción explícita que requieren recursos administrados por el coordinador de transacciones distribuidas (DTC) serán mucho más caras que las operaciones similares que no requieren DTC.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-241">Operations in an explicit transaction that require resources that are managed by the distributed transaction coordinator (DTC) will be much more expensive than a similar operation that does not require the DTC.</span></span> <span data-ttu-id="1f7c5-242">La promoción a DTC se producirá en las situaciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="1f7c5-242">Promotion to the DTC will occur in the following situations:</span></span>  
  
-   <span data-ttu-id="1f7c5-243">Una transacción explícita con una operación en una base de datos de SQL Server 2000 u otro origen de datos que siempre promueve transacciones explícitas a DTC.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-243">An explicit transaction with an operation against a SQL Server 2000 database or other data source that always promote explicit transactions to the DTC.</span></span>  
  
-   <span data-ttu-id="1f7c5-244">Una transacción explícita con una operación en SQL Server 2005 cuando [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] administra la conexión.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-244">An explicit transaction with an operation against SQL Server 2005 when the connection is managed by the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)].</span></span> <span data-ttu-id="1f7c5-245">Esto sucede porque SQL Server 2005 promueve a DTC cada vez que se cierra y se vuelve a abrir una conexión dentro de una transacción única, que es el comportamiento predeterminado de [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1f7c5-245">This occurs because SQL Server 2005 promotes to a DTC whenever a connection is closed and reopened within a single transaction, which is the default behavior of the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)].</span></span> <span data-ttu-id="1f7c5-246">Esta promoción a DTC no se produce si se usa SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-246">This DTC promotion does not occur when using SQL Server 2008.</span></span> <span data-ttu-id="1f7c5-247">Para evitar esta promoción al usar SQL Server 2005, se debe abrir y cerrar explícitamente la conexión dentro de la transacción.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-247">To avoid this promotion when using SQL Server 2005, you must explicitly open and close the connection within the transaction.</span></span> <span data-ttu-id="1f7c5-248">Para obtener más información, consulte [administrar conexiones y transacciones](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896325(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-248">For more information, see [Managing Connections and Transactions](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896325(v=vs.100)).</span></span>  
  
 <span data-ttu-id="1f7c5-249">Las transacciones explícitas se usan cuando se ejecutan una o varias operaciones dentro de una transacción <xref:System.Transactions>.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-249">An explicit transaction is used when one or more operations are executed inside a <xref:System.Transactions> transaction.</span></span> <span data-ttu-id="1f7c5-250">Para obtener más información, consulte [administrar conexiones y transacciones](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896325(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-250">For more information, see [Managing Connections and Transactions](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896325(v=vs.100)).</span></span>  
  
## <a name="strategies-for-improving-performance"></a><span data-ttu-id="1f7c5-251">Estrategias para mejorar el rendimiento</span><span class="sxs-lookup"><span data-stu-id="1f7c5-251">Strategies for Improving Performance</span></span>  
 <span data-ttu-id="1f7c5-252">Para mejorar el rendimiento global de las consultas en Entity Framework, use las estrategias siguientes.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-252">You can improve the overall performance of queries in the Entity Framework by using the following strategies.</span></span>  
  
#### <a name="pre-generate-views"></a><span data-ttu-id="1f7c5-253">Generar previamente las vistas</span><span class="sxs-lookup"><span data-stu-id="1f7c5-253">Pre-generate views</span></span>  
 <span data-ttu-id="1f7c5-254">La generación de vistas basadas en un modelo de entidades supone un costo significativo la primera vez que una aplicación ejecuta una consulta.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-254">Generating views based on an entity model is a significant cost the first time that an application executes a query.</span></span> <span data-ttu-id="1f7c5-255">Emplee la utilidad EdmGen.exe para generar previamente las vistas en forma de archivo de código de Visual Basic o de C# que se puede agregar al proyecto durante el diseño.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-255">Use the EdmGen.exe utility to pre-generate views as a Visual Basic or C# code file that can be added to the project during design.</span></span> <span data-ttu-id="1f7c5-256">También podría utilizar el Kit de herramientas de transformación de plantillas de texto para generar vistas precompiladas.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-256">You could also use the Text Template Transformation Toolkit to generate pre-compiled views.</span></span> <span data-ttu-id="1f7c5-257">Las vistas generadas previamente se validan en tiempo de ejecución para garantizar su coherencia con la versión actual del modelo de entidades especificado.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-257">Pre-generated views are validated at runtime to ensure that they are consistent with the current version of the specified entity model.</span></span> <span data-ttu-id="1f7c5-258">Para obtener más información, vea [Cómo: Generar previamente vistas para mejorar el rendimiento de las consultas](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896240(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-258">For more information, see [How to: Pre-Generate Views to Improve Query Performance](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896240(v=vs.100)).</span></span>
  
 <span data-ttu-id="1f7c5-259">Al trabajar con modelos muy grandes, se aplica la siguiente consideración:</span><span class="sxs-lookup"><span data-stu-id="1f7c5-259">When working with very large models, the following consideration applies:</span></span>  
  
 <span data-ttu-id="1f7c5-260">El formato de metadatos de .NET limita a 16,777.215 (0xFFFFFF) el número de caracteres de cadena de usuario en un binario dado.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-260">The .NET metadata format limits the number of user string characters in a given binary to 16,777,215 (0xFFFFFF).</span></span> <span data-ttu-id="1f7c5-261">Si está generando vistas para un modelo muy grande y el archivo de vista alcanza este límite de tamaño, no obtendrá el "queda espacio lógico para crear más cadenas de usuario."</span><span class="sxs-lookup"><span data-stu-id="1f7c5-261">If you are generating views for a very large model and the view file reaches this size limit, you will get the "No logical space left to create more user strings."</span></span> <span data-ttu-id="1f7c5-262">error del compilador.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-262">compile error.</span></span> <span data-ttu-id="1f7c5-263">Esta limitación de tamaño se aplica a todos los binarios administrados.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-263">This size limitation applies to all managed binaries.</span></span> <span data-ttu-id="1f7c5-264">Para obtener más información, consulte el [blog](https://go.microsoft.com/fwlink/?LinkId=201476) que muestra cómo evitar el error cuando se trabaja con modelos grandes y complejos.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-264">For more information see the [blog](https://go.microsoft.com/fwlink/?LinkId=201476) that demonstrates how to avoid the error when working with large and complex models.</span></span>  
  
#### <a name="consider-using-the-notracking-merge-option-for-queries"></a><span data-ttu-id="1f7c5-265">Considerar la posibilidad de usar la opción de fusión mediante combinación NoTracking en las consultas</span><span class="sxs-lookup"><span data-stu-id="1f7c5-265">Consider using the NoTracking merge option for queries</span></span>  
 <span data-ttu-id="1f7c5-266">El seguimiento de los objetos devueltos en el contexto del objeto tiene un costo implícito.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-266">There is a cost required to track returned objects in the object context.</span></span> <span data-ttu-id="1f7c5-267">Para detectar cambios en los objetos y garantizar que varias solicitudes para la misma entidad lógica devuelvan la misma instancia del objeto, es necesario que los objetos se adjunten a una instancia de <xref:System.Data.Objects.ObjectContext>.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-267">Detecting changes to objects and ensuring that multiple requests for the same logical entity return the same object instance requires that objects be attached to an <xref:System.Data.Objects.ObjectContext> instance.</span></span> <span data-ttu-id="1f7c5-268">Si no tiene previsto realizar actualizaciones o eliminaciones en los objetos y no requieren administración de identidades, considere el uso de la <xref:System.Data.Objects.MergeOption.NoTracking> opciones de combinación al ejecutar consultas.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-268">If you do not plan to make updates or deletes to objects and do not require identity management, consider using the <xref:System.Data.Objects.MergeOption.NoTracking> merge options when you execute queries.</span></span>  
  
#### <a name="return-the-correct-amount-of-data"></a><span data-ttu-id="1f7c5-269">Devolver la cantidad correcta de datos</span><span class="sxs-lookup"><span data-stu-id="1f7c5-269">Return the correct amount of data</span></span>  
 <span data-ttu-id="1f7c5-270">En algunos escenarios, la especificación de una ruta de consulta mediante el método <xref:System.Data.Objects.ObjectQuery%601.Include%2A> es mucho más rápida porque requiere menos recorridos de ida y vuelta a la base de datos.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-270">In some scenarios, specifying a query path using the <xref:System.Data.Objects.ObjectQuery%601.Include%2A> method is much faster because it requires fewer round trips to the database.</span></span> <span data-ttu-id="1f7c5-271">Sin embargo, en otros escenarios, los recorridos adicionales de ida y vuelta a la base de datos para cargar los objetos relacionados pueden ser más rápidos porque las consultas más sencillas con menos combinaciones producen una menor cantidad de datos redundantes.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-271">However, in other scenarios, additional round trips to the database to load related objects may be faster because the simpler queries with fewer joins result in less redundancy of data.</span></span> <span data-ttu-id="1f7c5-272">Por ello, se recomienda probar el rendimiento de varias maneras para recuperar los objetos relacionados.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-272">Because of this, we recommend that you test the performance of various ways to retrieve related objects.</span></span> <span data-ttu-id="1f7c5-273">Para obtener más información, consulte [cargar objetos relacionados](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896272(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-273">For more information, see [Loading Related Objects](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896272(v=vs.100)).</span></span>  
  
 <span data-ttu-id="1f7c5-274">Para evitar devolver demasiados datos en una sola consulta, considere la posibilidad de paginar los resultados de la consulta en grupos que sean más fáciles de administrar.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-274">To avoid returning too much data in a single query, consider paging the results of the query into more manageable groups.</span></span> <span data-ttu-id="1f7c5-275">Para obtener más información, vea [Cómo: Resultados de la página a través de la consulta](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb738702(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-275">For more information, see [How to: Page Through Query Results](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb738702(v=vs.100)).</span></span>  
  
#### <a name="limit-the-scope-of-the-objectcontext"></a><span data-ttu-id="1f7c5-276">Limitar el ámbito de ObjectContext</span><span class="sxs-lookup"><span data-stu-id="1f7c5-276">Limit the scope of the ObjectContext</span></span>  
 <span data-ttu-id="1f7c5-277">En la mayoría de los casos, deberá crear una instancia de <xref:System.Data.Objects.ObjectContext> dentro de una instrucción `using` (`Using…End Using` en Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-277">In most cases, you should create an <xref:System.Data.Objects.ObjectContext> instance within a `using` statement (`Using…End Using` in Visual Basic).</span></span> <span data-ttu-id="1f7c5-278">Esto puede aumentar el rendimiento garantizando que los recursos asociados al contexto del objeto se eliminan automáticamente cuando el código sale del bloque de instrucciones.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-278">This can increase performance by ensuring that the resources associated with the object context are disposed automatically when the code exits the statement block.</span></span> <span data-ttu-id="1f7c5-279">Sin embargo, cuando los controles se enlazan a objetos administrados por el contexto del objeto, se debe mantener la instancia de <xref:System.Data.Objects.ObjectContext> mientras se necesite el enlace, y eliminarla posteriormente de forma manual.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-279">However, when controls are bound to objects managed by the object context, the <xref:System.Data.Objects.ObjectContext> instance should be maintained as long as the binding is needed and disposed of manually.</span></span> <span data-ttu-id="1f7c5-280">Para obtener más información, consulte [administrar conexiones y transacciones](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896325(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-280">For more information, see [Managing Connections and Transactions](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896325(v=vs.100)).</span></span>  
  
#### <a name="consider-opening-the-database-connection-manually"></a><span data-ttu-id="1f7c5-281">Considerar la posibilidad de abrir manualmente la conexión de la base de datos</span><span class="sxs-lookup"><span data-stu-id="1f7c5-281">Consider opening the database connection manually</span></span>  
 <span data-ttu-id="1f7c5-282">Cuando la aplicación ejecuta una serie de consultas de objeto o llama con frecuencia a <xref:System.Data.Objects.ObjectContext.SaveChanges%2A> conservar crear, actualizar y eliminar operaciones al origen de datos, el [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] continuamente debe abrir y cerrar la conexión al origen de datos.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-282">When your application executes a series of object queries or frequently calls <xref:System.Data.Objects.ObjectContext.SaveChanges%2A> to persist create, update, and delete operations to the data source, the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] must continuously open and close the connection to the data source.</span></span> <span data-ttu-id="1f7c5-283">En estos casos, considere la posibilidad de abrir manualmente la conexión al comienzo de estas operaciones y cerrarla o eliminarla una vez finalizadas dichas operaciones.</span><span class="sxs-lookup"><span data-stu-id="1f7c5-283">In these situations, consider manually opening the connection at the start of these operations and either closing or disposing of the connection when the operations are complete.</span></span> <span data-ttu-id="1f7c5-284">Para obtener más información, consulte [administrar conexiones y transacciones](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896325(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="1f7c5-284">For more information, see [Managing Connections and Transactions](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896325(v=vs.100)).</span></span>  
  
## <a name="performance-data"></a><span data-ttu-id="1f7c5-285">Datos de rendimiento</span><span class="sxs-lookup"><span data-stu-id="1f7c5-285">Performance Data</span></span>  
 <span data-ttu-id="1f7c5-286">Algunos datos de rendimiento para Entity Framework se publican en las entradas siguientes en el [blog del equipo de ADO.NET](https://go.microsoft.com/fwlink/?LinkId=91905):</span><span class="sxs-lookup"><span data-stu-id="1f7c5-286">Some performance data for the Entity Framework is published in the following posts on the [ADO.NET team blog](https://go.microsoft.com/fwlink/?LinkId=91905):</span></span>  
  
-   [<span data-ttu-id="1f7c5-287">Explorar el rendimiento de ADO.NET Entity Framework - Parte 1</span><span class="sxs-lookup"><span data-stu-id="1f7c5-287">Exploring the Performance of the ADO.NET Entity Framework - Part 1</span></span>](https://go.microsoft.com/fwlink/?LinkId=123907)  
  
-   [<span data-ttu-id="1f7c5-288">Explorar el rendimiento de ADO.NET Entity Framework – Parte 2</span><span class="sxs-lookup"><span data-stu-id="1f7c5-288">Exploring the Performance of the ADO.NET Entity Framework – Part 2</span></span>](https://go.microsoft.com/fwlink/?LinkId=123909)  
  
-   [<span data-ttu-id="1f7c5-289">Comparación del rendimiento de ADO.NET Entity Framework</span><span class="sxs-lookup"><span data-stu-id="1f7c5-289">ADO.NET Entity Framework Performance Comparison</span></span>](https://go.microsoft.com/fwlink/?LinkID=123913)  
  
## <a name="see-also"></a><span data-ttu-id="1f7c5-290">Vea también</span><span class="sxs-lookup"><span data-stu-id="1f7c5-290">See also</span></span>

- [<span data-ttu-id="1f7c5-291">Consideraciones de desarrollo e implementación</span><span class="sxs-lookup"><span data-stu-id="1f7c5-291">Development and Deployment Considerations</span></span>](../../../../../docs/framework/data/adonet/ef/development-and-deployment-considerations.md)

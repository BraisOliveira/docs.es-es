---
title: Proteger la información de conexión
ms.date: 03/30/2017
ms.assetid: 1471f580-bcd4-4046-bdaf-d2541ecda2f4
ms.openlocfilehash: ccb039a79c76c31b905783b81710571d8c5ab82b
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 04/18/2019
ms.locfileid: "59184449"
---
# <a name="protecting-connection-information"></a><span data-ttu-id="6bfad-102">Proteger la información de conexión</span><span class="sxs-lookup"><span data-stu-id="6bfad-102">Protecting Connection Information</span></span>
<span data-ttu-id="6bfad-103">La protección del acceso al origen de datos es uno de los objetivos más importantes a la hora de proteger una aplicación.</span><span class="sxs-lookup"><span data-stu-id="6bfad-103">Protecting access to your data source is one of the most important goals when securing an application.</span></span> <span data-ttu-id="6bfad-104">Las cadenas de conexión presentan una posible vulnerabilidad si no se protegen.</span><span class="sxs-lookup"><span data-stu-id="6bfad-104">A connection string presents a potential vulnerability if it is not secured.</span></span> <span data-ttu-id="6bfad-105">El almacenamiento de la información de conexión en texto sin formato o en la memoria ponen en riesgo el sistema completo.</span><span class="sxs-lookup"><span data-stu-id="6bfad-105">Storing connection information in plain text or persisting it in memory risks compromising your entire system.</span></span> <span data-ttu-id="6bfad-106">Cadenas de conexión incrustadas en el código fuente se pueden leer utilizando el [Ildasm.exe (Desensamblador de IL)](../../../../docs/framework/tools/ildasm-exe-il-disassembler.md) para ver lenguaje intermedio de Microsoft (MSIL) en un ensamblado compilado.</span><span class="sxs-lookup"><span data-stu-id="6bfad-106">Connection strings embedded in your source code can be read using the [Ildasm.exe (IL Disassembler)](../../../../docs/framework/tools/ildasm-exe-il-disassembler.md) to view Microsoft intermediate language (MSIL) in a compiled assembly.</span></span>  
  
 <span data-ttu-id="6bfad-107">Pueden surgir vulnerabilidades de seguridad que afecten a las cadenas de conexión en función del tipo de autenticación usado, de la forma en que las cadenas de conexión se almacenan en memoria y en disco, y de las técnicas usadas para construirlas en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="6bfad-107">Security vulnerabilities involving connection strings can arise based on the type of authentication used, how connection strings are persisted in memory and on disk, and the techniques used to construct them at run time.</span></span>  
  
## <a name="use-windows-authentication"></a><span data-ttu-id="6bfad-108">Uso de autenticación de Windows</span><span class="sxs-lookup"><span data-stu-id="6bfad-108">Use Windows Authentication</span></span>  
 <span data-ttu-id="6bfad-109">Para contribuir a limitar el acceso al origen de datos, debe proteger la información de la conexión como, por ejemplo, el id. de usuario, la contraseña y el nombre de origen de datos.</span><span class="sxs-lookup"><span data-stu-id="6bfad-109">To help limit access to your data source, you must secure connection information such as user ID, password, and data source name.</span></span> <span data-ttu-id="6bfad-110">Con el fin de evitar la exposición de información de usuario, se recomienda utilizar la autenticación de Windows (a veces se denomina *seguridad integrada*) siempre que sea posible.</span><span class="sxs-lookup"><span data-stu-id="6bfad-110">In order to avoid exposing user information, we recommend using Windows authentication (sometimes referred to as *integrated security*) wherever possible.</span></span> <span data-ttu-id="6bfad-111">La autenticación de Windows se especifica en una cadena de conexión mediante las palabras clave `Integrated Security` o `Trusted_Connection`, lo que elimina la necesidad de usar un identificador de usuario y una contraseña.</span><span class="sxs-lookup"><span data-stu-id="6bfad-111">Windows authentication is specified in a connection string by using the `Integrated Security` or `Trusted_Connection` keywords, eliminating the need to use a user ID and password.</span></span> <span data-ttu-id="6bfad-112">Cuando se usa autenticación de Windows, este sistema operativo autentica a los usuarios y el acceso a los recursos del servidor y de la base de datos se determina mediante la concesión de permisos a usuarios y grupos de Windows.</span><span class="sxs-lookup"><span data-stu-id="6bfad-112">When using Windows authentication, users are authenticated by Windows, and access to server and database resources is determined by granting permissions to Windows users and groups.</span></span>  
  
 <span data-ttu-id="6bfad-113">Cuando no sea posible usar la autenticación de Windows, es necesario extremar las precauciones, ya que las credenciales de usuario están expuestas en la cadena de conexión.</span><span class="sxs-lookup"><span data-stu-id="6bfad-113">For situations where it is not possible to use Windows authentication, you must use extra care because user credentials are exposed in the connection string.</span></span> <span data-ttu-id="6bfad-114">En una aplicación ASP.NET, puede configurar una cuenta de Windows como una identidad fija que se usa para conectarse a las bases de datos y a otros recursos de red.</span><span class="sxs-lookup"><span data-stu-id="6bfad-114">In an ASP.NET application, you can configure a Windows account as a fixed identity that is used to connect to databases and other network resources.</span></span> <span data-ttu-id="6bfad-115">Habilitar la suplantación en el elemento identity en la **web.config** archivo y especifique un nombre de usuario y una contraseña.</span><span class="sxs-lookup"><span data-stu-id="6bfad-115">You enable impersonation in the identity element in the **web.config** file and specify a user name and password.</span></span>  
  
```xml  
<identity impersonate="true"   
        userName="MyDomain\UserAccount"   
        password="*****" />  
```  
  
 <span data-ttu-id="6bfad-116">La cuenta de identidad fija debe ser una cuenta con pocos privilegios a la que sólo se le concedan los permisos necesarios en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="6bfad-116">The fixed identity account should be a low-privilege account that has been granted only necessary permissions in the database.</span></span> <span data-ttu-id="6bfad-117">Además, debe cifrar el archivo de configuración para que el nombre de usuario y la contraseña no se expongan en texto no cifrado.</span><span class="sxs-lookup"><span data-stu-id="6bfad-117">In addition, you should encrypt the configuration file so that the user name and password are not exposed in clear text.</span></span>  
  
## <a name="do-not-use-universal-data-link-udl-files"></a><span data-ttu-id="6bfad-118">No usar archivos de vínculo de datos universal (UDL)</span><span class="sxs-lookup"><span data-stu-id="6bfad-118">Do Not Use Universal Data Link (UDL) files</span></span>  
 <span data-ttu-id="6bfad-119">Evite almacenar cadenas de conexión de <xref:System.Data.OleDb.OleDbConnection> en un archivo de vínculo de datos universal (UDL).</span><span class="sxs-lookup"><span data-stu-id="6bfad-119">Avoid storing connection strings for an <xref:System.Data.OleDb.OleDbConnection> in a Universal Data Link (UDL) file.</span></span> <span data-ttu-id="6bfad-120">Los archivos UDL se almacenan en texto no cifrado y no se pueden cifrar.</span><span class="sxs-lookup"><span data-stu-id="6bfad-120">UDLs are stored in clear text and cannot be encrypted.</span></span> <span data-ttu-id="6bfad-121">Un archivo UDL no se puede proteger ni cifrar mediante .NET Framework, ya que se trata de un recurso basado en un archivo externo a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6bfad-121">A UDL file is an external file-based resource to your application, and it cannot be secured or encrypted using the .NET Framework.</span></span>  
  
## <a name="avoid-injection-attacks-with-connection-string-builders"></a><span data-ttu-id="6bfad-122">Evitar ataques de inyección con compiladores de cadenas de conexión</span><span class="sxs-lookup"><span data-stu-id="6bfad-122">Avoid Injection Attacks with Connection String Builders</span></span>  
 <span data-ttu-id="6bfad-123">Se pueden producir ataques de inyección de cadenas de conexión cuando se usa la concatenación dinámica de cadenas para generar cadenas de conexión basadas en la entrada del usuario.</span><span class="sxs-lookup"><span data-stu-id="6bfad-123">A connection string injection attack can occur when dynamic string concatenation is used to build connection strings based on user input.</span></span> <span data-ttu-id="6bfad-124">Si no se valida la entrada del usuario y no se crean secuencias de escape para los caracteres o el texto malintencionado, los atacantes pueden tener acceso a datos confidenciales y a otros recursos del servidor.</span><span class="sxs-lookup"><span data-stu-id="6bfad-124">If the user input is not validated and malicious text or characters not escaped, an attacker can potentially access sensitive data or other resources on the server.</span></span> <span data-ttu-id="6bfad-125">Para resolver este problema, ADO.NET 2.0 incorporó nuevas clases de compilador de cadenas de conexión para validar la sintaxis de las cadenas y garantizar que no se inserten parámetros adicionales.</span><span class="sxs-lookup"><span data-stu-id="6bfad-125">To address this problem, ADO.NET 2.0 introduced new connection string builder classes to validate connection string syntax and ensure that additional parameters are not introduced.</span></span> <span data-ttu-id="6bfad-126">Para obtener más información, vea [Generadores de cadenas de conexión](../../../../docs/framework/data/adonet/connection-string-builders.md).</span><span class="sxs-lookup"><span data-stu-id="6bfad-126">For more information, see [Connection String Builders](../../../../docs/framework/data/adonet/connection-string-builders.md).</span></span>  
  
## <a name="use-persist-security-infofalse"></a><span data-ttu-id="6bfad-127">Usar Persist Security Info=False</span><span class="sxs-lookup"><span data-stu-id="6bfad-127">Use Persist Security Info=False</span></span>  
 <span data-ttu-id="6bfad-128">El valor predeterminado de `Persist Security Info` es false, y se recomienda mantener este valor predeterminado en todas las cadenas de conexión.</span><span class="sxs-lookup"><span data-stu-id="6bfad-128">The default value for `Persist Security Info` is false; we recommend using this default in all connection strings.</span></span> <span data-ttu-id="6bfad-129">Si `Persist Security Info` se establece en `true` o `yes`, permitirá obtener información confidencial de seguridad de la conexión, incluidos el identificador del usuario y la contraseña, una vez que esté abierta.</span><span class="sxs-lookup"><span data-stu-id="6bfad-129">Setting `Persist Security Info` to `true` or `yes` allows security-sensitive information, including the user ID and password, to be obtained from a connection after it has been opened.</span></span> <span data-ttu-id="6bfad-130">Si `Persist Security Info` se establece en `false` o `no`, la información de seguridad se descarta tras usarla para abrir la conexión. Esto permite garantizar que los orígenes que no sean de confianza no tengan acceso a la información confidencial de seguridad.</span><span class="sxs-lookup"><span data-stu-id="6bfad-130">When `Persist Security Info` is set to `false` or `no`, security information is discarded after it is used to open the connection, ensuring that an untrusted source does not have access to security-sensitive information.</span></span>  
  
## <a name="encrypt-configuration-files"></a><span data-ttu-id="6bfad-131">Cifrar archivos de configuración</span><span class="sxs-lookup"><span data-stu-id="6bfad-131">Encrypt Configuration Files</span></span>  
 <span data-ttu-id="6bfad-132">Las cadenas de conexión también se pueden almacenar en archivos de configuración, lo que elimina la necesidad de incrustarlas en el código de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6bfad-132">You can also store connection strings in configuration files, which eliminates the need to embed them in your application's code.</span></span> <span data-ttu-id="6bfad-133">Los archivos de configuración son archivos XML estándar para los que .NET Framework ha definido un conjunto común de elementos.</span><span class="sxs-lookup"><span data-stu-id="6bfad-133">Configuration files are standard XML files for which the .NET Framework has defined a common set of elements.</span></span> <span data-ttu-id="6bfad-134">Las cadenas de conexión en archivos de configuración se almacenan normalmente en el  **\<connectionStrings >** elemento en el **app.config** para una aplicación de Windows, o el  **Web.config** archivo para una aplicación ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="6bfad-134">Connection strings in configuration files are typically stored inside the **\<connectionStrings>** element in the **app.config** for a Windows application, or the **web.config** file for an ASP.NET application.</span></span> <span data-ttu-id="6bfad-135">Para obtener más información sobre los conceptos básicos de almacenar, recuperar y cifrar cadenas de conexión de archivos de configuración, consulte [las cadenas de conexión y archivos de configuración](../../../../docs/framework/data/adonet/connection-strings-and-configuration-files.md).</span><span class="sxs-lookup"><span data-stu-id="6bfad-135">For more information on the basics of storing, retrieving and encrypting connection strings from configuration files, see [Connection Strings and Configuration Files](../../../../docs/framework/data/adonet/connection-strings-and-configuration-files.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6bfad-136">Vea también</span><span class="sxs-lookup"><span data-stu-id="6bfad-136">See also</span></span>

- [<span data-ttu-id="6bfad-137">Proteger aplicaciones de ADO.NET</span><span class="sxs-lookup"><span data-stu-id="6bfad-137">Securing ADO.NET Applications</span></span>](../../../../docs/framework/data/adonet/securing-ado-net-applications.md)
- <span data-ttu-id="6bfad-138">[Cifrar información de configuración mediante una configuración protegida](https://docs.microsoft.com/previous-versions/aspnet/53tyfkaw(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="6bfad-138">[Encrypting Configuration Information Using Protected Configuration](https://docs.microsoft.com/previous-versions/aspnet/53tyfkaw(v=vs.100))</span></span>
- [<span data-ttu-id="6bfad-139">Seguridad en .NET</span><span class="sxs-lookup"><span data-stu-id="6bfad-139">Security in .NET</span></span>](../../../standard/security/index.md)
- [<span data-ttu-id="6bfad-140">Proveedores administrados de ADO.NET y Centro para desarrolladores de DataSet</span><span class="sxs-lookup"><span data-stu-id="6bfad-140">ADO.NET Managed Providers and DataSet Developer Center</span></span>](https://go.microsoft.com/fwlink/?LinkId=217917)

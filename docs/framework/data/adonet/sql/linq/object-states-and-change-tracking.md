---
title: Estados de objetos y seguimiento de cambios
ms.date: 03/30/2017
ms.assetid: 7a808b00-9c3c-479a-aa94-717280fefd71
ms.openlocfilehash: a60afab5158d0d5f66d12d6913ee890abc8ca730
ms.sourcegitcommit: 581ab03291e91983459e56e40ea8d97b5189227e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/27/2019
ms.locfileid: "70043516"
---
# <a name="object-states-and-change-tracking"></a><span data-ttu-id="1bd4a-102">Estados de objetos y seguimiento de cambios</span><span class="sxs-lookup"><span data-stu-id="1bd4a-102">Object States and Change-Tracking</span></span>

[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]<span data-ttu-id="1bd4a-103">los objetos siempre participan en algún *Estado*.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-103">objects always participate in some *state*.</span></span> <span data-ttu-id="1bd4a-104">Por ejemplo, cuando [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] crea un nuevo objeto, el objeto está en estado `Unchanged`.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-104">For example, when [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] creates a new object, the object is in `Unchanged` state.</span></span> <span data-ttu-id="1bd4a-105">Un nuevo objeto que usted mismo crea es desconocido para <xref:System.Data.Linq.DataContext> y está en `Untracked` estado.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-105">A new object that you yourself create is unknown to the <xref:System.Data.Linq.DataContext> and is in `Untracked` state.</span></span> <span data-ttu-id="1bd4a-106">Después de la ejecución correcta de <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, todos los objetos que [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] reconoce están en estado `Unchanged`.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-106">Following successful execution of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, all objects known to [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] are in `Unchanged` state.</span></span> <span data-ttu-id="1bd4a-107">(La única excepción son los objetos que se han eliminado correctamente de la base de datos, que están en estado `Deleted` y no se pueden utilizar en esa instancia de <xref:System.Data.Linq.DataContext>.)</span><span class="sxs-lookup"><span data-stu-id="1bd4a-107">(The single exception is represented by those that have been successfully deleted from the database, which are in `Deleted` state and unusable in that <xref:System.Data.Linq.DataContext> instance.)</span></span>

## <a name="object-states"></a><span data-ttu-id="1bd4a-108">Estados de objeto</span><span class="sxs-lookup"><span data-stu-id="1bd4a-108">Object States</span></span>

<span data-ttu-id="1bd4a-109">La tabla siguiente enumera los posibles estados de los objetos de [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1bd4a-109">The following table lists the possible states for [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] objects.</span></span>

|<span data-ttu-id="1bd4a-110">Estado</span><span class="sxs-lookup"><span data-stu-id="1bd4a-110">State</span></span>|<span data-ttu-id="1bd4a-111">DESCRIPCIÓN</span><span class="sxs-lookup"><span data-stu-id="1bd4a-111">Description</span></span>|
|-----------|-----------------|
|`Untracked`|<span data-ttu-id="1bd4a-112">Objeto del que [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] no realiza un seguimiento.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-112">An object not tracked by [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)].</span></span> <span data-ttu-id="1bd4a-113">Algunos ejemplos son:</span><span class="sxs-lookup"><span data-stu-id="1bd4a-113">Examples include the following:</span></span><br /><br /> <span data-ttu-id="1bd4a-114">: Un objeto no consultado a través <xref:System.Data.Linq.DataContext> de la actual (por ejemplo, un objeto recién creado).</span><span class="sxs-lookup"><span data-stu-id="1bd4a-114">-   An object not queried through the current <xref:System.Data.Linq.DataContext> (such as a newly created object).</span></span><br /><span data-ttu-id="1bd4a-115">: Un objeto creado a través de la deserialización</span><span class="sxs-lookup"><span data-stu-id="1bd4a-115">-   An object created through deserialization</span></span><br /><span data-ttu-id="1bd4a-116">: Un objeto consultado a través <xref:System.Data.Linq.DataContext>de un diferente.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-116">-   An object queried through a different <xref:System.Data.Linq.DataContext>.</span></span>|
|`Unchanged`|<span data-ttu-id="1bd4a-117">Un objeto recuperado utilizando el <xref:System.Data.Linq.DataContext> actual y que se desconoce si se ha modificado desde que se creó.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-117">An object retrieved by using the current <xref:System.Data.Linq.DataContext> and not known to have been modified since it was created.</span></span>|
|`PossiblyModified`|<span data-ttu-id="1bd4a-118">Objeto que está *asociado* a <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-118">An object which is *attached* to a <xref:System.Data.Linq.DataContext>.</span></span> <span data-ttu-id="1bd4a-119">Para obtener más información, vea [operaciones de recuperación de datos y CUD en aplicaciones de N niveles (LINQ to SQL)](../../../../../../docs/framework/data/adonet/sql/linq/data-retrieval-and-cud-operations-in-n-tier-applications.md).</span><span class="sxs-lookup"><span data-stu-id="1bd4a-119">For more information, see [Data Retrieval and CUD Operations in N-Tier Applications (LINQ to SQL)](../../../../../../docs/framework/data/adonet/sql/linq/data-retrieval-and-cud-operations-in-n-tier-applications.md).</span></span>|
|`ToBeInserted`|<span data-ttu-id="1bd4a-120">Objeto no recuperado utilizando el <xref:System.Data.Linq.DataContext> actual.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-120">An object not retrieved by using the current <xref:System.Data.Linq.DataContext>.</span></span> <span data-ttu-id="1bd4a-121">Esto produce una operación `INSERT` en la base de datos durante la ejecución de <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-121">This causes a database `INSERT` during <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span>|
|`ToBeUpdated`|<span data-ttu-id="1bd4a-122">Objeto que se sabe que se modificó desde que se recuperó.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-122">An object known to have been modified since it was retrieved.</span></span> <span data-ttu-id="1bd4a-123">Esto produce una operación `UPDATE` en la base de datos durante la ejecución de <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-123">This causes a database `UPDATE` during <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span>|
|`ToBeDeleted`|<span data-ttu-id="1bd4a-124">Objeto marcado para la eliminación, que produce una operación `DELETE` en la base de datos durante la ejecución de <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-124">An object marked for deletion, causing a database `DELETE` during <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span>|
|`Deleted`|<span data-ttu-id="1bd4a-125">Objeto eliminado de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-125">An object that has been deleted in the database.</span></span> <span data-ttu-id="1bd4a-126">Este estado es definitivo y no permite transiciones adicionales.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-126">This state is final and does not allow for additional transitions.</span></span>|

## <a name="inserting-objects"></a><span data-ttu-id="1bd4a-127">Insertar objetos</span><span class="sxs-lookup"><span data-stu-id="1bd4a-127">Inserting Objects</span></span>

<span data-ttu-id="1bd4a-128">Puede solicitar `Inserts` explícitamente mediante el método <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-128">You can explicitly request `Inserts` by using <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>.</span></span> <span data-ttu-id="1bd4a-129">Como alternativa, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] puede deducir `Inserts` los objetos conectados a uno de los objetos conocidos que deben actualizarse.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-129">Alternatively, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] can infer `Inserts` by finding objects connected to one of the known objects that must be updated.</span></span> <span data-ttu-id="1bd4a-130">Por ejemplo, si `Untracked` agrega un objeto a una <xref:System.Data.Linq.EntitySet%601> o establece un <xref:System.Data.Linq.EntityRef%601> en un `Untracked` objeto, hace que el `Untracked` objeto sea accesible por medio de objetos de seguimiento en el gráfico.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-130">For example, if you add an `Untracked` object to an <xref:System.Data.Linq.EntitySet%601> or set an <xref:System.Data.Linq.EntityRef%601> to an `Untracked` object, you make the `Untracked` object reachable by way of tracked objects in the graph.</span></span> <span data-ttu-id="1bd4a-131">Durante el <xref:System.Data.Linq.DataContext.SubmitChanges%2A>procesamiento [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] , recorre los objetos sometidos a seguimiento y detecta cualquier objeto persistente accesible del que no se realiza un seguimiento.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-131">While processing <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] traverses the tracked objects and discovers any reachable persistent objects that are not tracked.</span></span> <span data-ttu-id="1bd4a-132">Tales objetos son candidatos para la inserción en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-132">Such objects are candidates for insertion into the database.</span></span>

<span data-ttu-id="1bd4a-133">En el caso de las clases de <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>una`o`jerarquía de herencia, () también establece el valor del miembro designado como discriminador para que coincida `o`con el tipo del objeto.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-133">For classes in an inheritance hierarchy, <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>(`o`) also sets the value of the member designated as the *discriminator* to match the type of the object `o`.</span></span> <span data-ttu-id="1bd4a-134">Si un tipo que coincide con el valor de discriminador predeterminado, esta acción hace que dicho valor se sobrescriba con el valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-134">In the case of a type matching the default discriminator value, this action causes the discriminator value to be overwritten with the default value.</span></span> <span data-ttu-id="1bd4a-135">Para obtener más información, consulte [compatibilidad con la herencia](../../../../../../docs/framework/data/adonet/sql/linq/inheritance-support.md).</span><span class="sxs-lookup"><span data-stu-id="1bd4a-135">For more information, see [Inheritance Support](../../../../../../docs/framework/data/adonet/sql/linq/inheritance-support.md).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="1bd4a-136">Un objeto agregado a `Table` no se encuentra en la memoria caché de identidad.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-136">An object added to a `Table` is not in the identity cache.</span></span> <span data-ttu-id="1bd4a-137">La memoria caché de identidad solo refleja lo que se recupera de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-137">The identity cache reflects only what is retrieved from the database.</span></span> <span data-ttu-id="1bd4a-138">Después de una llamada a <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>, la entidad agregada no aparece en las consultas en la base de datos hasta que se complete <xref:System.Data.Linq.DataContext.SubmitChanges%2A> correctamente.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-138">After a call to <xref:System.Data.Linq.Table%601.InsertOnSubmit%2A>, the added entity does not appear in queries against the database until <xref:System.Data.Linq.DataContext.SubmitChanges%2A> is successfully completed.</span></span>

## <a name="deleting-objects"></a><span data-ttu-id="1bd4a-139">Eliminar objetos</span><span class="sxs-lookup"><span data-stu-id="1bd4a-139">Deleting Objects</span></span>

<span data-ttu-id="1bd4a-140">Un objeto `o` del que se realiza un seguimiento se marca para la eliminación mediante una llamada a <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> en el objeto <xref:System.Data.Linq.Table%601> adecuado.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-140">You mark a tracked object `o` for deletion by calling <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>(o) on the appropriate <xref:System.Data.Linq.Table%601>.</span></span> [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]<span data-ttu-id="1bd4a-141">considera la eliminación de un objeto de <xref:System.Data.Linq.EntitySet%601> como una operación de actualización y el valor de clave externa correspondiente se establece en NULL.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-141">considers the removal of an object from an <xref:System.Data.Linq.EntitySet%601> as an update operation, and the corresponding foreign key value is set to null.</span></span> <span data-ttu-id="1bd4a-142">El destino de la operación (`o`) no se elimina de su tabla.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-142">The target of the operation (`o`) is not deleted from its table.</span></span> <span data-ttu-id="1bd4a-143">Por ejemplo, `cust.Orders.DeleteOnSubmit(ord)` indica una actualización donde la relación entre `cust` y `ord` se rompe estableciendo la clave externa `ord.CustomerID` en null.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-143">For example, `cust.Orders.DeleteOnSubmit(ord)` indicates an update where the relationship between `cust` and `ord` is severed by setting the foreign key `ord.CustomerID` to null.</span></span> <span data-ttu-id="1bd4a-144">Esto no produce la eliminación de la fila que corresponde a `ord`.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-144">It does not cause the deletion of the row corresponding to `ord`.</span></span>

[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)]<span data-ttu-id="1bd4a-145">realiza el siguiente procesamiento cuando se elimina un objeto (<xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>) de su tabla:</span><span class="sxs-lookup"><span data-stu-id="1bd4a-145">performs the following processing when an object is deleted (<xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>) from its table:</span></span>

- <span data-ttu-id="1bd4a-146">Cuando se llama a <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, se realiza una operación `DELETE` para ese objeto.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-146">When <xref:System.Data.Linq.DataContext.SubmitChanges%2A> is called, a `DELETE` operation is performed for that object.</span></span>

- <span data-ttu-id="1bd4a-147">La eliminación no se propaga a los objetos relacionados, estén cargados o no.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-147">The removal is not propagated to related objects regardless of whether they are loaded.</span></span> <span data-ttu-id="1bd4a-148">Concretamente, los objetos relacionados no se cargan para actualizar la propiedad de la relación.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-148">Specifically, related objects are not loaded for updating the relationship property.</span></span>

- <span data-ttu-id="1bd4a-149">Después de la ejecución correcta de <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, los objetos se establecen en el estado `Deleted`.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-149">After successful execution of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, the objects are set to the `Deleted` state.</span></span> <span data-ttu-id="1bd4a-150">Como resultado, no se puede utilizar el objeto ni su `id` en <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-150">As a result, you cannot use the object or its `id` in that <xref:System.Data.Linq.DataContext>.</span></span> <span data-ttu-id="1bd4a-151">La memoria caché interna mantenida por una instancia de <xref:System.Data.Linq.DataContext> no elimina los objetos que se recuperan o que se agregan como nuevos, incluso una vez eliminados de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-151">The internal cache maintained by a <xref:System.Data.Linq.DataContext> instance does not eliminate objects that are retrieved or added as new, even after the objects have been deleted in the database.</span></span>

<span data-ttu-id="1bd4a-152">Solo se puede llamar a <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> en un objeto del que <xref:System.Data.Linq.DataContext> realiza un seguimiento.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-152">You can call <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> only on an object tracked by the <xref:System.Data.Linq.DataContext>.</span></span> <span data-ttu-id="1bd4a-153">Para un objeto `Untracked`, se debe llamar a <xref:System.Data.Linq.Table%601.Attach%2A> antes de llamar a <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-153">For an `Untracked` object, you must call <xref:System.Data.Linq.Table%601.Attach%2A> before you call <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A>.</span></span> <span data-ttu-id="1bd4a-154">Si se llama a <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> en un objeto `Untracked`, se inicia una excepción.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-154">Calling <xref:System.Data.Linq.Table%601.DeleteOnSubmit%2A> on an `Untracked` object throws an exception.</span></span>

> [!NOTE]
> <span data-ttu-id="1bd4a-155">Al quitar un objeto de una tabla [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] , se indica a que `DELETE` genere un comando SQL correspondiente <xref:System.Data.Linq.DataContext.SubmitChanges%2A>en el momento de.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-155">Removing an object from a table tells [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] to generate a corresponding SQL `DELETE` command at the time of <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span> <span data-ttu-id="1bd4a-156">Esta acción no quita el objeto de la memoria caché ni propaga la eliminación a los objetos relacionados.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-156">This action does not remove the object from the cache or propagate the deletion to related objects.</span></span>
>
> <span data-ttu-id="1bd4a-157">Para reclamar el `id` de un objeto eliminado, utilice una nueva instancia de <xref:System.Data.Linq.DataContext>.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-157">To reclaim the `id` of a deleted object, use a new <xref:System.Data.Linq.DataContext> instance.</span></span> <span data-ttu-id="1bd4a-158">Para la limpieza de objetos relacionados, puede usar la característica de *eliminación en cascada* de la base de datos o, de lo contrario, eliminar manualmente los objetos relacionados.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-158">For cleanup of related objects, you can use the *cascade delete* feature of the database, or else manually delete the related objects.</span></span>
>
> <span data-ttu-id="1bd4a-159">Los objetos relacionados no tienen que eliminarse en ningún orden especial (a diferencia de lo que sucede en la base de datos).</span><span class="sxs-lookup"><span data-stu-id="1bd4a-159">The related objects do not have to be deleted in any special order (unlike in the database).</span></span>

## <a name="updating-objects"></a><span data-ttu-id="1bd4a-160">Actualizar objetos</span><span class="sxs-lookup"><span data-stu-id="1bd4a-160">Updating Objects</span></span>

<span data-ttu-id="1bd4a-161">Las `Updates` se detectan observando las notificaciones de cambios.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-161">You can detect `Updates` by observing notifications of changes.</span></span> <span data-ttu-id="1bd4a-162">Las notificaciones se proporcionan a través del evento <xref:System.ComponentModel.INotifyPropertyChanging.PropertyChanging> en los establecedores de propiedades.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-162">Notifications are provided through the <xref:System.ComponentModel.INotifyPropertyChanging.PropertyChanging> event in property setters.</span></span> <span data-ttu-id="1bd4a-163">Cuando [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] recibe una notificación del primer cambio de un objeto, crea una copia del mismo y lo considera como candidato para generar una instrucción `Update`.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-163">When [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] is notified of the first change to an object, it creates a copy of the object and considers the object a candidate for generating an `Update` statement.</span></span>

<span data-ttu-id="1bd4a-164">En el caso de los objetos <xref:System.ComponentModel.INotifyPropertyChanging>que [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] no implementan, mantiene una copia de los valores que tenían los objetos cuando se materializaron por primera vez.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-164">For objects that do not implement <xref:System.ComponentModel.INotifyPropertyChanging>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] maintains a copy of the values that objects had when they were first materialized.</span></span> <span data-ttu-id="1bd4a-165">Al llamar a <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] compara los valores originales y actuales para decidir si se ha cambiado el objeto.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-165">When you call <xref:System.Data.Linq.DataContext.SubmitChanges%2A>, [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] compares the current and original values to decide whether the object has been changed.</span></span>

<span data-ttu-id="1bd4a-166">Para las actualizaciones de relaciones, la autoridad es la referencia del elemento secundario al elemento primario (es decir, la referencia que corresponde a la clave externa).</span><span class="sxs-lookup"><span data-stu-id="1bd4a-166">For updates to relationships, the reference from the child to the parent (that is, the reference corresponding to the foreign key) is considered the authority.</span></span> <span data-ttu-id="1bd4a-167">La referencia en dirección inversa (es decir, del elemento primario al elemento secundario) es opcional.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-167">The reference in the reverse direction (that is, from parent to child) is optional.</span></span> <span data-ttu-id="1bd4a-168">Las clases de relaciones (<xref:System.Data.Linq.EntitySet%601> y <xref:System.Data.Linq.EntityRef%601>) garantizan que las referencias bidireccionales son coherentes para las relaciones uno a varios y uno a uno.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-168">Relationship classes (<xref:System.Data.Linq.EntitySet%601> and <xref:System.Data.Linq.EntityRef%601>) guarantee that the bidirectional references are consistent for one-to-many and one-to-one relationships.</span></span> <span data-ttu-id="1bd4a-169">Si el modelo de objetos no utiliza <xref:System.Data.Linq.EntitySet%601> o <xref:System.Data.Linq.EntityRef%601> y si la referencia inversa está presente, es su responsabilidad mantenerla coherente con la referencia adelantada cuando se actualice la relación.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-169">If the object model does not use <xref:System.Data.Linq.EntitySet%601> or <xref:System.Data.Linq.EntityRef%601>, and if the reverse reference is present, it is your responsibility to keep it consistent with the forward reference when the relationship is updated.</span></span>

<span data-ttu-id="1bd4a-170">Si actualiza la referencia requerida y la clave externa correspondiente, debe asegurarse de que coinciden.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-170">If you update both the required reference and the corresponding foreign key, you must make sure that they agree.</span></span> <span data-ttu-id="1bd4a-171">Se producirá una excepción <xref:System.InvalidOperationException> si ambas no están sincronizadas cuando se llame a <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-171">An <xref:System.InvalidOperationException> exception is thrown if the two are not synchronized at the time that you call <xref:System.Data.Linq.DataContext.SubmitChanges%2A>.</span></span> <span data-ttu-id="1bd4a-172">Aunque los cambios de los valores de clave externa son suficientes para que se actualice la fila subyacente, debería cambiar la referencia para mantener la conectividad del gráfico de objetos y la coherencia bidireccional de las relaciones.</span><span class="sxs-lookup"><span data-stu-id="1bd4a-172">Although foreign key value changes are sufficient for affecting an update of the underlying row, you should change the reference to maintain connectivity of the object graph and bidirectional consistency of relationships.</span></span>

## <a name="see-also"></a><span data-ttu-id="1bd4a-173">Vea también</span><span class="sxs-lookup"><span data-stu-id="1bd4a-173">See also</span></span>

- [<span data-ttu-id="1bd4a-174">Información general</span><span class="sxs-lookup"><span data-stu-id="1bd4a-174">Background Information</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/background-information.md)
- [<span data-ttu-id="1bd4a-175">Operaciones de inserción, actualización y eliminación</span><span class="sxs-lookup"><span data-stu-id="1bd4a-175">Insert, Update, and Delete Operations</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/insert-update-and-delete-operations.md)

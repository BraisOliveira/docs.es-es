---
title: Asignaciones de tipos personalizadas entre SQL y CLR
ms.date: 03/30/2017
ms.assetid: d916c7fb-4b56-4214-acbe-5e23365047b2
ms.openlocfilehash: 5aff9a78349cbf9443c5b663a41d7c13a109e625
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/22/2019
ms.locfileid: "69945047"
---
# <a name="sql-clr-custom-type-mappings"></a><span data-ttu-id="459aa-102">Asignaciones de tipos personalizadas entre SQL y CLR</span><span class="sxs-lookup"><span data-stu-id="459aa-102">SQL-CLR Custom Type Mappings</span></span>
<span data-ttu-id="459aa-103">La asignación de tipos entre SQL Server y Common Language Runtime (CLR) se especifica automáticamente al usar la herramienta de línea de comandos SQLMetal, Object Relational Designer.</span><span class="sxs-lookup"><span data-stu-id="459aa-103">Type mapping between SQL Server and the common language runtime (CLR) is automatically specified when you use the SQLMetal command-line tool, Object Relational Designer (O/R Designer).</span></span>  
  
 <span data-ttu-id="459aa-104">Cuando no se realiza ninguna asignación personalizada, estas herramientas asignan las asignaciones de tipos predeterminadas como se describe en [asignación de tipos SQL-CLR](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="459aa-104">When no customized mapping is performed, these tools assign default type mappings as described in [SQL-CLR Type Mapping](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md).</span></span> <span data-ttu-id="459aa-105">Si desea que las asignaciones de tipos sean distintas de las predeterminadas, tendrá que hacer alguna personalización de ellas.</span><span class="sxs-lookup"><span data-stu-id="459aa-105">If you want to type mappings differently from these defaults, you need to do some customization of the type mappings.</span></span>  
  
 <span data-ttu-id="459aa-106">Al personalizar las asignaciones de tipos, el enfoque recomendado es realizar los cambios en un archivo DBML intermedio.</span><span class="sxs-lookup"><span data-stu-id="459aa-106">When customizing type mappings, the recommended approach is to make the changes in an intermediary DBML file.</span></span> <span data-ttu-id="459aa-107">Después, el archivo DBML personalizado se debe usar al crear los archivos de código y de asignación con SQLMetal u Object Relational Designer.</span><span class="sxs-lookup"><span data-stu-id="459aa-107">Then, your customized DBML file should be used when you create you code and mapping files with SQLMetal or O/R Designer.</span></span>  
  
 <span data-ttu-id="459aa-108">Una vez creada una instancia del objeto <xref:System.Data.Linq.DataContext> desde los archivos de código y de asignación, el método <xref:System.Data.Linq.DataContext.CreateDatabase%2A?displayProperty=nameWithType> crea una base de datos basándose en las asignaciones de tipos especificadas.</span><span class="sxs-lookup"><span data-stu-id="459aa-108">Once you instantiate the <xref:System.Data.Linq.DataContext> object from the code and mapping files, the <xref:System.Data.Linq.DataContext.CreateDatabase%2A?displayProperty=nameWithType> method creates a database based on the type mappings that are specified.</span></span> <span data-ttu-id="459aa-109">Si no hay atributos `type` de CLR especificados en las asignaciones, se usarán las asignaciones de tipos predeterminadas.</span><span class="sxs-lookup"><span data-stu-id="459aa-109">If there are no CLR `type` attributes specified in the mappings, the default type mappings will be used.</span></span>  
  
## <a name="customization-with-sqlmetal-or-or-designer"></a><span data-ttu-id="459aa-110">Personalización con SQLMetal o con Object Relational Designer</span><span class="sxs-lookup"><span data-stu-id="459aa-110">Customization with SQLMetal or O/R Designer</span></span>  
 <span data-ttu-id="459aa-111">Con SQLMetal o con Object Relational Designer puede crear automáticamente un modelo de objetos que incluye información de asignación dentro o fuera del archivo de código.</span><span class="sxs-lookup"><span data-stu-id="459aa-111">With SQLMetal and O/R Designer, you can automatically create an object model that includes the type mapping information inside or outside the code file.</span></span> <span data-ttu-id="459aa-112">Dado que SQLMetal o con Object Relational Designer sobrescribe estos archivos, cada vez que vuelve a crear las asignaciones, el método recomendado para especificar las asignaciones de tipos personalizadas es personalizar un archivo DBML.</span><span class="sxs-lookup"><span data-stu-id="459aa-112">Because these files are overwritten by SQLMetal or O/R Designer, each time you recreate your mappings, the recommended approach to specifying custom type mappings is to customize a DBML file.</span></span>  
  
 <span data-ttu-id="459aa-113">Para personalizar las asignaciones de tipos con SQLMetal o con Object Relational Designer, primero genere un archivo DBML.</span><span class="sxs-lookup"><span data-stu-id="459aa-113">To customize type mappings with SQLMetal or O/R Designer, first generate a DBML file.</span></span> <span data-ttu-id="459aa-114">Luego, antes de generar el archivo de código o el archivo de asignación, modifique el archivo DBML para identificar las asignaciones de tipos deseadas.</span><span class="sxs-lookup"><span data-stu-id="459aa-114">Then, before generating the code file or mapping file, modify the DBML file to identify the desired type mappings.</span></span> <span data-ttu-id="459aa-115">Con SQLMetal, tiene que cambiar manualmente los atributos `Type` y `DbType` del archivo DBML para hacer las personalizaciones de asignación de tipos.</span><span class="sxs-lookup"><span data-stu-id="459aa-115">With SQLMetal, you have to manually change the `Type` and `DbType` attributes in the DBML file to make your type mapping customizations.</span></span> <span data-ttu-id="459aa-116">Con Object Relational Designer, puede hacer los cambios en el Diseñador.</span><span class="sxs-lookup"><span data-stu-id="459aa-116">With O/R Designer, you can make your changes within the Designer.</span></span> <span data-ttu-id="459aa-117">Para obtener más información sobre el uso de Object Relational Designer, vea [LINQ to SQL Tools en Visual Studio](/visualstudio/data-tools/linq-to-sql-tools-in-visual-studio2).</span><span class="sxs-lookup"><span data-stu-id="459aa-117">For more information about using the O/R Designer, see [LINQ to SQL Tools in Visual Studio](/visualstudio/data-tools/linq-to-sql-tools-in-visual-studio2).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="459aa-118">Algunas asignaciones de tipos pueden tener como resultado excepciones de desbordamiento o de pérdida de datos mientras se convierten a la base de datos o desde ella.</span><span class="sxs-lookup"><span data-stu-id="459aa-118">Some type mappings may result in overflow or data loss exceptions while translating to or from the database.</span></span> <span data-ttu-id="459aa-119">Revise cuidadosamente la matriz de comportamiento de la asignación de tipos en tiempo de ejecución en la [asignación de tipos SQL-CLR](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md) antes de realizar cualquier personalización.</span><span class="sxs-lookup"><span data-stu-id="459aa-119">Carefully review the Type Mapping Run-time Behavior Matrix in [SQL-CLR Type Mapping](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md) before making any customizations.</span></span>  
  
 <span data-ttu-id="459aa-120">Para que SQLMetal o bien Object Relational Designer reconozcan las personalizaciones de asignación de tipos, tiene que asegurarse de que estas herramientas se proporcionan con la ruta de acceso del archivo DBML personalizado al generar el archivo de código o el archivo de asignación externa.</span><span class="sxs-lookup"><span data-stu-id="459aa-120">In order for your type mapping customizations to be recognized by SQLMetal or O/R Designer, you need to make sure that these tools are supplied with the path to your custom DBML file when you generate your code file or external mapping file.</span></span> <span data-ttu-id="459aa-121">Aunque no es necesario para la personalización de la asignación de tipos, se recomienda que siempre separe la información de asignación de tipos del archivo de código y genere el archivo de asignación de tipos externa adicional.</span><span class="sxs-lookup"><span data-stu-id="459aa-121">Although not required for type mapping customization, it is recommended that you always separate your type mapping information from your code file and generate the additional external type mapping file.</span></span> <span data-ttu-id="459aa-122">Con esto permitirá alguna flexibilidad al no necesitar que se recompile el archivo de código.</span><span class="sxs-lookup"><span data-stu-id="459aa-122">Doing so will leave some flexibility by not requiring that the code file be recompiled.</span></span>  
  
## <a name="incorporating-database-changes"></a><span data-ttu-id="459aa-123">Incorporación de cambios en la base de datos</span><span class="sxs-lookup"><span data-stu-id="459aa-123">Incorporating Database Changes</span></span>  
 <span data-ttu-id="459aa-124">Cuando la base de datos cambia, tendrá que actualizar el archivo DBML para reflejar esos cambios.</span><span class="sxs-lookup"><span data-stu-id="459aa-124">When your database changes, you will need to update your DBML file to reflect those changes.</span></span> <span data-ttu-id="459aa-125">Uno modo de hacer esto es crear automáticamente un archivo DBML nuevo y, a continuación, volver a efectuar las personalizaciones de asignación de tipos.</span><span class="sxs-lookup"><span data-stu-id="459aa-125">One way to do this is to automatically create a new DBML file and then re-do your type mapping customizations.</span></span> <span data-ttu-id="459aa-126">Como alternativa, podría comparar las diferencias entre el archivo DBML nuevo y el archivo DBML personalizado y actualizar el archivo DBML personalizado para reflejar el cambio en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="459aa-126">Alternatively, you could compare the differences between your new DBML file and your customized DBML file and update your custom DBML file manually to reflect the database change.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="459aa-127">Vea también</span><span class="sxs-lookup"><span data-stu-id="459aa-127">See also</span></span>

- [<span data-ttu-id="459aa-128">Asignación de tipos entre CLR y SQL</span><span class="sxs-lookup"><span data-stu-id="459aa-128">SQL-CLR Type Mapping</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/sql-clr-type-mapping.md)
- [<span data-ttu-id="459aa-129">Generación de código en LINQ to SQL</span><span class="sxs-lookup"><span data-stu-id="459aa-129">Code Generation in LINQ to SQL</span></span>](../../../../../../docs/framework/data/adonet/sql/linq/code-generation-in-linq-to-sql.md)

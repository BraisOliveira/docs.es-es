---
title: Materialización de objetos (Servicios de datos de WCF)
ms.date: 03/30/2017
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, querying
ms.assetid: f0dbf7b0-0292-4e31-9ae4-b98288336dc1
ms.openlocfilehash: f4789b3bfd5f9810a9abc870518add9b4a0a045b
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/28/2019
ms.locfileid: "64645533"
---
# <a name="object-materialization-wcf-data-services"></a><span data-ttu-id="79ba6-102">Materialización de objetos (Servicios de datos de WCF)</span><span class="sxs-lookup"><span data-stu-id="79ba6-102">Object Materialization (WCF Data Services)</span></span>
<span data-ttu-id="79ba6-103">Cuando se usa el **Add Service Reference** cuadro de diálogo para consumir un [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] la fuente en una aplicación cliente basada en .NET Framework, se generan clases equivalentes para cada tipo de entidad en el modelo de datos expuesto por la fuente.</span><span class="sxs-lookup"><span data-stu-id="79ba6-103">When you use the **Add Service Reference** dialog to consume an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed in a .NET Framework-based client application, equivalent data classes are generated for each entity type in the data model exposed by the feed.</span></span> <span data-ttu-id="79ba6-104">Para obtener más información, consulte [generar la biblioteca de cliente de servicio de datos](../../../../docs/framework/data/wcf/generating-the-data-service-client-library-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="79ba6-104">For more information, see [Generating the Data Service Client Library](../../../../docs/framework/data/wcf/generating-the-data-service-client-library-wcf-data-services.md).</span></span> <span data-ttu-id="79ba6-105">Los datos de entidad devueltos por una consulta se materializan en una instancia de una de estas clases de servicio de datos de cliente generadas.</span><span class="sxs-lookup"><span data-stu-id="79ba6-105">Entity data that is returned by a query is materialized into an instance of one of these generated client data service classes.</span></span> <span data-ttu-id="79ba6-106">Para obtener información acerca de las opciones de combinación y resolución de identidades para objetos con seguimiento, vea [administrar el contexto de servicio de datos](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="79ba6-106">For information about merge options and identity resolution for tracked objects, see [Managing the Data Service Context](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span></span>  
  
 [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <span data-ttu-id="79ba6-107">también le permite definir sus propias clases de servicio de datos de cliente en lugar de usar las clases de datos generadas por herramientas.</span><span class="sxs-lookup"><span data-stu-id="79ba6-107">also enables you to define your own client data service classes rather than using the tool-generated data classes.</span></span> <span data-ttu-id="79ba6-108">De esta forma, puede usar sus propias clases de datos, que también se conocen como clases de datos "tipos de objetos CLR antiguos sin formato" (POCO).</span><span class="sxs-lookup"><span data-stu-id="79ba6-108">This enables you to use your own data classes, also known as "plain-old CLR object" (POCO) data classes.</span></span> <span data-ttu-id="79ba6-109">Al usar estos tipos de clases de datos personalizadas, debe atribuir la clase de datos con cualquiera <xref:System.Data.Services.Common.DataServiceKeyAttribute> o <xref:System.Data.Services.Common.DataServiceEntityAttribute> y asegúrese de que los nombres de tipos en los nombres de tipo de coincidencia de cliente en el modelo de datos del servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="79ba6-109">When using these types of custom data classes, you should attribute the data class with either <xref:System.Data.Services.Common.DataServiceKeyAttribute> or <xref:System.Data.Services.Common.DataServiceEntityAttribute> and ensure that type names on the client match type names in the data model of the data service.</span></span>  
  
 <span data-ttu-id="79ba6-110">Después de la biblioteca recibe el mensaje de respuesta de consulta, materializa los datos devueltos desde el [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] las clases de servicio son del tipo de la consulta se envían a las instancias de datos de cliente.</span><span class="sxs-lookup"><span data-stu-id="79ba6-110">After the library receives the query response message, it materializes the returned data from the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed into instances of client data service classes that are of the type of the query.</span></span> <span data-ttu-id="79ba6-111">El proceso general para materializar estos objetos es el siguiente:</span><span class="sxs-lookup"><span data-stu-id="79ba6-111">The general process for materializing these objects is as follows:</span></span>  
  
1. <span data-ttu-id="79ba6-112">La biblioteca de cliente lee el tipo serializado desde el elemento `entry` en la fuente del mensaje de respuesta e intenta crear una nueva instancia del tipo correcto de una de estas formas:</span><span class="sxs-lookup"><span data-stu-id="79ba6-112">The client library reads the serialized type from the `entry` element in the response message feed and attempts to create a new instance of the correct type, in one of the following ways:</span></span>  
  
    - <span data-ttu-id="79ba6-113">Cuando el tipo declarado en la fuente tenga el mismo nombre que el tipo de la clase <xref:System.Data.Services.Client.DataServiceQuery%601>, se crea una nueva instancia de este tipo mediante el constructor vacío.</span><span class="sxs-lookup"><span data-stu-id="79ba6-113">When the type declared in the feed has the same name as the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this type is created by using the empty constructor.</span></span>  
  
    - <span data-ttu-id="79ba6-114">Cuando el tipo declarado en la fuente tenga el mismo tipo que se deriva del tipo de la clase <xref:System.Data.Services.Client.DataServiceQuery%601>, se crea una nueva instancia de este tipo derivado mediante el constructor vacío.</span><span class="sxs-lookup"><span data-stu-id="79ba6-114">When the type declared in the feed has the same name as a type that is derived from the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this derived type is created by using the empty constructor.</span></span>  
  
    - <span data-ttu-id="79ba6-115">Cuando el tipo declarado en la fuente no se pueda hacer coincidir con el tipo de la clase <xref:System.Data.Services.Client.DataServiceQuery%601> ni con ningún tipo derivado, se crea una nueva instancia del tipo consultado mediante el constructor vacío.</span><span class="sxs-lookup"><span data-stu-id="79ba6-115">When the type declared in the feed cannot be matched to the type of the <xref:System.Data.Services.Client.DataServiceQuery%601> or any derived types, a new instance of the queried type is created by using the empty constructor.</span></span>  
  
    - <span data-ttu-id="79ba6-116">Cuando se establezca la propiedad <xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A>, se llama al delegado proporcionado para invalidar la asignación de tipos basada en nombre predeterminada y, en su lugar, se crea una nueva instancia del tipo devuelto por el delgado <xref:System.Func%602>.</span><span class="sxs-lookup"><span data-stu-id="79ba6-116">When the <xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A> property is set, the supplied delegate is called to override the default name-based type mapping and a new instance of the type returned by the <xref:System.Func%602> is created instead.</span></span> <span data-ttu-id="79ba6-117">Si este delegado devuelve un valor NULL, en su lugar se crea una nueva instancia del tipo consultado.</span><span class="sxs-lookup"><span data-stu-id="79ba6-117">If this delegate returns a null value, a new instance of the queried type is created instead.</span></span> <span data-ttu-id="79ba6-118">Quizá sea necesario invalidar la asignación de nombre basada en tipo predeterminada para admitir escenarios de herencia.</span><span class="sxs-lookup"><span data-stu-id="79ba6-118">It may be required to override the default name-based type name mapping to support inheritance scenarios.</span></span>  
  
2. <span data-ttu-id="79ba6-119">La biblioteca de cliente lee el valor de URI desde el elemento `id` de `entry`, que es el valor de identidad de la entidad.</span><span class="sxs-lookup"><span data-stu-id="79ba6-119">The client library reads the URI value from the `id` element of the `entry`, which is the identity value of the entity.</span></span> <span data-ttu-id="79ba6-120">A menos que se use un valor de la propiedad <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> de la enumeración <xref:System.Data.Services.Client.MergeOption.NoTracking>, se usa el valor de identidad para realizar el seguimiento del objeto en la clase <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="79ba6-120">Unless a <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> value of <xref:System.Data.Services.Client.MergeOption.NoTracking> is used, the identity value is used to track the object in the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="79ba6-121">El valor de identidad también se usa para garantizar que solo se cree una única instancia de identidad, aunque se devuelva varias veces una entidad en la respuesta de la consulta.</span><span class="sxs-lookup"><span data-stu-id="79ba6-121">The identity value is also used to guarantee that only a single entity instance is created, even when an entity is returned multiple times in the query response.</span></span>  
  
3. <span data-ttu-id="79ba6-122">La biblioteca de cliente lee propiedades desde la entrada de la fuente y establece las propiedades correspondientes en el objeto recién creado.</span><span class="sxs-lookup"><span data-stu-id="79ba6-122">The client library reads properties from the feed entry and set the corresponding properties on the newly created object.</span></span> <span data-ttu-id="79ba6-123">Cuando un objeto con el mismo valor de identidad se produce en la clase <xref:System.Data.Services.Client.DataServiceContext>, las propiedades se establecen basándose en la configuración de <xref:System.Data.Services.Client.MergeOption> de la clase <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="79ba6-123">When an object that has the same identity value already occurs in the <xref:System.Data.Services.Client.DataServiceContext>, the properties are set based on the <xref:System.Data.Services.Client.MergeOption> setting of the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="79ba6-124">Puede que la respuesta contenga valores de propiedad para los que no se produzca ninguna propiedad correspondiente en el tipo de cliente.</span><span class="sxs-lookup"><span data-stu-id="79ba6-124">The response might contain property values for which a corresponding property does not occur in the client type.</span></span> <span data-ttu-id="79ba6-125">En este caso, la acción depende del valor de la propiedad <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> de la clase <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="79ba6-125">When this occurs, the action depends on the value of the <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="79ba6-126">Cuando esta propiedad se establece en `true`, se ignora la propiedad que falta.</span><span class="sxs-lookup"><span data-stu-id="79ba6-126">When this property is set to `true`, the missing property is ignored.</span></span> <span data-ttu-id="79ba6-127">En caso contrario, se produce un error.</span><span class="sxs-lookup"><span data-stu-id="79ba6-127">Otherwise, an error is raised.</span></span> <span data-ttu-id="79ba6-128">Las propiedades se establecen de la siguiente forma:</span><span class="sxs-lookup"><span data-stu-id="79ba6-128">Properties are set as follows:</span></span>  
  
    - <span data-ttu-id="79ba6-129">Las propiedades escalares se establecen en el valor correspondiente de la entrada del mensaje de respuesta.</span><span class="sxs-lookup"><span data-stu-id="79ba6-129">Scalar properties are set to the corresponding value in the entry in the response message.</span></span>  
  
    - <span data-ttu-id="79ba6-130">Las propiedades complejas se establecen en una nueva instancia de tipo complejo, que se establecen con las propiedades del tipo complejo de la respuesta.</span><span class="sxs-lookup"><span data-stu-id="79ba6-130">Complex properties are set to a new complex type instance, which are set with the properties of the complex type from the response.</span></span>  
  
    - <span data-ttu-id="79ba6-131">Las propiedades de navegación que devuelven una colección de entidades relacionadas se establecen en una instancia nueva o en una instancia existente de la interfaz <xref:System.Collections.Generic.ICollection%601>, donde `T` es el tipo de entidad relacionada.</span><span class="sxs-lookup"><span data-stu-id="79ba6-131">Navigation properties that return a collection of related entities are set to a new or existing instance of <xref:System.Collections.Generic.ICollection%601>, where `T` is the type of the related entity.</span></span> <span data-ttu-id="79ba6-132">Esta colección está vacía a menos que se hayan cargado los objetos relacionados en la clase <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="79ba6-132">This collection is empty unless the related objects have been loaded into the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="79ba6-133">Para obtener más información, consulte [cargar contenido diferido](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="79ba6-133">For more information, see [Loading Deferred Content](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="79ba6-134">Cuando las clases de datos del cliente generadas admitan el enlace de datos, las propiedades de navegación devuelven instancias de la clase <xref:System.Data.Services.Client.DataServiceCollection%601> en su lugar.</span><span class="sxs-lookup"><span data-stu-id="79ba6-134">When the generated client data classes support data binding, navigation properties return instances of the <xref:System.Data.Services.Client.DataServiceCollection%601> class instead.</span></span> <span data-ttu-id="79ba6-135">Para obtener más información, consulte [enlazar datos a controles](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="79ba6-135">For more information, see [Binding Data to Controls](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span></span>  
  
4. <span data-ttu-id="79ba6-136">Se genera el evento <xref:System.Data.Services.Client.DataServiceContext.ReadingEntity>.</span><span class="sxs-lookup"><span data-stu-id="79ba6-136">The <xref:System.Data.Services.Client.DataServiceContext.ReadingEntity> event is raised.</span></span>  
  
5. <span data-ttu-id="79ba6-137">La biblioteca de clientes adjunta el objeto a la clase <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="79ba6-137">The client library attaches the object to the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="79ba6-138">El objeto no se adjunta cuando la clase <xref:System.Data.Services.Client.MergeOption> es la enumeración <xref:System.Data.Services.Client.MergeOption.NoTracking>.</span><span class="sxs-lookup"><span data-stu-id="79ba6-138">The object is not attached when the <xref:System.Data.Services.Client.MergeOption> is <xref:System.Data.Services.Client.MergeOption.NoTracking>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="79ba6-139">Vea también</span><span class="sxs-lookup"><span data-stu-id="79ba6-139">See also</span></span>

- [<span data-ttu-id="79ba6-140">Consultar el servicio de datos</span><span class="sxs-lookup"><span data-stu-id="79ba6-140">Querying the Data Service</span></span>](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)
- [<span data-ttu-id="79ba6-141">Proyecciones de consultas</span><span class="sxs-lookup"><span data-stu-id="79ba6-141">Query Projections</span></span>](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md)

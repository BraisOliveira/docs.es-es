---
title: Utilización de contratos de datos
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- DataContractAttribute class
- WCF, data
- data contracts [WCF]
ms.assetid: a3ae7b21-c15c-4c05-abd8-f483bcbf31af
ms.openlocfilehash: 0f33bdc006c6b965ba60257637f3cef182555d7d
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/28/2019
ms.locfileid: "64637720"
---
# <a name="using-data-contracts"></a><span data-ttu-id="17f23-102">Utilización de contratos de datos</span><span class="sxs-lookup"><span data-stu-id="17f23-102">Using Data Contracts</span></span>
<span data-ttu-id="17f23-103">Un *contrato de datos* es un acuerdo formal entre un servicio y un cliente que abstractamente describe los datos que se van a intercambiar.</span><span class="sxs-lookup"><span data-stu-id="17f23-103">A *data contract* is a formal agreement between a service and a client that abstractly describes the data to be exchanged.</span></span> <span data-ttu-id="17f23-104">Es decir, para comunicarse, el cliente y el servicio no tienen que compartir los mismos tipos, solo los mismos contratos de datos.</span><span class="sxs-lookup"><span data-stu-id="17f23-104">That is, to communicate, the client and the service do not have to share the same types, only the same data contracts.</span></span> <span data-ttu-id="17f23-105">Un contrato de datos define con precisión, para cada parámetro o tipo de valor devuelto, qué datos se serializan (se convierten en XML) para su intercambio.</span><span class="sxs-lookup"><span data-stu-id="17f23-105">A data contract precisely defines, for each parameter or return type, what data is serialized (turned into XML) to be exchanged.</span></span>  
  
## <a name="data-contract-basics"></a><span data-ttu-id="17f23-106">Fundamentos del contrato de datos</span><span class="sxs-lookup"><span data-stu-id="17f23-106">Data Contract Basics</span></span>  
 <span data-ttu-id="17f23-107">Windows Communication Foundation (WCF) utiliza un motor de serialización llamado serializador de contratos de datos de forma predeterminada para serializar y deserializar datos (convertirlos a y desde XML).</span><span class="sxs-lookup"><span data-stu-id="17f23-107">Windows Communication Foundation (WCF) uses a serialization engine called the Data Contract Serializer by default to serialize and deserialize data (convert it to and from XML).</span></span> <span data-ttu-id="17f23-108">Todos los tipos primitivos [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] , como enteros y cadenas, así como ciertos tipos tratados como primitivos, como <xref:System.DateTime> y <xref:System.Xml.XmlElement>, se pueden serializar sin otra preparación y se considera que tienen contratos de datos predeterminados.</span><span class="sxs-lookup"><span data-stu-id="17f23-108">All [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] primitive types, such as integers and strings, as well as certain types treated as primitives, such as <xref:System.DateTime> and <xref:System.Xml.XmlElement>, can be serialized with no other preparation and are considered as having default data contracts.</span></span> <span data-ttu-id="17f23-109">Muchos tipos [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] también tienen contratos de datos existentes.</span><span class="sxs-lookup"><span data-stu-id="17f23-109">Many [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] types also have existing data contracts.</span></span> <span data-ttu-id="17f23-110">Para obtener una lista completa de los tipos serializables, consulte [Types Supported by the Data Contract Serializer](../../../../docs/framework/wcf/feature-details/types-supported-by-the-data-contract-serializer.md).</span><span class="sxs-lookup"><span data-stu-id="17f23-110">For a full list of serializable types, see [Types Supported by the Data Contract Serializer](../../../../docs/framework/wcf/feature-details/types-supported-by-the-data-contract-serializer.md).</span></span>  
  
 <span data-ttu-id="17f23-111">Los nuevos tipos complejos que se crean deben tener un contrato de datos definido para que sean serializables.</span><span class="sxs-lookup"><span data-stu-id="17f23-111">New complex types that you create must have a data contract defined for them to be serializable.</span></span> <span data-ttu-id="17f23-112">De forma predeterminada, <xref:System.Runtime.Serialization.DataContractSerializer> deduce el contrato de datos y serializa todos los tipos públicamente visibles.</span><span class="sxs-lookup"><span data-stu-id="17f23-112">By default, the <xref:System.Runtime.Serialization.DataContractSerializer> infers the data contract and serializes all publicly visible types.</span></span> <span data-ttu-id="17f23-113">Se serializan todas las propiedades de lectura y escritura públicas y campos del tipo.</span><span class="sxs-lookup"><span data-stu-id="17f23-113">All public read/write properties and fields of the type are serialized.</span></span> <span data-ttu-id="17f23-114">Puede descartar miembros de la serialización mediante el uso de <xref:System.Runtime.Serialization.IgnoreDataMemberAttribute>.</span><span class="sxs-lookup"><span data-stu-id="17f23-114">You can opt out members from serialization by using the <xref:System.Runtime.Serialization.IgnoreDataMemberAttribute>.</span></span> <span data-ttu-id="17f23-115">También puede crear explícitamente un contrato de datos mediante el uso de los atributos <xref:System.Runtime.Serialization.DataContractAttribute> y <xref:System.Runtime.Serialization.DataMemberAttribute> .</span><span class="sxs-lookup"><span data-stu-id="17f23-115">You can also explicitly create a data contract by using <xref:System.Runtime.Serialization.DataContractAttribute> and <xref:System.Runtime.Serialization.DataMemberAttribute> attributes.</span></span> <span data-ttu-id="17f23-116">Esto se hace normalmente aplicando el atributo <xref:System.Runtime.Serialization.DataContractAttribute> al tipo.</span><span class="sxs-lookup"><span data-stu-id="17f23-116">This is normally done by applying the <xref:System.Runtime.Serialization.DataContractAttribute> attribute to the type.</span></span> <span data-ttu-id="17f23-117">Este atributo se puede aplicar a clases, estructuras y enumeraciones.</span><span class="sxs-lookup"><span data-stu-id="17f23-117">This attribute can be applied to classes, structures, and enumerations.</span></span> <span data-ttu-id="17f23-118">El atributo <xref:System.Runtime.Serialization.DataMemberAttribute> se debe aplicar a continuación a cada miembro del tipo de contrato de datos para indicar que es un *miembro de datos*, es decir, que se debería serializar.</span><span class="sxs-lookup"><span data-stu-id="17f23-118">The <xref:System.Runtime.Serialization.DataMemberAttribute> attribute must then be applied to each member of the data contract type to indicate that it is a *data member*, that is, it should be serialized.</span></span> <span data-ttu-id="17f23-119">Para obtener más información, consulte [tipos serializables](../../../../docs/framework/wcf/feature-details/serializable-types.md).</span><span class="sxs-lookup"><span data-stu-id="17f23-119">For more information, see [Serializable Types](../../../../docs/framework/wcf/feature-details/serializable-types.md).</span></span>  
  
### <a name="example"></a><span data-ttu-id="17f23-120">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="17f23-120">Example</span></span>  
 <span data-ttu-id="17f23-121">En el ejemplo siguiente se muestra un contrato de servicio (una interfaz) al que se han aplicado los atributos <xref:System.ServiceModel.ServiceContractAttribute> y <xref:System.ServiceModel.OperationContractAttribute> explícitamente.</span><span class="sxs-lookup"><span data-stu-id="17f23-121">The following example shows a service contract (an interface) to which the <xref:System.ServiceModel.ServiceContractAttribute> and <xref:System.ServiceModel.OperationContractAttribute> attributes have been explicitly applied.</span></span> <span data-ttu-id="17f23-122">El ejemplo muestra que los tipos primitivos no requieren un contrato de datos, mientras un tipo complejo sí lo hace.</span><span class="sxs-lookup"><span data-stu-id="17f23-122">The example shows that primitive types do not require a data contract, while a complex type does.</span></span>  
  
 [!code-csharp[C_DataContract#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontract/cs/source.cs#1)]
 [!code-vb[C_DataContract#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontract/vb/source.vb#1)]  
  
 <span data-ttu-id="17f23-123">El ejemplo siguiente muestra cómo se crea un contrato de datos para el tipo `MyTypes.PurchaseOrder` aplicando los atributos <xref:System.Runtime.Serialization.DataContractAttribute> y <xref:System.Runtime.Serialization.DataMemberAttribute> a la clase y sus miembros.</span><span class="sxs-lookup"><span data-stu-id="17f23-123">The following example shows how a data contract for the `MyTypes.PurchaseOrder` type is created by applying the <xref:System.Runtime.Serialization.DataContractAttribute> and <xref:System.Runtime.Serialization.DataMemberAttribute> attributes to the class and its members.</span></span>  
  
 [!code-csharp[C_DataContract#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontract/cs/source.cs#2)]
 [!code-vb[C_DataContract#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontract/vb/source.vb#2)]  
  
### <a name="notes"></a><span data-ttu-id="17f23-124">Notas</span><span class="sxs-lookup"><span data-stu-id="17f23-124">Notes</span></span>  
 <span data-ttu-id="17f23-125">Las notas siguientes proporcionan los elementos a considerar al crear los contratos de datos:</span><span class="sxs-lookup"><span data-stu-id="17f23-125">The following notes provide items to consider when creating data contracts:</span></span>  
  
- <span data-ttu-id="17f23-126">El atributo <xref:System.Runtime.Serialization.IgnoreDataMemberAttribute> se observa solo cuando se usa con tipos no marcados.</span><span class="sxs-lookup"><span data-stu-id="17f23-126">The <xref:System.Runtime.Serialization.IgnoreDataMemberAttribute> attribute is only honored when used with unmarked types.</span></span> <span data-ttu-id="17f23-127">Se incluyen los tipos que no están marcados con uno de los atributos <xref:System.Runtime.Serialization.DataContractAttribute>, <xref:System.SerializableAttribute>, <xref:System.Runtime.Serialization.CollectionDataContractAttribute>o <xref:System.Runtime.Serialization.EnumMemberAttribute> , o que están marcados como serializables de alguna otra forma (como <xref:System.Xml.Serialization.IXmlSerializable>).</span><span class="sxs-lookup"><span data-stu-id="17f23-127">This includes types that are not marked with one of the <xref:System.Runtime.Serialization.DataContractAttribute>, <xref:System.SerializableAttribute>, <xref:System.Runtime.Serialization.CollectionDataContractAttribute>, or <xref:System.Runtime.Serialization.EnumMemberAttribute> attributes, or marked as serializable by any other means (such as <xref:System.Xml.Serialization.IXmlSerializable>).</span></span>  
  
- <span data-ttu-id="17f23-128">Puede aplicar el atributo <xref:System.Runtime.Serialization.DataMemberAttribute> a campos y propiedades.</span><span class="sxs-lookup"><span data-stu-id="17f23-128">You can apply the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute to fields, and properties.</span></span>  
  
- <span data-ttu-id="17f23-129">Los niveles (interno, privado, protegido o público) de accesibilidad de miembros no afectan de forma alguna al contrato de datos.</span><span class="sxs-lookup"><span data-stu-id="17f23-129">Member accessibility levels (internal, private, protected, or public) do not affect the data contract in any way.</span></span>  
  
- <span data-ttu-id="17f23-130">Se omite el atributo <xref:System.Runtime.Serialization.DataMemberAttribute> si se aplica a los miembros estáticos.</span><span class="sxs-lookup"><span data-stu-id="17f23-130">The <xref:System.Runtime.Serialization.DataMemberAttribute> attribute is ignored if it is applied to static members.</span></span>  
  
- <span data-ttu-id="17f23-131">Durante la serialización, se llama al código de obtención de propiedades para que los miembros de datos de propiedad obtengan el valor de las propiedades a serializar.</span><span class="sxs-lookup"><span data-stu-id="17f23-131">During serialization, property-get code is called for property data members to get the value of the properties to be serialized.</span></span>  
  
- <span data-ttu-id="17f23-132">Durante la deserialización, primero se crea un objeto no inicializado, sin llamar a ningún constructor en el tipo.</span><span class="sxs-lookup"><span data-stu-id="17f23-132">During deserialization, an uninitialized object is first created, without calling any constructors on the type.</span></span> <span data-ttu-id="17f23-133">A continuación, se deserializan todos los miembros de datos.</span><span class="sxs-lookup"><span data-stu-id="17f23-133">Then all data members are deserialized.</span></span>  
  
- <span data-ttu-id="17f23-134">Durante la serialización, se llama al código de conjunto de propiedades para que los miembros de datos de propiedad establezcan el valor de las propiedades que se están deserializando.</span><span class="sxs-lookup"><span data-stu-id="17f23-134">During deserialization, property-set code is called for property data members to set the properties to the value being deserialized.</span></span>  
  
- <span data-ttu-id="17f23-135">Para que un contrato de datos sea válido, debe ser posible serializar todos sus miembros de datos.</span><span class="sxs-lookup"><span data-stu-id="17f23-135">For a data contract to be valid, it must be possible to serialize all of its data members.</span></span> <span data-ttu-id="17f23-136">Para obtener una lista completa de los tipos serializables, consulte [Types Supported by the Data Contract Serializer](../../../../docs/framework/wcf/feature-details/types-supported-by-the-data-contract-serializer.md).</span><span class="sxs-lookup"><span data-stu-id="17f23-136">For a full list of serializable types, see [Types Supported by the Data Contract Serializer](../../../../docs/framework/wcf/feature-details/types-supported-by-the-data-contract-serializer.md).</span></span>  
  
     <span data-ttu-id="17f23-137">Los tipos genéricos se administran exactamente de la misma manera como los tipos no genéricos.</span><span class="sxs-lookup"><span data-stu-id="17f23-137">Generic types are handled in exactly the same way as non-generic types.</span></span> <span data-ttu-id="17f23-138">No hay ningún requisito especial para los parámetros genéricos.</span><span class="sxs-lookup"><span data-stu-id="17f23-138">There are no special requirements for generic parameters.</span></span> <span data-ttu-id="17f23-139">Por ejemplo, veamos el siguiente tipo.</span><span class="sxs-lookup"><span data-stu-id="17f23-139">For example, consider the following type.</span></span>  
  
 [!code-csharp[C_DataContract#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontract/cs/source.cs#3)]
 [!code-vb[C_DataContract#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontract/vb/source.vb#3)]  
  
 <span data-ttu-id="17f23-140">Este tipo es serializable tanto si el tipo que se usa para el parámetro de tipo genérico (`T`) es serializable como si no lo es.</span><span class="sxs-lookup"><span data-stu-id="17f23-140">This type is serializable whether the type used for the generic type parameter (`T`) is serializable or not.</span></span> <span data-ttu-id="17f23-141">Dado que debe ser posible serializar todos los miembros de datos, el tipo siguiente solo es serializable solo si el parámetro de tipo genérico también es serializable, como se muestra en el código siguiente.</span><span class="sxs-lookup"><span data-stu-id="17f23-141">Because it must be possible to serialize all data members, the following type is serializable only if the generic type parameter is also serializable, as shown in the following code.</span></span>  
  
 [!code-csharp[C_DataContract#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontract/cs/source.cs#4)]
 [!code-vb[C_DataContract#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontract/vb/source.vb#4)]  
  
 <span data-ttu-id="17f23-142">Para obtener un ejemplo de código completo de un servicio WCF que define un contrato de datos, consulte el ejemplo de [Basic Data Contract](../../../../docs/framework/wcf/samples/basic-data-contract.md) .</span><span class="sxs-lookup"><span data-stu-id="17f23-142">For a complete code sample of a WCF service that defines a data contract see the [Basic Data Contract](../../../../docs/framework/wcf/samples/basic-data-contract.md) sample.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="17f23-143">Vea también</span><span class="sxs-lookup"><span data-stu-id="17f23-143">See also</span></span>

- <xref:System.Runtime.Serialization.DataMemberAttribute>
- <xref:System.Runtime.Serialization.DataContractAttribute>
- [<span data-ttu-id="17f23-144">Tipos serializables</span><span class="sxs-lookup"><span data-stu-id="17f23-144">Serializable Types</span></span>](../../../../docs/framework/wcf/feature-details/serializable-types.md)
- [<span data-ttu-id="17f23-145">Nombres de contratos de datos</span><span class="sxs-lookup"><span data-stu-id="17f23-145">Data Contract Names</span></span>](../../../../docs/framework/wcf/feature-details/data-contract-names.md)
- [<span data-ttu-id="17f23-146">Equivalencia de contratos de datos</span><span class="sxs-lookup"><span data-stu-id="17f23-146">Data Contract Equivalence</span></span>](../../../../docs/framework/wcf/feature-details/data-contract-equivalence.md)
- [<span data-ttu-id="17f23-147">Orden de los miembros de datos</span><span class="sxs-lookup"><span data-stu-id="17f23-147">Data Member Order</span></span>](../../../../docs/framework/wcf/feature-details/data-member-order.md)
- [<span data-ttu-id="17f23-148">Tipos conocidos de contratos de datos</span><span class="sxs-lookup"><span data-stu-id="17f23-148">Data Contract Known Types</span></span>](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md)
- [<span data-ttu-id="17f23-149">Contratos de datos compatibles con el reenvío</span><span class="sxs-lookup"><span data-stu-id="17f23-149">Forward-Compatible Data Contracts</span></span>](../../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md)
- [<span data-ttu-id="17f23-150">Versiones de contratos de datos</span><span class="sxs-lookup"><span data-stu-id="17f23-150">Data Contract Versioning</span></span>](../../../../docs/framework/wcf/feature-details/data-contract-versioning.md)
- [<span data-ttu-id="17f23-151">Devoluciones de llamadas en la serialización tolerante a versiones</span><span class="sxs-lookup"><span data-stu-id="17f23-151">Version-Tolerant Serialization Callbacks</span></span>](../../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md)
- [<span data-ttu-id="17f23-152">Valores predeterminados de los miembros de datos</span><span class="sxs-lookup"><span data-stu-id="17f23-152">Data Member Default Values</span></span>](../../../../docs/framework/wcf/feature-details/data-member-default-values.md)
- [<span data-ttu-id="17f23-153">Tipos admitidos por el serializador de contratos de datos</span><span class="sxs-lookup"><span data-stu-id="17f23-153">Types Supported by the Data Contract Serializer</span></span>](../../../../docs/framework/wcf/feature-details/types-supported-by-the-data-contract-serializer.md)
- [<span data-ttu-id="17f23-154">Cómo: Crear un contrato de datos básicos para una clase o estructura</span><span class="sxs-lookup"><span data-stu-id="17f23-154">How to: Create a Basic Data Contract for a Class or Structure</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-basic-data-contract-for-a-class-or-structure.md)

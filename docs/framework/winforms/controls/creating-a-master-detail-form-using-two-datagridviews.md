---
title: 'Tutorial: Creación de un formulario principal-detalle mediante dos controles DataGridView de formularios Windows Forms'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- DataGridView control [Windows Forms], master/detail form
- parent-child tables [Windows Forms], displaying on Windows Forms
- master-details lists [Windows Forms], displaying on Windows Forms
- walkthroughs [Windows Forms], DataGridView control
ms.assetid: c5fa29e8-47f7-4691-829b-0e697a691f36
ms.openlocfilehash: a887dacfcb83b4b6ea4cb2690ab09b0d1b20b4fa
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 04/23/2019
ms.locfileid: "61772897"
---
# <a name="walkthrough-creating-a-masterdetail-form-using-two-windows-forms-datagridview-controls"></a><span data-ttu-id="f16e0-102">Tutorial: Crear un formulario maestro y detalle mediante dos controles DataGridView de formularios Windows Forms</span><span class="sxs-lookup"><span data-stu-id="f16e0-102">Walkthrough: Creating a Master/Detail Form Using Two Windows Forms DataGridView Controls</span></span>
<span data-ttu-id="f16e0-103">Uno de los escenarios más comunes para usar el <xref:System.Windows.Forms.DataGridView> control es el *principal-detalle* formulario, en el que se muestra una relación primaria-secundaria entre dos tablas de base de datos.</span><span class="sxs-lookup"><span data-stu-id="f16e0-103">One of the most common scenarios for using the <xref:System.Windows.Forms.DataGridView> control is the *master/detail* form, in which a parent/child relationship between two database tables is displayed.</span></span> <span data-ttu-id="f16e0-104">Selección de filas en la tabla maestra hace que la tabla de detalles actualizar con los datos secundarios correspondientes.</span><span class="sxs-lookup"><span data-stu-id="f16e0-104">Selecting rows in the master table causes the detail table to update with the corresponding child data.</span></span>  
  
 <span data-ttu-id="f16e0-105">Implementar un formulario principal-detalle es fácil con la interacción entre el <xref:System.Windows.Forms.DataGridView> control y el <xref:System.Windows.Forms.BindingSource> componente.</span><span class="sxs-lookup"><span data-stu-id="f16e0-105">Implementing a master/detail form is easy using the interaction between the <xref:System.Windows.Forms.DataGridView> control and the <xref:System.Windows.Forms.BindingSource> component.</span></span> <span data-ttu-id="f16e0-106">En este tutorial, compilará el formulario mediante dos <xref:System.Windows.Forms.DataGridView> controles y dos <xref:System.Windows.Forms.BindingSource> componentes.</span><span class="sxs-lookup"><span data-stu-id="f16e0-106">In this walkthrough, you will build the form using two <xref:System.Windows.Forms.DataGridView> controls and two <xref:System.Windows.Forms.BindingSource> components.</span></span> <span data-ttu-id="f16e0-107">El formulario mostrará dos tablas relacionadas en la base de datos de ejemplo Northwind de SQL Server: `Customers` y `Orders`.</span><span class="sxs-lookup"><span data-stu-id="f16e0-107">The form will show two related tables in the Northwind SQL Server sample database: `Customers` and `Orders`.</span></span> <span data-ttu-id="f16e0-108">Cuando haya terminado, tendrá un formulario que muestra todos los clientes de la base de datos en el servidor maestro <xref:System.Windows.Forms.DataGridView> y todos los pedidos del cliente seleccionado en el detalle <xref:System.Windows.Forms.DataGridView>.</span><span class="sxs-lookup"><span data-stu-id="f16e0-108">When you are finished, you will have a form that shows all the customers in the database in the master <xref:System.Windows.Forms.DataGridView> and all the orders for the selected customer in the detail <xref:System.Windows.Forms.DataGridView>.</span></span>  
  
 <span data-ttu-id="f16e0-109">Para copiar el código de este tema como una sola lista, vea [Cómo: Crear un formulario principal-detalle mediante dos controles DataGridView de formularios Windows Forms](create-a-master-detail-form-using-two-datagridviews.md).</span><span class="sxs-lookup"><span data-stu-id="f16e0-109">To copy the code in this topic as a single listing, see [How to: Create a Master/Detail Form Using Two Windows Forms DataGridView Controls](create-a-master-detail-form-using-two-datagridviews.md).</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="f16e0-110">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="f16e0-110">Prerequisites</span></span>  
 <span data-ttu-id="f16e0-111">Para poder completar este tutorial, necesitará:</span><span class="sxs-lookup"><span data-stu-id="f16e0-111">In order to complete this walkthrough, you will need:</span></span>  
  
- <span data-ttu-id="f16e0-112">Acceso a un servidor que tenga la base de datos de ejemplo Northwind de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f16e0-112">Access to a server that has the Northwind SQL Server sample database.</span></span>  
  
## <a name="creating-the-form"></a><span data-ttu-id="f16e0-113">Crear el formulario</span><span class="sxs-lookup"><span data-stu-id="f16e0-113">Creating the form</span></span>  
  
#### <a name="to-create-a-masterdetail-form"></a><span data-ttu-id="f16e0-114">Para crear un formulario principal-detalle</span><span class="sxs-lookup"><span data-stu-id="f16e0-114">To create a master/detail form</span></span>  
  
1. <span data-ttu-id="f16e0-115">Cree una clase que deriva de <xref:System.Windows.Forms.Form> y contiene dos <xref:System.Windows.Forms.DataGridView> controles y dos <xref:System.Windows.Forms.BindingSource> componentes.</span><span class="sxs-lookup"><span data-stu-id="f16e0-115">Create a class that derives from <xref:System.Windows.Forms.Form> and contains two <xref:System.Windows.Forms.DataGridView> controls and two <xref:System.Windows.Forms.BindingSource> components.</span></span> <span data-ttu-id="f16e0-116">El código siguiente proporciona la inicialización de un formulario básico e incluye un `Main` método.</span><span class="sxs-lookup"><span data-stu-id="f16e0-116">The following code provides basic form initialization and includes a `Main` method.</span></span> <span data-ttu-id="f16e0-117">Si usa el Diseñador de Visual Studio para crear el formulario, puede usar el código generado del diseñador en lugar de este código, pero asegúrese de usar los nombres que aparecen en las declaraciones de variable.</span><span class="sxs-lookup"><span data-stu-id="f16e0-117">If you use the Visual Studio designer to create your form, you can use the designer generated code instead of this code, but be sure to use the names shown in the variable declarations here.</span></span>  
  
     [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#01](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#01)]
     [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#01](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#01)]  
    [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#02](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#02)]
    [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#02](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#02)]  
  
2. <span data-ttu-id="f16e0-118">Implemente un método en la definición de clase del formulario para controlar los detalles de la conexión a la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f16e0-118">Implement a method in your form's class definition for handling the detail of connecting to the database.</span></span> <span data-ttu-id="f16e0-119">Este ejemplo se usa un `GetData` método que rellena un <xref:System.Data.DataSet> de objetos, se agrega un <xref:System.Data.DataRelation> objeto para el conjunto de datos y se enlaza el <xref:System.Windows.Forms.BindingSource> componentes.</span><span class="sxs-lookup"><span data-stu-id="f16e0-119">This example uses a `GetData` method that populates a <xref:System.Data.DataSet> object, adds a <xref:System.Data.DataRelation> object to the data set, and binds the <xref:System.Windows.Forms.BindingSource> components.</span></span> <span data-ttu-id="f16e0-120">Asegúrese de establecer la variable `connectionString` en un valor que sea adecuado para la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f16e0-120">Be sure to set the `connectionString` variable to a value that is appropriate for your database.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="f16e0-121">Almacenar información confidencial, como una contraseña, en la cadena de conexión puede afectar a la seguridad de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f16e0-121">Storing sensitive information, such as a password, within the connection string can affect the security of your application.</span></span> <span data-ttu-id="f16e0-122">El uso de la autenticación de Windows (también conocida como seguridad integrada) es un modo más seguro de controlar el acceso a una base de datos.</span><span class="sxs-lookup"><span data-stu-id="f16e0-122">Using Windows Authentication (also known as integrated security) is a more secure way to control access to a database.</span></span> <span data-ttu-id="f16e0-123">Para más información, consulte [Proteger la información de conexión](../../data/adonet/protecting-connection-information.md).</span><span class="sxs-lookup"><span data-stu-id="f16e0-123">For more information, see [Protecting Connection Information](../../data/adonet/protecting-connection-information.md).</span></span>  
  
     [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#20](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#20)]
     [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#20](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#20)]  
  
3. <span data-ttu-id="f16e0-124">Implementar un controlador para el formulario <xref:System.Windows.Forms.Form.Load> eventos que enlaza la <xref:System.Windows.Forms.DataGridView> controles a la <xref:System.Windows.Forms.BindingSource> componentes y llama a la `GetData` método.</span><span class="sxs-lookup"><span data-stu-id="f16e0-124">Implement a handler for your form's <xref:System.Windows.Forms.Form.Load> event that binds the <xref:System.Windows.Forms.DataGridView> controls to the <xref:System.Windows.Forms.BindingSource> components and calls the `GetData` method.</span></span> <span data-ttu-id="f16e0-125">En el ejemplo siguiente se incluye código que cambia el tamaño de <xref:System.Windows.Forms.DataGridView> columnas para que quepan los datos mostrados.</span><span class="sxs-lookup"><span data-stu-id="f16e0-125">The following example includes code that resizes <xref:System.Windows.Forms.DataGridView> columns to fit the displayed data.</span></span>  
  
     [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#10](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#10)]
     [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#10](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#10)]  
  
## <a name="testing-the-application"></a><span data-ttu-id="f16e0-126">Probar la aplicación</span><span class="sxs-lookup"><span data-stu-id="f16e0-126">Testing the Application</span></span>  
 <span data-ttu-id="f16e0-127">Puede comprobar el formulario para asegurarse de que se comporta de la forma prevista.</span><span class="sxs-lookup"><span data-stu-id="f16e0-127">You can now test the form to make sure it behaves as expected.</span></span>  
  
#### <a name="to-test-the-form"></a><span data-ttu-id="f16e0-128">Para comprobar el formulario</span><span class="sxs-lookup"><span data-stu-id="f16e0-128">To test the form</span></span>  
  
- <span data-ttu-id="f16e0-129">Compile y ejecute la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f16e0-129">Compile and run the application.</span></span>  
  
     <span data-ttu-id="f16e0-130">Verá dos <xref:System.Windows.Forms.DataGridView> controla uno encima del otro.</span><span class="sxs-lookup"><span data-stu-id="f16e0-130">You will see two <xref:System.Windows.Forms.DataGridView> controls, one above the other.</span></span> <span data-ttu-id="f16e0-131">En la parte superior son los clientes de Northwind `Customers` de tabla y, en la parte inferior está la `Orders` correspondiente al cliente seleccionado.</span><span class="sxs-lookup"><span data-stu-id="f16e0-131">On top are the customers from the Northwind `Customers` table, and at the bottom are the `Orders` corresponding to the selected customer.</span></span> <span data-ttu-id="f16e0-132">Seleccionar filas diferentes en la esquina superior <xref:System.Windows.Forms.DataGridView>, el contenido de la parte inferior <xref:System.Windows.Forms.DataGridView> cambia en consecuencia.</span><span class="sxs-lookup"><span data-stu-id="f16e0-132">As you select different rows in the upper <xref:System.Windows.Forms.DataGridView>, the contents of the lower <xref:System.Windows.Forms.DataGridView> change accordingly.</span></span>  
  
## <a name="next-steps"></a><span data-ttu-id="f16e0-133">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="f16e0-133">Next Steps</span></span>  
 <span data-ttu-id="f16e0-134">Esta aplicación le ofrece un conocimiento básico de la <xref:System.Windows.Forms.DataGridView> capacidades del control.</span><span class="sxs-lookup"><span data-stu-id="f16e0-134">This application gives you a basic understanding of the <xref:System.Windows.Forms.DataGridView> control's capabilities.</span></span> <span data-ttu-id="f16e0-135">Puede personalizar la apariencia y comportamiento de la <xref:System.Windows.Forms.DataGridView> control de varias maneras:</span><span class="sxs-lookup"><span data-stu-id="f16e0-135">You can customize the appearance and behavior of the <xref:System.Windows.Forms.DataGridView> control in several ways:</span></span>  
  
- <span data-ttu-id="f16e0-136">Cambiar los estilos de borde y encabezado.</span><span class="sxs-lookup"><span data-stu-id="f16e0-136">Change border and header styles.</span></span> <span data-ttu-id="f16e0-137">Para obtener más información, vea [Cómo: Cambiar el borde y los estilos de línea de cuadrícula en la Windows Forms DataGridView Control](change-the-border-and-gridline-styles-in-the-datagrid.md).</span><span class="sxs-lookup"><span data-stu-id="f16e0-137">For more information, see [How to: Change the Border and Gridline Styles in the Windows Forms DataGridView Control](change-the-border-and-gridline-styles-in-the-datagrid.md).</span></span>  
  
- <span data-ttu-id="f16e0-138">Habilitar o restringir la entrada del usuario a la <xref:System.Windows.Forms.DataGridView> control.</span><span class="sxs-lookup"><span data-stu-id="f16e0-138">Enable or restrict user input to the <xref:System.Windows.Forms.DataGridView> control.</span></span> <span data-ttu-id="f16e0-139">Para obtener más información, vea [Cómo: Impedir la adición de la fila y la eliminación en la Windows Forms DataGridView Control](prevent-row-addition-and-deletion-datagridview.md), y [Cómo: Crear columnas de sólo lectura en la Windows Forms DataGridView Control](how-to-make-columns-read-only-in-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="f16e0-139">For more information, see [How to: Prevent Row Addition and Deletion in the Windows Forms DataGridView Control](prevent-row-addition-and-deletion-datagridview.md), and [How to: Make Columns Read-Only in the Windows Forms DataGridView Control](how-to-make-columns-read-only-in-the-windows-forms-datagridview-control.md).</span></span>  
  
- <span data-ttu-id="f16e0-140">Validar la entrada del usuario a la <xref:System.Windows.Forms.DataGridView> control.</span><span class="sxs-lookup"><span data-stu-id="f16e0-140">Validate user input to the <xref:System.Windows.Forms.DataGridView> control.</span></span> <span data-ttu-id="f16e0-141">Para obtener más información, vea [Tutorial: Validar datos en el Windows Forms DataGridView Control](walkthrough-validating-data-in-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="f16e0-141">For more information, see [Walkthrough: Validating Data in the Windows Forms DataGridView Control](walkthrough-validating-data-in-the-windows-forms-datagridview-control.md).</span></span>  
  
- <span data-ttu-id="f16e0-142">Controlar grandes conjuntos de datos utilizando el modo virtual.</span><span class="sxs-lookup"><span data-stu-id="f16e0-142">Handle very large data sets using virtual mode.</span></span> <span data-ttu-id="f16e0-143">Para obtener más información, vea [Tutorial: Implementar el modo Virtual en el Windows Forms DataGridView Control](implementing-virtual-mode-wf-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="f16e0-143">For more information, see [Walkthrough: Implementing Virtual Mode in the Windows Forms DataGridView Control](implementing-virtual-mode-wf-datagridview-control.md).</span></span>  
  
- <span data-ttu-id="f16e0-144">Personalizar la apariencia de celdas.</span><span class="sxs-lookup"><span data-stu-id="f16e0-144">Customize the appearance of cells.</span></span> <span data-ttu-id="f16e0-145">Para obtener más información, vea [Cómo: Personalizar la apariencia de celdas en el Control DataGridView de formularios de Windows](customize-the-appearance-of-cells-in-the-datagrid.md) y [Cómo: Establecer estilos de celda predeterminados para los Windows Forms DataGridView Control](how-to-set-default-cell-styles-for-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="f16e0-145">For more information, see [How to: Customize the Appearance of Cells in the Windows Forms DataGridView Control](customize-the-appearance-of-cells-in-the-datagrid.md) and [How to: Set Default Cell Styles for the Windows Forms DataGridView Control](how-to-set-default-cell-styles-for-the-windows-forms-datagridview-control.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f16e0-146">Vea también</span><span class="sxs-lookup"><span data-stu-id="f16e0-146">See also</span></span>

- <xref:System.Windows.Forms.DataGridView>
- <xref:System.Windows.Forms.BindingSource>
- [<span data-ttu-id="f16e0-147">Mostrar datos en el control DataGridView de Windows Forms</span><span class="sxs-lookup"><span data-stu-id="f16e0-147">Displaying Data in the Windows Forms DataGridView Control</span></span>](displaying-data-in-the-windows-forms-datagridview-control.md)
- [<span data-ttu-id="f16e0-148">Cómo: Crear un formulario principal-detalle mediante dos controles DataGridView de formularios Windows Forms</span><span class="sxs-lookup"><span data-stu-id="f16e0-148">How to: Create a Master/Detail Form Using Two Windows Forms DataGridView Controls</span></span>](create-a-master-detail-form-using-two-datagridviews.md)
- [<span data-ttu-id="f16e0-149">Proteger la información de conexión</span><span class="sxs-lookup"><span data-stu-id="f16e0-149">Protecting Connection Information</span></span>](../../data/adonet/protecting-connection-information.md)

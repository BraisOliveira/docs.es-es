---
title: Inicialización de elementos de objeto no incluidos en un árbol de objetos
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- logical tree [WPF]
- visual tree [WPF]
- elements [WPF], initializing
- initializing elements [WPF]
ms.assetid: 7b8dfc9b-46ac-4ce8-b7bb-035734d688b7
ms.openlocfilehash: 6f3c8611b83977431038573eb1c5c880acbefdc4
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/08/2019
ms.locfileid: "59108971"
---
# <a name="initialization-for-object-elements-not-in-an-object-tree"></a><span data-ttu-id="35a09-102">Inicialización de elementos de objeto no incluidos en un árbol de objetos</span><span class="sxs-lookup"><span data-stu-id="35a09-102">Initialization for Object Elements Not in an Object Tree</span></span>
<span data-ttu-id="35a09-103">Algunos aspectos de inicialización de [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] se fraccionan en procesos que suelen depender de la conexión del elemento con el árbol lógico o visual.</span><span class="sxs-lookup"><span data-stu-id="35a09-103">Some aspects of [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] initialization are deferred to processes that typically rely on that element being connected to either the logical tree or visual tree.</span></span> <span data-ttu-id="35a09-104">En este tema se describen los pasos que pueden ser necesarios para inicializar un elemento que no esté conectado a ninguno de estos árboles.</span><span class="sxs-lookup"><span data-stu-id="35a09-104">This topic describes the steps that may be necessary in order to initialize an element that is not connected to either tree.</span></span>  

## <a name="elements-and-the-logical-tree"></a><span data-ttu-id="35a09-105">Elementos y el árbol lógico</span><span class="sxs-lookup"><span data-stu-id="35a09-105">Elements and the Logical Tree</span></span>  
 <span data-ttu-id="35a09-106">Cuando se crea una instancia de una clase de [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] en el código, se debe tener en cuenta que varios aspectos de la inicialización de objetos para una clase de [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] se excluyen deliberadamente del código que se ejecuta al llamar al constructor de la clase.</span><span class="sxs-lookup"><span data-stu-id="35a09-106">When you create an instance of a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] class in code, you should be aware that several aspects of object initialization for a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] class are deliberately not a part of the code that is executed when calling the class constructor.</span></span> <span data-ttu-id="35a09-107">En concreto, en el caso de las clases de control, el constructor no define la mayor parte de la representación visual del control,</span><span class="sxs-lookup"><span data-stu-id="35a09-107">Particularly for a control class, most of the visual representation of that control is not defined by the constructor.</span></span> <span data-ttu-id="35a09-108">sino que es la plantilla del control la que define la representación visual.</span><span class="sxs-lookup"><span data-stu-id="35a09-108">Instead, the visual representation is defined by the control's template.</span></span> <span data-ttu-id="35a09-109">La plantilla puede proceder de diversos orígenes, pero, en la mayoría de casos, se obtiene a partir de estilos de tema.</span><span class="sxs-lookup"><span data-stu-id="35a09-109">The template potentially comes from a variety of sources, but most often the template is obtained from theme styles.</span></span> <span data-ttu-id="35a09-110">Las plantillas funcionan como enlace en tiempo de ejecución efectivo: la plantilla necesaria no se adjunta al control en cuestión hasta que este está listo para el diseño.</span><span class="sxs-lookup"><span data-stu-id="35a09-110">Templates are effectively late-binding; the necessary template is not attached to the control in question until the control is ready for layout.</span></span> <span data-ttu-id="35a09-111">Y el control no está listo para el diseño hasta que se adjunta a un árbol lógico que se conecta a una superficie de representación en la raíz.</span><span class="sxs-lookup"><span data-stu-id="35a09-111">And the control is not ready for layout until it is attached to a logical tree that connects to a rendering surface at the root.</span></span> <span data-ttu-id="35a09-112">Este elemento de nivel de raíz inicia la representación de todos sus elementos secundarios, como se define en el árbol lógico.</span><span class="sxs-lookup"><span data-stu-id="35a09-112">It is that root-level element that initiates the rendering of all of its child elements as defined in the logical tree.</span></span>  
  
 <span data-ttu-id="35a09-113">El árbol visual también participa en este proceso.</span><span class="sxs-lookup"><span data-stu-id="35a09-113">The visual tree also participates in this process.</span></span> <span data-ttu-id="35a09-114">Tampoco se crean todas las instancias de los elementos que forman parte del árbol visual a través de las plantillas hasta que se conectan.</span><span class="sxs-lookup"><span data-stu-id="35a09-114">Elements that are part of the visual tree through the templates are also not fully instantiated until connected.</span></span>  
  
 <span data-ttu-id="35a09-115">Las consecuencias de este comportamiento son que ciertas operaciones que dependen de las características visuales completadas de un elemento requieren pasos adicionales.</span><span class="sxs-lookup"><span data-stu-id="35a09-115">The consequences of this behavior are that certain operations that rely on the completed visual characteristics of an element require additional steps.</span></span> <span data-ttu-id="35a09-116">Un ejemplo sería intentar obtener las características visuales de una clase que se construyó, pero todavía no se ha adjuntado a un árbol.</span><span class="sxs-lookup"><span data-stu-id="35a09-116">An example is if you are attempting to get the visual characteristics of a class that was constructed but not yet attached to a tree.</span></span> <span data-ttu-id="35a09-117">Por ejemplo, si desea llamar a <xref:System.Windows.Media.Imaging.RenderTargetBitmap.Render%2A> en un <xref:System.Windows.Media.Imaging.RenderTargetBitmap> y el objeto visual que se pasa es un elemento no conectado a un árbol, ese elemento no estará completo visualmente hasta que se completen las operaciones de inicialización adicionales.</span><span class="sxs-lookup"><span data-stu-id="35a09-117">For instance, if you want to call <xref:System.Windows.Media.Imaging.RenderTargetBitmap.Render%2A> on a <xref:System.Windows.Media.Imaging.RenderTargetBitmap> and the visual you are passing is an element not connected to a tree, that element is not visually complete until additional initialization steps are completed.</span></span>  
  
### <a name="using-begininit-and-endinit-to-initialize-the-element"></a><span data-ttu-id="35a09-118">Uso de BeginInit y EndInit para inicializar el elemento</span><span class="sxs-lookup"><span data-stu-id="35a09-118">Using BeginInit and EndInit to Initialize the Element</span></span>  
 <span data-ttu-id="35a09-119">Varias clases en [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implementar el <xref:System.ComponentModel.ISupportInitialize> interfaz.</span><span class="sxs-lookup"><span data-stu-id="35a09-119">Various classes in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implement the <xref:System.ComponentModel.ISupportInitialize> interface.</span></span> <span data-ttu-id="35a09-120">Usa el <xref:System.ComponentModel.ISupportInitialize.BeginInit%2A> y <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> métodos de la interfaz para denotar una región en el código que contiene los pasos de inicialización (como valores de propiedad de configuración que afectan a la representación).</span><span class="sxs-lookup"><span data-stu-id="35a09-120">You use the <xref:System.ComponentModel.ISupportInitialize.BeginInit%2A> and <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> methods of the interface to denote a region in your code that contains initialization steps (such as setting property values that affect rendering).</span></span> <span data-ttu-id="35a09-121">Después de <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> se llama en la secuencia, el sistema de diseño puede procesar el elemento y empezar a buscar un estilo implícito.</span><span class="sxs-lookup"><span data-stu-id="35a09-121">After <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> is called in the sequence, the layout system can process the element and start looking for an implicit style.</span></span>  
  
 <span data-ttu-id="35a09-122">Si el elemento está definiendo propiedades es un <xref:System.Windows.FrameworkElement> o <xref:System.Windows.FrameworkContentElement> clase derivada, puede llamar a las versiones de la clase de <xref:System.Windows.FrameworkElement.BeginInit%2A> y <xref:System.Windows.FrameworkElement.EndInit%2A> en lugar de la conversión a <xref:System.ComponentModel.ISupportInitialize>.</span><span class="sxs-lookup"><span data-stu-id="35a09-122">If the element you are setting properties on is a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement> derived class, then you can call the class versions of <xref:System.Windows.FrameworkElement.BeginInit%2A> and <xref:System.Windows.FrameworkElement.EndInit%2A> rather than casting to <xref:System.ComponentModel.ISupportInitialize>.</span></span>  
  
### <a name="sample-code"></a><span data-ttu-id="35a09-123">Código de ejemplo</span><span class="sxs-lookup"><span data-stu-id="35a09-123">Sample Code</span></span>  
 <span data-ttu-id="35a09-124">El ejemplo siguiente es el código de ejemplo para una aplicación de consola que usa la representación [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] y <xref:System.Windows.Markup.XamlReader.Load%28System.IO.Stream%29?displayProperty=nameWithType> de un [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] archivos para ilustrar la posición correcta de <xref:System.Windows.FrameworkElement.BeginInit%2A> y <xref:System.Windows.FrameworkElement.EndInit%2A> alrededor otro [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] llamadas que ajustar las propiedades que afectan a la representación.</span><span class="sxs-lookup"><span data-stu-id="35a09-124">The following example is sample code for a console application that uses rendering [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] and <xref:System.Windows.Markup.XamlReader.Load%28System.IO.Stream%29?displayProperty=nameWithType> of a loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file to illustrate the proper placement of <xref:System.Windows.FrameworkElement.BeginInit%2A> and <xref:System.Windows.FrameworkElement.EndInit%2A> around other [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] calls that adjust properties that affect rendering.</span></span>  
  
 <span data-ttu-id="35a09-125">El ejemplo solo ilustra la función principal.</span><span class="sxs-lookup"><span data-stu-id="35a09-125">The example illustrates the main function only.</span></span> <span data-ttu-id="35a09-126">Las funciones `Rasterize` y `Save` (que no se muestran) son funciones de utilidad que se encargan del procesamiento de imágenes y la E/S.</span><span class="sxs-lookup"><span data-stu-id="35a09-126">The functions `Rasterize` and `Save` (not shown) are utility functions that take care of image processing and IO.</span></span>  
  
 [!code-csharp[InitializeElements#Main](~/samples/snippets/csharp/VS_Snippets_Wpf/InitializeElements/CSharp/initializeelements.cs#main)]
 [!code-vb[InitializeElements#Main](~/samples/snippets/visualbasic/VS_Snippets_Wpf/InitializeElements/VisualBasic/initializeelements.vb#main)]  
  
## <a name="see-also"></a><span data-ttu-id="35a09-127">Vea también</span><span class="sxs-lookup"><span data-stu-id="35a09-127">See also</span></span>

- [<span data-ttu-id="35a09-128">Árboles en WPF</span><span class="sxs-lookup"><span data-stu-id="35a09-128">Trees in WPF</span></span>](trees-in-wpf.md)
- [<span data-ttu-id="35a09-129">Información general sobre la representación de gráficos en WPF</span><span class="sxs-lookup"><span data-stu-id="35a09-129">WPF Graphics Rendering Overview</span></span>](../graphics-multimedia/wpf-graphics-rendering-overview.md)
- [<span data-ttu-id="35a09-130">Información general sobre XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="35a09-130">XAML Overview (WPF)</span></span>](xaml-overview-wpf.md)

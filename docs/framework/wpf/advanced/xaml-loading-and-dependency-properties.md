---
title: Carga de XAML y propiedades de dependencia
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- custom dependency properties [WPF]
- dependency properties [WPF], XAML loading and
- loading XML data [WPF]
ms.assetid: 6eea9f4e-45ce-413b-a266-f08238737bf2
ms.openlocfilehash: 57c25297f995acd1ef307466258b5f4e03cc3098
ms.sourcegitcommit: 944ddc52b7f2632f30c668815f92b378efd38eea
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/03/2019
ms.locfileid: "73459535"
---
# <a name="xaml-loading-and-dependency-properties"></a><span data-ttu-id="609a0-102">Carga de XAML y propiedades de dependencia</span><span class="sxs-lookup"><span data-stu-id="609a0-102">XAML Loading and Dependency Properties</span></span>
<span data-ttu-id="609a0-103">Tener en cuenta las propiedades de dependencia es inherente a la implementación actual en [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] del procesador [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="609a0-103">The current [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implementation of its [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor is inherently dependency property aware.</span></span> <span data-ttu-id="609a0-104">El procesador [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] usa métodos del sistema de propiedades para las propiedades de dependencia al cargar el [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] binario y al procesar atributos que son propiedades de dependencia.</span><span class="sxs-lookup"><span data-stu-id="609a0-104">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor uses property system methods for dependency properties when loading binary [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and processing attributes that are dependency properties.</span></span> <span data-ttu-id="609a0-105">En la práctica esto supone la omisión de los contenedores de propiedad.</span><span class="sxs-lookup"><span data-stu-id="609a0-105">This effectively bypasses the property wrappers.</span></span> <span data-ttu-id="609a0-106">Cuando implemente propiedades de dependencia personalizadas, debe tener en cuenta este comportamiento y evitar colocar cualquier otro código en el contenedor de propiedades que no sea los métodos del sistema de propiedades <xref:System.Windows.DependencyObject.GetValue%2A> y <xref:System.Windows.DependencyObject.SetValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="609a0-106">When you implement custom dependency properties, you must account for this behavior and should avoid placing any other code in your property wrapper other than the property system methods <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A>.</span></span>  

<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="609a0-107">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="609a0-107">Prerequisites</span></span>  
 <span data-ttu-id="609a0-108">En este tema se presupone que comprende las propiedades de dependencia como consumidor y como autor, y que ha leído [Información general sobre las propiedades de dependencia](dependency-properties-overview.md) y [Propiedades de dependencia personalizadas](custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="609a0-108">This topic assumes that you understand dependency properties both as consumer and author and have read [Dependency Properties Overview](dependency-properties-overview.md) and [Custom Dependency Properties](custom-dependency-properties.md).</span></span> <span data-ttu-id="609a0-109">También es conveniente haber leído [Información general sobre XAML (WPF)](../../../desktop-wpf/fundamentals/xaml.md) y [Detalles de la sintaxis XAML](xaml-syntax-in-detail.md).</span><span class="sxs-lookup"><span data-stu-id="609a0-109">You should also have read [XAML Overview (WPF)](../../../desktop-wpf/fundamentals/xaml.md) and [XAML Syntax In Detail](xaml-syntax-in-detail.md).</span></span>  
  
<a name="implementation"></a>   
## <a name="the-wpf-xaml-loader-implementation-and-performance"></a><span data-ttu-id="609a0-110">Implementación de cargador de XAML de WPF y rendimiento</span><span class="sxs-lookup"><span data-stu-id="609a0-110">The WPF XAML Loader Implementation, and Performance</span></span>  
 <span data-ttu-id="609a0-111">Por motivos de implementación, es económicamente más económico identificar una propiedad como una propiedad de dependencia y tener acceso al método <xref:System.Windows.DependencyObject.SetValue%2A> del sistema de propiedades para establecerla, en lugar de usar el contenedor de propiedades y su establecedor.</span><span class="sxs-lookup"><span data-stu-id="609a0-111">For implementation reasons, it is computationally less expensive to identify a property as a dependency property and access the property system <xref:System.Windows.DependencyObject.SetValue%2A> method to set it, rather than using the property wrapper and its setter.</span></span> <span data-ttu-id="609a0-112">Esto se debe a que un procesador [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] debe deducir el modelo de objetos completo del código de respaldo basándose únicamente en las relaciones entre los miembros y los tipos que se indican en la estructura del marcado y en diversas cadenas.</span><span class="sxs-lookup"><span data-stu-id="609a0-112">This is because a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor must infer the entire object model of the backing code based only on knowing the type and member relationships that are indicated by the structure of the markup and various strings.</span></span>  
  
 <span data-ttu-id="609a0-113">El tipo se busca a través de una combinación de xmlns y atributos de ensamblado, pero la identificación de los miembros, la determinación de que podría admitir su establecimiento como atributo y la resolución de los tipos que admiten los valores de propiedad; de lo contrario, requeriría una reflexión extensa uso de <xref:System.Reflection.PropertyInfo>.</span><span class="sxs-lookup"><span data-stu-id="609a0-113">The type is looked up through a combination of xmlns and assembly attributes, but identifying the members, determining which could support being set as an attribute, and resolving what types the property values support would otherwise require extensive reflection using <xref:System.Reflection.PropertyInfo>.</span></span> <span data-ttu-id="609a0-114">Dado que las propiedades de dependencia de un tipo determinado son accesibles como una tabla de almacenamiento a través del sistema de propiedades, la implementación de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] de su procesador de [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] utiliza esta tabla e infiere que cualquier propiedad *ABC* determinada puede establecerse de forma más eficaz. llamar a <xref:System.Windows.DependencyObject.SetValue%2A> en el tipo derivado <xref:System.Windows.DependencyObject> derivado mediante el identificador de la propiedad de dependencia *ABCProperty*.</span><span class="sxs-lookup"><span data-stu-id="609a0-114">Because dependency properties on a given type are accessible as a storage table through the property system, the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implementation of its [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor uses this table and infers that any given property *ABC* can be more efficiently set by calling <xref:System.Windows.DependencyObject.SetValue%2A> on the containing <xref:System.Windows.DependencyObject> derived type, using the dependency property identifier *ABCProperty*.</span></span>  
  
<a name="implications"></a>   
## <a name="implications-for-custom-dependency-properties"></a><span data-ttu-id="609a0-115">Implicaciones para las propiedades de dependencia personalizadas</span><span class="sxs-lookup"><span data-stu-id="609a0-115">Implications for Custom Dependency Properties</span></span>  
 <span data-ttu-id="609a0-116">Dado que la implementación actual en [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] del comportamiento del procesador [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] para establecer propiedades omite completamente los contenedores, no se debe incluir ninguna lógica adicional en las definiciones de conjuntos del contenedor para la propiedad de dependencia personalizada.</span><span class="sxs-lookup"><span data-stu-id="609a0-116">Because the current [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implementation of the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor behavior for property setting bypasses the wrappers entirely, you should not put any additional logic into the set definitions of the wrapper for your custom dependency property.</span></span> <span data-ttu-id="609a0-117">Si incluye lógica de este tipo en la definición de conjuntos, dicha lógica no se ejecutará cuando la propiedad se establezca en [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] en lugar de en el código.</span><span class="sxs-lookup"><span data-stu-id="609a0-117">If you put such logic in the set definition, then the logic will not be executed when the property is set in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] rather than in code.</span></span>  
  
 <span data-ttu-id="609a0-118">Del mismo modo, otros aspectos del procesador de [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] que obtienen valores de propiedad del procesamiento de [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] también utilizan <xref:System.Windows.DependencyObject.GetValue%2A> en lugar de usar el contenedor.</span><span class="sxs-lookup"><span data-stu-id="609a0-118">Similarly, other aspects of the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor that obtain property values from [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processing also use <xref:System.Windows.DependencyObject.GetValue%2A> rather than using the wrapper.</span></span> <span data-ttu-id="609a0-119">Por lo tanto, también debe evitar cualquier implementación adicional en la definición de `get` más allá de la llamada <xref:System.Windows.DependencyObject.GetValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="609a0-119">Therefore, you should also avoid any additional implementation in the `get` definition beyond the <xref:System.Windows.DependencyObject.GetValue%2A> call.</span></span>  
  
 <span data-ttu-id="609a0-120">El ejemplo siguiente es una definición de propiedad de dependencia recomendada con contenedores, donde el identificador de propiedad está almacenado como un campo `public` `static` `readonly` y las definiciones de `get` y `set` no contienen ningún código excepto los métodos del sistema de propiedades necesarios que definen la lógica de respaldo de las propiedades de dependencia.</span><span class="sxs-lookup"><span data-stu-id="609a0-120">The following example is a recommended dependency property definition with wrappers, where the property identifier is stored as a `public` `static` `readonly` field, and the `get` and `set` definitions contain no code beyond the necessary property system methods that define the dependency property backing.</span></span>  
  
 [!code-csharp[WPFAquariumSln#AGWithWrapper](~/samples/snippets/csharp/VS_Snippets_Wpf/WPFAquariumSln/CSharp/WPFAquariumObjects/Class1.cs#agwithwrapper)]
 [!code-vb[WPFAquariumSln#AGWithWrapper](~/samples/snippets/visualbasic/VS_Snippets_Wpf/WPFAquariumSln/visualbasic/wpfaquariumobjects/class1.vb#agwithwrapper)]  
  
## <a name="see-also"></a><span data-ttu-id="609a0-121">Vea también</span><span class="sxs-lookup"><span data-stu-id="609a0-121">See also</span></span>

- [<span data-ttu-id="609a0-122">Información general sobre las propiedades de dependencia</span><span class="sxs-lookup"><span data-stu-id="609a0-122">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="609a0-123">Información general sobre XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="609a0-123">XAML Overview (WPF)</span></span>](../../../desktop-wpf/fundamentals/xaml.md)
- [<span data-ttu-id="609a0-124">Metadatos de las propiedades de dependencia</span><span class="sxs-lookup"><span data-stu-id="609a0-124">Dependency Property Metadata</span></span>](dependency-property-metadata.md)
- [<span data-ttu-id="609a0-125">Propiedades de dependencia de tipo de colección</span><span class="sxs-lookup"><span data-stu-id="609a0-125">Collection-Type Dependency Properties</span></span>](collection-type-dependency-properties.md)
- [<span data-ttu-id="609a0-126">Seguridad de las propiedades de dependencia</span><span class="sxs-lookup"><span data-stu-id="609a0-126">Dependency Property Security</span></span>](dependency-property-security.md)
- [<span data-ttu-id="609a0-127">Modelos de constructores seguros para objetos DependencyObject</span><span class="sxs-lookup"><span data-stu-id="609a0-127">Safe Constructor Patterns for DependencyObjects</span></span>](safe-constructor-patterns-for-dependencyobjects.md)

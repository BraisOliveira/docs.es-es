---
title: Metadatos de las propiedades de dependencia
ms.date: 03/30/2017
helpviewer_keywords:
- APIs [WPF], metadata
- dependency properties [WPF], metadata
- metadata [WPF], for dependency properties
- overriding metadata [WPF]
ms.assetid: d01ed009-b722-41bf-b82f-fe1a8cdc50dd
ms.openlocfilehash: 7a9f4c2c8c9ff6c315b9d7189d5e859a902c3e4d
ms.sourcegitcommit: 0c48191d6d641ce88d7510e319cf38c0e35697d0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/05/2019
ms.locfileid: "57352938"
---
# <a name="dependency-property-metadata"></a><span data-ttu-id="45af8-102">Metadatos de las propiedades de dependencia</span><span class="sxs-lookup"><span data-stu-id="45af8-102">Dependency Property Metadata</span></span>
<span data-ttu-id="45af8-103">El sistema de propiedades de [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] incluye un sistema de informe de metadatos que va más allá de lo que puede notificarse sobre una propiedad mediante la reflexión o las características generales de [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="45af8-103">The [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] property system includes a metadata reporting system that goes beyond what can be reported about a property through reflection or general [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] characteristics.</span></span> <span data-ttu-id="45af8-104">Los metadatos de una propiedad de dependencia también los puede asignar de manera exclusiva la clase que define una propiedad de dependencia, se pueden cambiar cuando la propiedad de dependencia se agrega a una clase diferente y los pueden invalidar específicamente todas las clases derivadas que heredan la propiedad de dependencia de la clase base de definición.</span><span class="sxs-lookup"><span data-stu-id="45af8-104">Metadata for a dependency property can also be assigned uniquely by the class that defines a dependency property, can be changed when the dependency property is added to a different class, and can be specifically overridden by all derived classes that inherit the dependency property from the defining base class.</span></span>  
  
 
  
<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="45af8-105">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="45af8-105">Prerequisites</span></span>  
 <span data-ttu-id="45af8-106">En este tema, se supone que entiende las propiedades de dependencia desde la perspectiva de un consumidor de propiedades de dependencia existentes en las clases [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] y que ha leído [Información general sobre las propiedades de dependencia](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="45af8-106">This topic assumes that you understand dependency properties from the perspective of a consumer of existing dependency properties on [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] classes, and have read the [Dependency Properties Overview](dependency-properties-overview.md).</span></span> <span data-ttu-id="45af8-107">Para seguir los ejemplos de este tema, también debe comprender el lenguaje [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] y saber cómo escribir aplicaciones de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="45af8-107">In order to follow the examples in this topic, you should also understand [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and know how to write [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] applications.</span></span>  
  
<a name="dp_metadata_contents"></a>   
## <a name="how-dependency-property-metadata-is-used"></a><span data-ttu-id="45af8-108">Uso de los metadatos de las propiedades de dependencia</span><span class="sxs-lookup"><span data-stu-id="45af8-108">How Dependency Property Metadata is Used</span></span>  
 <span data-ttu-id="45af8-109">Los metadatos de las propiedades de dependencia existen como un objeto que se puede consultar para examinar las características de una propiedad de dependencia.</span><span class="sxs-lookup"><span data-stu-id="45af8-109">Dependency property metadata exists as an object that can be queried to examine the characteristics of a dependency property.</span></span> <span data-ttu-id="45af8-110">El sistema de propiedades también accede con frecuencia a estos metadatos mientras procesa cualquier propiedad de dependencia determinada.</span><span class="sxs-lookup"><span data-stu-id="45af8-110">This metadata is also accessed frequently by the property system as it processes any given dependency property.</span></span> <span data-ttu-id="45af8-111">El objeto de metadatos de una propiedad de dependencia puede contener los siguientes tipos de información:</span><span class="sxs-lookup"><span data-stu-id="45af8-111">The metadata object for a dependency property can contain the following types of information:</span></span>  
  
-   <span data-ttu-id="45af8-112">Valor predeterminado de la propiedad de dependencia, si no se puede determinar ningún otro valor para la propiedad de dependencia por valor local, estilo, herencia, etc. Para ver un análisis detallado de cómo participan los valores predeterminados en la precedencia que usa el sistema de propiedades al asignar valores de propiedades de dependencia, consulte [Prioridad de los valores de propiedades de dependencia](dependency-property-value-precedence.md).</span><span class="sxs-lookup"><span data-stu-id="45af8-112">Default value for the dependency property, if no other value can be determined for the dependency property by local value, style, inheritance, etc. For a thorough discussion of how default values participate in the precedence used by the property system when assigning values for dependency properties, see [Dependency Property Value Precedence](dependency-property-value-precedence.md).</span></span>  
  
-   <span data-ttu-id="45af8-113">Referencias a las implementaciones de devoluciones de llamada que afectan a los comportamientos de coerción o notificación de cambios por tipo de propietario.</span><span class="sxs-lookup"><span data-stu-id="45af8-113">References to callback implementations that affect coercion or change-notification behaviors on a per-owner-type basis.</span></span> <span data-ttu-id="45af8-114">Tenga en cuenta que estas devoluciones de llamada se definen a menudo con un nivel de acceso no público, de modo que obtener las referencias reales de los metadatos no suele ser posible a menos que estén dentro de su ámbito de acceso permitido.</span><span class="sxs-lookup"><span data-stu-id="45af8-114">Note that these callbacks are often defined with a nonpublic access level, so obtaining the actual references from metadata is generally not possible unless the references are within your permitted access scope.</span></span> <span data-ttu-id="45af8-115">Para obtener más información sobre las devoluciones de llamada de propiedades de dependencia, consulte [Devoluciones de llamada y validación de las propiedades de dependencia](dependency-property-callbacks-and-validation.md).</span><span class="sxs-lookup"><span data-stu-id="45af8-115">For more information on dependency property callbacks, see [Dependency Property Callbacks and Validation](dependency-property-callbacks-and-validation.md).</span></span>  
  
-   <span data-ttu-id="45af8-116">Si la propiedad de dependencia en cuestión se considera una propiedad del nivel de marco de WPF, los metadatos podrían contener características de propiedades de dependencia del nivel de marco de WPF, que comunican los datos y el estado de los servicios, tales como la lógica de herencia de propiedades y el motor de diseño del nivel de marco de WPF.</span><span class="sxs-lookup"><span data-stu-id="45af8-116">If the dependency property in question is considered to be a WPF framework-level property, the metadata might contain WPF framework-level dependency property characteristics, which report information and state for services such as the WPF framework-level layout engine and property inheritance logic.</span></span> <span data-ttu-id="45af8-117">Para obtener más información sobre este aspecto de los metadatos de propiedades de dependencia, consulte [Metadatos de las propiedades de marco de trabajo](framework-property-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="45af8-117">For more information on this aspect of dependency property metadata, see [Framework Property Metadata](framework-property-metadata.md).</span></span>  
  
<a name="APIs"></a>   
## <a name="metadata-apis"></a><span data-ttu-id="45af8-118">API de metadatos</span><span class="sxs-lookup"><span data-stu-id="45af8-118">Metadata APIs</span></span>  
 <span data-ttu-id="45af8-119">El tipo que notifica la mayor parte de la información de metadatos utilizada por el sistema de propiedades es el <xref:System.Windows.PropertyMetadata> clase.</span><span class="sxs-lookup"><span data-stu-id="45af8-119">The type that reports most of the metadata information used by the property system is the <xref:System.Windows.PropertyMetadata> class.</span></span> <span data-ttu-id="45af8-120">Las instancias de metadatos se especifican de manera opcional cuando las propiedades de dependencia se registran con el sistema de propiedades y pueden especificarse de nuevo para tipos adicionales que se agreguen a sí mismos como propietarios o invaliden los metadatos que heredan de la definición de propiedad de dependencia de clase base.</span><span class="sxs-lookup"><span data-stu-id="45af8-120">Metadata instances are optionally specified when dependency properties are registered with the property system, and can be specified again for additional types that either add themselves as owners or override metadata they inherit from the base class dependency property definition.</span></span> <span data-ttu-id="45af8-121">(En los casos donde un registro de la propiedad no especifica metadatos, el valor predeterminado es <xref:System.Windows.PropertyMetadata> se crea con los valores predeterminados para esa clase.) Los metadatos registrados se devuelven como <xref:System.Windows.PropertyMetadata> al llamar a las diversas <xref:System.Windows.DependencyProperty.GetMetadata%2A> sobrecargas que obtienen metadatos de una propiedad de dependencia en un <xref:System.Windows.DependencyObject> instancia.</span><span class="sxs-lookup"><span data-stu-id="45af8-121">(For cases where a property registration does not specify metadata, a default <xref:System.Windows.PropertyMetadata> is created with default values for that class.)The registered metadata is returned as <xref:System.Windows.PropertyMetadata> when you call the various <xref:System.Windows.DependencyProperty.GetMetadata%2A> overloads that get metadata from a dependency property on a <xref:System.Windows.DependencyObject> instance.</span></span>  
  
 <span data-ttu-id="45af8-122">La <xref:System.Windows.PropertyMetadata> clase se deriva, a continuación, para proporcionar metadatos más específicos para divisiones arquitectónicas tales como las clases de nivel de marco WPF.</span><span class="sxs-lookup"><span data-stu-id="45af8-122">The <xref:System.Windows.PropertyMetadata> class is then derived from to provide more specific metadata for architectural divisions such as the WPF framework-level classes.</span></span> <span data-ttu-id="45af8-123"><xref:System.Windows.UIPropertyMetadata> informes de animación, se agrega y <xref:System.Windows.FrameworkPropertyMetadata> proporciona las propiedades de nivel de marco WPF mencionadas en la sección anterior.</span><span class="sxs-lookup"><span data-stu-id="45af8-123"><xref:System.Windows.UIPropertyMetadata> adds animation reporting, and <xref:System.Windows.FrameworkPropertyMetadata> provides the WPF framework-level properties mentioned in the previous section.</span></span> <span data-ttu-id="45af8-124">Cuando se registran las propiedades de dependencia, pueden registrarse con estos <xref:System.Windows.PropertyMetadata> las clases derivadas.</span><span class="sxs-lookup"><span data-stu-id="45af8-124">When dependency properties are registered, they can be registered with these <xref:System.Windows.PropertyMetadata> derived classes.</span></span> <span data-ttu-id="45af8-125">Cuando se examinan los metadatos, la base <xref:System.Windows.PropertyMetadata> tipo potencialmente se puede convertir en las clases derivadas para que puedan examinar las propiedades más específicas.</span><span class="sxs-lookup"><span data-stu-id="45af8-125">When the metadata is examined, the base <xref:System.Windows.PropertyMetadata> type can potentially be cast to the derived classes so that you can examine the more specific properties.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="45af8-126">Las características de la propiedad que se pueden especificar en <xref:System.Windows.FrameworkPropertyMetadata> se conocen a veces en esta documentación como "marcadores".</span><span class="sxs-lookup"><span data-stu-id="45af8-126">The property characteristics that can be specified in <xref:System.Windows.FrameworkPropertyMetadata> are sometimes referred to in this documentation as "flags".</span></span> <span data-ttu-id="45af8-127">Al crear nuevas instancias de metadatos para su uso en la dependencia de los registros de la propiedad o invalidaciones de metadatos, especifique estos valores mediante la enumeración basada en marcas <xref:System.Windows.FrameworkPropertyMetadataOptions> y, a continuación, se suministra valores concatenados, posiblemente, de la enumeración a la <xref:System.Windows.FrameworkPropertyMetadata> constructor.</span><span class="sxs-lookup"><span data-stu-id="45af8-127">When you create new metadata instances for use in dependency property registrations or metadata overrides, you specify these values using the flagwise enumeration <xref:System.Windows.FrameworkPropertyMetadataOptions> and then you supply possibly concatenated values of the enumeration to the <xref:System.Windows.FrameworkPropertyMetadata> constructor.</span></span> <span data-ttu-id="45af8-128">Sin embargo, una vez construidos, estas características de opción se exponen dentro de un <xref:System.Windows.FrameworkPropertyMetadata> como una serie de propiedades booleanas en lugar del valor de enumeración de construcción.</span><span class="sxs-lookup"><span data-stu-id="45af8-128">However, once constructed, these option characteristics are exposed within a <xref:System.Windows.FrameworkPropertyMetadata> as a series of Boolean properties rather than the constructing enumeration value.</span></span> <span data-ttu-id="45af8-129">Las propiedades booleanas permiten comprobar cada condicional, en lugar de exigir que aplique una máscara a un valor de enumeración basada en marcas para obtener la información que le interesa.</span><span class="sxs-lookup"><span data-stu-id="45af8-129">The Boolean properties enable you to check each conditional, rather than requiring you to apply a mask to a flagwise enumeration value to get the information you are interested in.</span></span> <span data-ttu-id="45af8-130">El constructor usa concatenadas <xref:System.Windows.FrameworkPropertyMetadataOptions> con el fin de mantener la longitud de la firma del constructor razonable, mientras que los metadatos construidos reales exponen las propiedades discretas para simplificar las consultas de los metadatos más intuitivo.</span><span class="sxs-lookup"><span data-stu-id="45af8-130">The constructor uses the concatenated <xref:System.Windows.FrameworkPropertyMetadataOptions> in order to keep the length of the constructor signature reasonable, whereas the actual constructed metadata exposes the discrete properties to make querying the metadata more intuitive.</span></span>  
  
<a name="override_or_subclass"></a>   
## <a name="when-to-override-metadata-when-to-derive-a-class"></a><span data-ttu-id="45af8-131">Cuándo invalidar metadatos y cuándo derivar una clase</span><span class="sxs-lookup"><span data-stu-id="45af8-131">When to Override Metadata, When to Derive a Class</span></span>  
 <span data-ttu-id="45af8-132">El sistema de propiedades de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] tiene funcionalidades establecidas para modificar algunas características de las propiedades de dependencia sin necesidad de volver a implementarlas completamente.</span><span class="sxs-lookup"><span data-stu-id="45af8-132">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system has established capabilities for changing some characteristics of dependency properties without requiring them to be entirely re-implemented.</span></span> <span data-ttu-id="45af8-133">Esto se logra construyendo una instancia diferente de los metadatos de la propiedad de dependencia tal como existe en un tipo determinado.</span><span class="sxs-lookup"><span data-stu-id="45af8-133">This is accomplished by constructing a different instance of property metadata for the dependency property as it exists on a particular type.</span></span> <span data-ttu-id="45af8-134">Tenga en cuenta que la mayoría de las propiedades de dependencia existentes no son propiedades virtuales, de modo que, en el sentido estricto, su "reimplementación" en clases heredadas solo se puede lograr mediante el sombreado del miembro existente.</span><span class="sxs-lookup"><span data-stu-id="45af8-134">Note that most existing dependency properties are not virtual properties, so strictly speaking "re-implementing" them on inherited classes could only be accomplished by shadowing the existing member.</span></span>  
  
 <span data-ttu-id="45af8-135">Si el escenario que intenta habilitar para una propiedad de dependencia en un tipo no se puede lograr con la modificación de las características de las propiedades de dependencia existentes, podría ser necesario crear una clase derivada y, después, declarar una propiedad de dependencia personalizada en su clase derivada.</span><span class="sxs-lookup"><span data-stu-id="45af8-135">If the scenario you are trying to enable for a dependency property on a type cannot be accomplished by modifying characteristics of existing dependency properties, it might then be necessary to create a derived class, and then to declare a custom dependency property on your derived class.</span></span> <span data-ttu-id="45af8-136">Una propiedad de dependencia personalizada se comporta igual que las propiedades de dependencia que definen las [!INCLUDE[TLA#tla_api#plural](../../../../includes/tlasharptla-apisharpplural-md.md)] de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="45af8-136">A custom dependency property behaves identically to dependency properties defined by the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA#tla_api#plural](../../../../includes/tlasharptla-apisharpplural-md.md)].</span></span> <span data-ttu-id="45af8-137">Para obtener más información acerca de las propiedades de dependencia personalizadas, consulte [Propiedades de dependencia personalizadas](custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="45af8-137">For more details about custom dependency properties, see [Custom Dependency Properties](custom-dependency-properties.md).</span></span>  
  
 <span data-ttu-id="45af8-138">Una característica importante de una propiedad de dependencia que no se puede invalidar es su tipo de valor.</span><span class="sxs-lookup"><span data-stu-id="45af8-138">One notable characteristic of a dependency property that you cannot override is its value type.</span></span> <span data-ttu-id="45af8-139">Si hereda una propiedad de dependencia que tiene el comportamiento aproximado que necesita, pero necesita que tenga un tipo diferente, tendrá que implementar una propiedad de dependencia personalizada y, posiblemente, vincular las propiedades mediante la conversión de tipos u otra implementación en la clase personalizada.</span><span class="sxs-lookup"><span data-stu-id="45af8-139">If you are inheriting a dependency property that has the approximate behavior you require, but you require a different type for it, you will have to implement a custom dependency property and perhaps link the properties through type conversion or other implementation on your custom class.</span></span> <span data-ttu-id="45af8-140">Además, no se puede reemplazar una existente <xref:System.Windows.ValidateValueCallback>, porque esta devolución de llamada existe en el propio campo de registro y no dentro de sus metadatos.</span><span class="sxs-lookup"><span data-stu-id="45af8-140">Also, you cannot replace an existing <xref:System.Windows.ValidateValueCallback>, because this callback exists in the registration field itself and not within its metadata.</span></span>  
  
<a name="scenarios"></a>   
## <a name="scenarios-for-changing-existing-metadata"></a><span data-ttu-id="45af8-141">Escenarios para modificar los metadatos existentes</span><span class="sxs-lookup"><span data-stu-id="45af8-141">Scenarios for Changing Existing Metadata</span></span>  
 <span data-ttu-id="45af8-142">Si está trabajando con los metadatos de una propiedad de dependencia existente, un escenario común para cambiar dichos metadatos es cambiar el valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="45af8-142">If you are working with metadata of an existing dependency property, one common scenario for changing dependency property metadata is to change the default value.</span></span> <span data-ttu-id="45af8-143">Cambiar o agregar devoluciones de llamada del sistema de propiedades es un escenario más avanzado.</span><span class="sxs-lookup"><span data-stu-id="45af8-143">Changing or adding property system callbacks is a more advanced scenario.</span></span> <span data-ttu-id="45af8-144">Es posible que quiera hacerlo si su implementación de una clase derivada tiene diferentes interrelaciones entre las propiedades de dependencia.</span><span class="sxs-lookup"><span data-stu-id="45af8-144">You might want to do this if your implementation of a derived class has different interrelationships between dependency properties.</span></span> <span data-ttu-id="45af8-145">Uno de los condicionales de tener un modelo de programación que admita tanto el uso declarativo como de código es que las propiedades deben poder establecerse en cualquier orden.</span><span class="sxs-lookup"><span data-stu-id="45af8-145">One of the conditionals of having a programming model that supports both code and declarative usage is that properties must enable being set in any order.</span></span> <span data-ttu-id="45af8-146">Por lo tanto, las propiedades dependientes deben establecerse Just-in-Time sin contexto y no pueden depender de saber un orden de configuración como podría darse en un constructor.</span><span class="sxs-lookup"><span data-stu-id="45af8-146">Thus any dependent properties need to be set just-in-time without context and cannot rely on knowing a setting order such as might be found in a constructor.</span></span> <span data-ttu-id="45af8-147">Para obtener más información sobre este aspecto del sistema de propiedades, consulte [Devoluciones de llamada y validación de las propiedades de dependencia](dependency-property-callbacks-and-validation.md).</span><span class="sxs-lookup"><span data-stu-id="45af8-147">For more information on this aspect of the property system, see [Dependency Property Callbacks and Validation](dependency-property-callbacks-and-validation.md).</span></span> <span data-ttu-id="45af8-148">Tenga en cuenta que las devoluciones de llamada de validación no forman parte de los metadatos, sino del identificador de la propiedad de dependencia.</span><span class="sxs-lookup"><span data-stu-id="45af8-148">Note that validation callbacks are not part of the metadata; they are part of the dependency property identifier.</span></span> <span data-ttu-id="45af8-149">Por lo tanto, las devoluciones de llamada de validación no se pueden cambiar mediante la invalidación de los metadatos.</span><span class="sxs-lookup"><span data-stu-id="45af8-149">Therefore, validation callbacks cannot be changed by overriding the metadata.</span></span>  
  
 <span data-ttu-id="45af8-150">Es posible que en algunos casos también quiera modificar las opciones de metadatos de la propiedad del nivel de marco de WPF en las propiedades de dependencia existente.</span><span class="sxs-lookup"><span data-stu-id="45af8-150">In some cases you might also want to alter the WPF framework-level property metadata options on existing dependency properties.</span></span> <span data-ttu-id="45af8-151">Estas opciones comunican determinados condicionales conocidos acerca de las propiedades del nivel de marco de WPF a otros procesos del nivel de marco de WPF, como el sistema de diseño.</span><span class="sxs-lookup"><span data-stu-id="45af8-151">These options communicate certain known conditionals about WPF framework-level properties to other WPF framework-level processes such as the layout system.</span></span>  <span data-ttu-id="45af8-152">Configuración de las opciones se realiza por lo general solo al registrar una nueva propiedad de dependencia, pero también es posible cambiar los metadatos de propiedad de nivel de marco WPF como parte de un <xref:System.Windows.DependencyProperty.OverrideMetadata%2A> o <xref:System.Windows.DependencyProperty.AddOwner%2A> llamar.</span><span class="sxs-lookup"><span data-stu-id="45af8-152">Setting the options is generally done only when registering a new dependency property, but it is also possible to change the WPF framework-level property metadata as part of a <xref:System.Windows.DependencyProperty.OverrideMetadata%2A> or <xref:System.Windows.DependencyProperty.AddOwner%2A> call.</span></span> <span data-ttu-id="45af8-153">Para obtener los valores específicos que se van a usar y otros datos, consulte [Metadatos de las propiedades de marco de trabajo](framework-property-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="45af8-153">For the specific values to use and more information, see [Framework Property Metadata](framework-property-metadata.md).</span></span> <span data-ttu-id="45af8-154">Para obtener más información relativa a cómo deben establecerse estas opciones para una propiedad de dependencia recién registrada, consulte [Propiedades de dependencia personalizadas](custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="45af8-154">For more information that is pertinent to how these options should be set for a newly registered dependency property, see [Custom Dependency Properties](custom-dependency-properties.md).</span></span>  
  
<a name="dp_override_metadata"></a>   
### <a name="overriding-metadata"></a><span data-ttu-id="45af8-155">Invalidar metadatos</span><span class="sxs-lookup"><span data-stu-id="45af8-155">Overriding Metadata</span></span>  
 <span data-ttu-id="45af8-156">El propósito de invalidar metadatos es principalmente que tenga la oportunidad de cambiar los distintos comportamientos derivados de metadatos que se aplican a la propiedad de dependencia tal como existe en el tipo.</span><span class="sxs-lookup"><span data-stu-id="45af8-156">The purpose of overriding metadata is primarily so that you have the opportunity to change the various metadata-derived behaviors that are applied to the dependency property as it exists on your type.</span></span> <span data-ttu-id="45af8-157">Las razones para ello se explican con más detalle en la sección [Metadatos](#dp_metadata_contents).</span><span class="sxs-lookup"><span data-stu-id="45af8-157">The reasons for this are explained in more detail in the [Metadata](#dp_metadata_contents) section.</span></span> <span data-ttu-id="45af8-158">Para obtener más información, incluidos algunos ejemplos de código, consulte [Invalidar metadatos en una propiedad de dependencia](how-to-override-metadata-for-a-dependency-property.md).</span><span class="sxs-lookup"><span data-stu-id="45af8-158">For more information including some code examples, see [Override Metadata for a Dependency Property](how-to-override-metadata-for-a-dependency-property.md).</span></span>  
  
 <span data-ttu-id="45af8-159">Se pueden proporcionar los metadatos de propiedad para una propiedad de dependencia durante la llamada de registro (<xref:System.Windows.DependencyProperty.Register%2A>).</span><span class="sxs-lookup"><span data-stu-id="45af8-159">Property metadata can be supplied for a dependency property during the registration call (<xref:System.Windows.DependencyProperty.Register%2A>).</span></span> <span data-ttu-id="45af8-160">Sin embargo, en muchos casos, es posible que quiera proporcionar metadatos específicos del tipo para la clase cuando esta herede esa propiedad de dependencia.</span><span class="sxs-lookup"><span data-stu-id="45af8-160">However, in many cases, you might want to provide type-specific metadata for your class when it inherits that dependency property.</span></span> <span data-ttu-id="45af8-161">Puede hacerlo mediante una llamada a la <xref:System.Windows.DependencyProperty.OverrideMetadata%2A> método.</span><span class="sxs-lookup"><span data-stu-id="45af8-161">You can do this by calling the <xref:System.Windows.DependencyProperty.OverrideMetadata%2A> method.</span></span>  <span data-ttu-id="45af8-162">Para obtener un ejemplo de la [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], <xref:System.Windows.FrameworkElement> es el tipo que se registra en primer lugar el <xref:System.Windows.UIElement.Focusable%2A> propiedad de dependencia.</span><span class="sxs-lookup"><span data-stu-id="45af8-162">For an example from the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], the <xref:System.Windows.FrameworkElement> class is the type that first registers the <xref:System.Windows.UIElement.Focusable%2A> dependency property.</span></span> <span data-ttu-id="45af8-163">Pero la <xref:System.Windows.Controls.Control> clase invalida los metadatos de la propiedad de dependencia proporcionar su propio valor predeterminado inicial, cambiarlo de `false` a `true`y en caso contrario, vuelve a utilizar el original <xref:System.Windows.UIElement.Focusable%2A> implementación.</span><span class="sxs-lookup"><span data-stu-id="45af8-163">But the <xref:System.Windows.Controls.Control> class overrides metadata for the dependency property to provide its own initial default value, changing it from `false` to `true`, and otherwise re-uses the original <xref:System.Windows.UIElement.Focusable%2A> implementation.</span></span>  
  
 <span data-ttu-id="45af8-164">Si invalida los metadatos, las distintas características de los metadatos se combinan o se reemplazan.</span><span class="sxs-lookup"><span data-stu-id="45af8-164">When you override metadata, the different metadata characteristics are either merged or replaced.</span></span>  
  
-   <span data-ttu-id="45af8-165"><xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> se combina.</span><span class="sxs-lookup"><span data-stu-id="45af8-165"><xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> is merged.</span></span> <span data-ttu-id="45af8-166">Si agrega un nuevo <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A>, esa devolución de llamada se almacena en los metadatos.</span><span class="sxs-lookup"><span data-stu-id="45af8-166">If you add a new <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A>, that callback is stored in the metadata.</span></span> <span data-ttu-id="45af8-167">Si no especifica un <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> en la invalidación, el valor de <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> se promueve como referencia del antecesor más próximo que se haya especificado en los metadatos.</span><span class="sxs-lookup"><span data-stu-id="45af8-167">If you do not specify a <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> in the override, the value of <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> is promoted as a reference from the nearest ancestor that specified it in metadata.</span></span>  
  
-   <span data-ttu-id="45af8-168">El comportamiento del sistema de propiedad real para <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> es que las implementaciones de todos los propietarios de metadatos de la jerarquía se conservan y se agregan a una tabla, con el orden de ejecución en el sistema de propiedades radica en que las devoluciones de llamada de la clase más derivada se invocan en primer lugar.</span><span class="sxs-lookup"><span data-stu-id="45af8-168">The actual property system behavior for <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> is that implementations for all metadata owners in the hierarchy are retained and added to a table, with order of execution by the property system being that the most derived class's callbacks are invoked first.</span></span>  
  
-   <span data-ttu-id="45af8-169"><xref:System.Windows.PropertyMetadata.DefaultValue%2A> se ha reemplazado.</span><span class="sxs-lookup"><span data-stu-id="45af8-169"><xref:System.Windows.PropertyMetadata.DefaultValue%2A> is replaced.</span></span> <span data-ttu-id="45af8-170">Si no especifica un <xref:System.Windows.PropertyMetadata.DefaultValue%2A> en la invalidación, el valor de <xref:System.Windows.PropertyMetadata.DefaultValue%2A> proviene del antecesor más cercano que se haya especificado en los metadatos.</span><span class="sxs-lookup"><span data-stu-id="45af8-170">If you do not specify a <xref:System.Windows.PropertyMetadata.DefaultValue%2A> in the override, the value of <xref:System.Windows.PropertyMetadata.DefaultValue%2A> comes from the nearest ancestor that specified it in metadata.</span></span>  
  
-   <span data-ttu-id="45af8-171"><xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> se reemplazan las implementaciones.</span><span class="sxs-lookup"><span data-stu-id="45af8-171"><xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> implementations are replaced.</span></span> <span data-ttu-id="45af8-172">Si agrega un nuevo <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A>, esa devolución de llamada se almacena en los metadatos.</span><span class="sxs-lookup"><span data-stu-id="45af8-172">If you add a new <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A>, that callback is stored in the metadata.</span></span> <span data-ttu-id="45af8-173">Si no especifica un <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> en la invalidación, el valor de <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> se promueve como referencia del antecesor más próximo que se haya especificado en los metadatos.</span><span class="sxs-lookup"><span data-stu-id="45af8-173">If you do not specify a <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> in the override, the value of <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> is promoted as a reference from the nearest ancestor that specified it in metadata.</span></span>  
  
-   <span data-ttu-id="45af8-174">El comportamiento del sistema de propiedades es que sólo el <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> se invoca en los metadatos inmediatos.</span><span class="sxs-lookup"><span data-stu-id="45af8-174">The property system behavior is that only the <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> in the immediate metadata is invoked.</span></span> <span data-ttu-id="45af8-175">No hay referencias a otras <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> se conservan las implementaciones en la jerarquía.</span><span class="sxs-lookup"><span data-stu-id="45af8-175">No references to other <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> implementations in the hierarchy are retained.</span></span>  
  
 <span data-ttu-id="45af8-176">Este comportamiento se implementa mediante <xref:System.Windows.PropertyMetadata.Merge%2A>y se puede invalidar en clases de metadatos derivadas.</span><span class="sxs-lookup"><span data-stu-id="45af8-176">This behavior is implemented by <xref:System.Windows.PropertyMetadata.Merge%2A>, and can be overridden on derived metadata classes.</span></span>  
  
#### <a name="overriding-attached-property-metadata"></a><span data-ttu-id="45af8-177">Invalidar los metadatos de las propiedades adjuntas</span><span class="sxs-lookup"><span data-stu-id="45af8-177">Overriding Attached Property Metadata</span></span>  
 <span data-ttu-id="45af8-178">En [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], las propiedades adjuntas se implementan como propiedades de dependencia.</span><span class="sxs-lookup"><span data-stu-id="45af8-178">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], attached properties are implemented as dependency properties.</span></span> <span data-ttu-id="45af8-179">Esto significa que también tienen metadatos de propiedad, que las clases individuales pueden invalidar.</span><span class="sxs-lookup"><span data-stu-id="45af8-179">This means that they also have property metadata, which individual classes can override.</span></span> <span data-ttu-id="45af8-180">Las consideraciones de ámbito para una propiedad adjunta en [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] son generalmente que cualquier <xref:System.Windows.DependencyObject> puede tener una propiedad adjunta establecida en ellos.</span><span class="sxs-lookup"><span data-stu-id="45af8-180">The scoping considerations for an attached property in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] are generally that any <xref:System.Windows.DependencyObject> can have an attached property set on them.</span></span> <span data-ttu-id="45af8-181">Por lo tanto, cualquier <xref:System.Windows.DependencyObject> clase derivada puede invalidar los metadatos de cualquier propiedad adjunta, tal como se puede establecer en una instancia de la clase.</span><span class="sxs-lookup"><span data-stu-id="45af8-181">Therefore, any <xref:System.Windows.DependencyObject> derived class can override the metadata for any attached property, as it might be set on an instance of the class.</span></span> <span data-ttu-id="45af8-182">Puede invalidar valores predeterminados, devoluciones de llamada o propiedades de informes de características del nivel de marco de WPF.</span><span class="sxs-lookup"><span data-stu-id="45af8-182">You can override default values, callbacks, or WPF framework-level characteristic-reporting properties.</span></span> <span data-ttu-id="45af8-183">Si se establece la propiedad adjunta en una instancia de la clase, se aplicarán las características de invalidación de metadatos de propiedad.</span><span class="sxs-lookup"><span data-stu-id="45af8-183">If the attached property is set on an instance of your class, those override property metadata characteristics apply.</span></span> <span data-ttu-id="45af8-184">Por ejemplo, puede invalidar el valor predeterminado, de modo que el valor de invalidación se notifique como el valor de la propiedad adjunta en las instancias de la clase, siempre que la propiedad no esté establecida de otro modo.</span><span class="sxs-lookup"><span data-stu-id="45af8-184">For instance, you can override the default value, such that your override value is reported as the value of the attached property on instances of your class, whenever the property is not otherwise set.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="45af8-185">El <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> propiedad no es relevante para las propiedades adjuntas.</span><span class="sxs-lookup"><span data-stu-id="45af8-185">The <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> property is not relevant for attached properties.</span></span>  
  
<a name="dp_add_owner"></a>   
### <a name="adding-a-class-as-an-owner-of-an-existing-dependency-property"></a><span data-ttu-id="45af8-186">Agregar una clase como propietaria de una propiedad de dependencia existente</span><span class="sxs-lookup"><span data-stu-id="45af8-186">Adding a Class as an Owner of an Existing Dependency Property</span></span>  
 <span data-ttu-id="45af8-187">Una clase se puede agregar como propietario de una propiedad de dependencia que ya se ha registrado, mediante el uso de la <xref:System.Windows.DependencyProperty.AddOwner%2A> método.</span><span class="sxs-lookup"><span data-stu-id="45af8-187">A class can add itself as an owner of a dependency property that has already been registered, by using the <xref:System.Windows.DependencyProperty.AddOwner%2A> method.</span></span> <span data-ttu-id="45af8-188">Esto permite que la clase use una propiedad de dependencia que se registró originalmente para un tipo diferente.</span><span class="sxs-lookup"><span data-stu-id="45af8-188">This enables the class to use a dependency property that was originally registered for a different type.</span></span> <span data-ttu-id="45af8-189">La clase que se agrega no suele ser una clase derivada del tipo que registró inicialmente esa propiedad de dependencia como propietaria.</span><span class="sxs-lookup"><span data-stu-id="45af8-189">The adding class is typically not a derived class of the type that first registered that dependency property as owner.</span></span> <span data-ttu-id="45af8-190">De hecho, esto permite que la clase y sus clases derivadas "hereden" una implementación de propiedad de dependencia sin que la clase propietaria original y la clase que se agrega estén en la misma jerarquía de clases real.</span><span class="sxs-lookup"><span data-stu-id="45af8-190">Effectively, this allows your class and its derived classes to "inherit" a dependency property implementation without the original owner class and the adding class being in the same true class hierarchy.</span></span> <span data-ttu-id="45af8-191">Además, la clase que se agrega (y también todas las clases derivadas) pueden proporcionar metadatos específicos del tipo para la propiedad de dependencia original.</span><span class="sxs-lookup"><span data-stu-id="45af8-191">In addition, the adding class (and all derived classes as well) can then provide type-specific metadata for the original dependency property.</span></span>  
  
 <span data-ttu-id="45af8-192">Además de agregarse a sí misma como propietaria a través de los métodos de utilidad del sistema de propiedades, la clase que se agrega debe declarar miembros públicos adicionales en sí misma para convertir la propiedad de dependencia en un participante completo en el sistema de propiedades, con exposición para el código y la marcación.</span><span class="sxs-lookup"><span data-stu-id="45af8-192">As well as adding itself as owner through the property system utility methods, the adding class should declare additional public members on itself in order to make the dependency property] a full participant in the property system with exposure to both code and markup.</span></span> <span data-ttu-id="45af8-193">Una clase que agrega una propiedad de dependencia existente tiene las mismas responsabilidades en cuanto a exponer el modelo de objetos para esa propiedad de dependencia que una clase que define una nueva propiedad de dependencia personalizada.</span><span class="sxs-lookup"><span data-stu-id="45af8-193">A class that adds an existing dependency property has the same responsibilities as far as exposing the object model for that dependency property as does a class that defines a new custom dependency property.</span></span> <span data-ttu-id="45af8-194">El primer miembro de este tipo que se va a exponer es un campo de identificador de propiedad de dependencia.</span><span class="sxs-lookup"><span data-stu-id="45af8-194">The first such member to expose is a dependency property identifier field.</span></span> <span data-ttu-id="45af8-195">Este campo debe ser un `public static readonly` campo de tipo <xref:System.Windows.DependencyProperty>, que se asigna al valor devuelto de la <xref:System.Windows.DependencyProperty.AddOwner%2A> llamar.</span><span class="sxs-lookup"><span data-stu-id="45af8-195">This field should be a `public static readonly` field of type <xref:System.Windows.DependencyProperty>, which is assigned to the return value of the <xref:System.Windows.DependencyProperty.AddOwner%2A> call.</span></span> <span data-ttu-id="45af8-196">El segundo miembro que se va a definir es la propiedad del "contenedor" de [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)].</span><span class="sxs-lookup"><span data-stu-id="45af8-196">The second member to define is the [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] "wrapper" property.</span></span> <span data-ttu-id="45af8-197">El contenedor hace que sea mucho más cómodo manipular la propiedad de dependencia en el código (evitar las llamadas a <xref:System.Windows.DependencyObject.SetValue%2A> cada vez y puede realizar esa llamada solo una vez en el propio contenedor).</span><span class="sxs-lookup"><span data-stu-id="45af8-197">The wrapper makes it much more convenient to manipulate your dependency property in code (you avoid calls to <xref:System.Windows.DependencyObject.SetValue%2A> each time, and can make that call only once in the wrapper itself).</span></span> <span data-ttu-id="45af8-198">El contenedor se implementa de forma idéntica a cómo se implementaría si se estuviera registrando una propiedad de dependencia personalizada.</span><span class="sxs-lookup"><span data-stu-id="45af8-198">The wrapper is implemented identically to how it would be implemented if you were registering a custom dependency property.</span></span> <span data-ttu-id="45af8-199">Para obtener más información acerca de cómo implementar una propiedad de dependencia, consulte [Propiedades de dependencia personalizadas](custom-dependency-properties.md) y [Agregar un tipo de propietario para una propiedad de dependencia](how-to-add-an-owner-type-for-a-dependency-property.md).</span><span class="sxs-lookup"><span data-stu-id="45af8-199">For more information about implementing a dependency property, see [Custom Dependency Properties](custom-dependency-properties.md) and [Add an Owner Type for a Dependency Property](how-to-add-an-owner-type-for-a-dependency-property.md).</span></span>  
  
#### <a name="addowner-and-attached-properties"></a><span data-ttu-id="45af8-200">AddOwner y propiedades adjuntas</span><span class="sxs-lookup"><span data-stu-id="45af8-200">AddOwner and Attached Properties</span></span>  
 <span data-ttu-id="45af8-201">Puede llamar a <xref:System.Windows.DependencyProperty.AddOwner%2A> para una propiedad de dependencia que se define como una propiedad adjunta mediante la clase propietaria.</span><span class="sxs-lookup"><span data-stu-id="45af8-201">You can call <xref:System.Windows.DependencyProperty.AddOwner%2A> for a dependency property that is defined as an attached property by the owner class.</span></span> <span data-ttu-id="45af8-202">Generalmente, el motivo para hacerlo es exponer la propiedad adjunta anteriormente como una propiedad de dependencia no adjunta.</span><span class="sxs-lookup"><span data-stu-id="45af8-202">Generally the reason for doing this is to expose the previously attached property as a non-attached dependency property.</span></span> <span data-ttu-id="45af8-203">A continuación, se expone el <xref:System.Windows.DependencyProperty.AddOwner%2A> devolver valor como un `public static readonly` campo para su uso como el identificador de propiedad de dependencia y definirá las propiedades de "contenedor" adecuadas para que la propiedad aparece en la tabla de miembros y admite una propiedad no adjunta uso de la clase.</span><span class="sxs-lookup"><span data-stu-id="45af8-203">You then will expose the <xref:System.Windows.DependencyProperty.AddOwner%2A> return value as a `public static readonly` field for use as the dependency property identifier, and will define appropriate "wrapper" properties so that the property appears in the members table and supports a non-attached property usage in your class.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="45af8-204">Vea también</span><span class="sxs-lookup"><span data-stu-id="45af8-204">See also</span></span>
- <xref:System.Windows.PropertyMetadata>
- <xref:System.Windows.DependencyObject>
- <xref:System.Windows.DependencyProperty>
- <xref:System.Windows.DependencyProperty.GetMetadata%2A>
- [<span data-ttu-id="45af8-205">Información general sobre las propiedades de dependencia</span><span class="sxs-lookup"><span data-stu-id="45af8-205">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="45af8-206">Metadatos de las propiedades de marco de trabajo</span><span class="sxs-lookup"><span data-stu-id="45af8-206">Framework Property Metadata</span></span>](framework-property-metadata.md)

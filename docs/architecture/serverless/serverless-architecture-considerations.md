---
title: 'Consideraciones sobre la arquitectura sin servidor: aplicaciones sin servidor'
description: Comprenda los desafíos de diseñar aplicaciones sin servidor, desde la administración de Estados y el almacenamiento persistente hasta escalado, registro, seguimiento y diagnóstico.
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: ecbffbbd435b4926608e4def519fdaddddab688d
ms.sourcegitcommit: f20dd18dbcf2275513281f5d9ad7ece6a62644b4
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/30/2019
ms.locfileid: "69577438"
---
# <a name="serverless-architecture-considerations"></a><span data-ttu-id="5da14-103">Consideraciones sobre la arquitectura sin servidor</span><span class="sxs-lookup"><span data-stu-id="5da14-103">Serverless architecture considerations</span></span>

<span data-ttu-id="5da14-104">La adopción de una arquitectura sin servidor conlleva algunos desafíos.</span><span class="sxs-lookup"><span data-stu-id="5da14-104">Adopting a serverless architecture does come with certain challenges.</span></span> <span data-ttu-id="5da14-105">En esta sección se analizan algunas de las consideraciones más comunes que se deben tener en cuenta.</span><span class="sxs-lookup"><span data-stu-id="5da14-105">This section explores some of the more common considerations to be aware of.</span></span> <span data-ttu-id="5da14-106">Todos estos desafíos tienen soluciones.</span><span class="sxs-lookup"><span data-stu-id="5da14-106">All of these challenges have solutions.</span></span> <span data-ttu-id="5da14-107">Al igual que con todas las opciones de arquitectura, la decisión de ir sin servidor debe realizarse solo después de considerar cuidadosamente las ventajas y desventajas.</span><span class="sxs-lookup"><span data-stu-id="5da14-107">As with all architecture choices, the decision to go serverless should be made only after carefully considering the pros and cons.</span></span> <span data-ttu-id="5da14-108">En función de las necesidades de la aplicación, puede decidir que una implementación sin servidor no es la solución adecuada para determinados componentes.</span><span class="sxs-lookup"><span data-stu-id="5da14-108">Depending on the needs of your application, you may decide a serverless implementation isn't the right solution for certain components.</span></span>

## <a name="managing-state"></a><span data-ttu-id="5da14-109">Administración del estado</span><span class="sxs-lookup"><span data-stu-id="5da14-109">Managing state</span></span>

<span data-ttu-id="5da14-110">Las funciones sin servidor, al igual que con los microservicios en general, no tienen estado de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="5da14-110">Serverless functions, as with microservices in general, are stateless by default.</span></span> <span data-ttu-id="5da14-111">Evitar el estado permite que el servidor sin servidor sea efímero, se escale horizontalmente y proporcione resistencia sin un punto central de error.</span><span class="sxs-lookup"><span data-stu-id="5da14-111">Avoiding state enables serverless to be ephemeral, to scale out, and to provide resiliency without a central point of failure.</span></span> <span data-ttu-id="5da14-112">En algunas circunstancias, los procesos empresariales requieren el estado.</span><span class="sxs-lookup"><span data-stu-id="5da14-112">In some circumstances, business processes require state.</span></span> <span data-ttu-id="5da14-113">Si el proceso requiere el estado, tiene dos opciones.</span><span class="sxs-lookup"><span data-stu-id="5da14-113">If your process requires state, you have two options.</span></span> <span data-ttu-id="5da14-114">Puede adoptar un modelo distinto de sin servidor o interactuar con un servicio independiente que proporcione el estado.</span><span class="sxs-lookup"><span data-stu-id="5da14-114">You can adopt a model other than serverless, or interact with a separate service that provides state.</span></span> <span data-ttu-id="5da14-115">Agregar estado puede complicar la solución y hacer que sea más difícil de escalar y, potencialmente, crear un único punto de error.</span><span class="sxs-lookup"><span data-stu-id="5da14-115">Adding state can complicate the solution and make it harder to scale, and potentially create a single point of failure.</span></span> <span data-ttu-id="5da14-116">Considere detenidamente si la función requiere un estado.</span><span class="sxs-lookup"><span data-stu-id="5da14-116">Carefully consider whether your function absolutely requires state.</span></span> <span data-ttu-id="5da14-117">Si la respuesta es "sí", determine si sigue teniendo sentido implementarlo con sin servidor.</span><span class="sxs-lookup"><span data-stu-id="5da14-117">If the answer is "yes," determine whether it still makes sense to implement it with serverless.</span></span>

<span data-ttu-id="5da14-118">Hay varias soluciones para adoptar el estado sin poner en peligro las ventajas de sin servidor.</span><span class="sxs-lookup"><span data-stu-id="5da14-118">There are several solutions to adopt state without compromising the benefits of serverless.</span></span> <span data-ttu-id="5da14-119">Algunas de las soluciones más populares son:</span><span class="sxs-lookup"><span data-stu-id="5da14-119">Some of the more popular solutions include:</span></span>

* <span data-ttu-id="5da14-120">Usar un almacén de datos temporal o una caché distribuida, como Redis</span><span class="sxs-lookup"><span data-stu-id="5da14-120">Use a temporary data store or distributed cache, like Redis</span></span>
* <span data-ttu-id="5da14-121">Almacenar el estado en una base de datos, como SQL o CosmosDB</span><span class="sxs-lookup"><span data-stu-id="5da14-121">Store state in a database, like SQL or CosmosDB</span></span>
* <span data-ttu-id="5da14-122">Controlar el estado a través de un motor de flujo de trabajo como durable Functions</span><span class="sxs-lookup"><span data-stu-id="5da14-122">Handle state through a workflow engine like durable functions</span></span>

<span data-ttu-id="5da14-123">La línea inferior es que debe tener en cuenta la necesidad de cualquier administración de Estados dentro de los procesos que está pensando en implementar sin servidor.</span><span class="sxs-lookup"><span data-stu-id="5da14-123">The bottom line is that you should be aware of the need for any state management within processes you're considering to implement with serverless.</span></span>

## <a name="long-running-processes"></a><span data-ttu-id="5da14-124">Procesos de ejecución prolongada</span><span class="sxs-lookup"><span data-stu-id="5da14-124">Long-running processes</span></span>

<span data-ttu-id="5da14-125">Muchas de las ventajas de Serverless dependen de que los procesos sean efímeros.</span><span class="sxs-lookup"><span data-stu-id="5da14-125">Many benefits of serverless rely on the processes being ephemeral.</span></span> <span data-ttu-id="5da14-126">Los tiempos de ejecución breves facilitan que el proveedor sin servidor libere recursos a medida que las funciones finalizan y comparten funciones entre los hosts.</span><span class="sxs-lookup"><span data-stu-id="5da14-126">Short run times make it easier for the serverless provider to free up resources as functions end and share functions across hosts.</span></span> <span data-ttu-id="5da14-127">La mayoría de los proveedores de nube limitan el tiempo total que la función puede ejecutar hasta unos 10 minutos.</span><span class="sxs-lookup"><span data-stu-id="5da14-127">Most cloud providers limit the total time your function can run to around 10 minutes.</span></span> <span data-ttu-id="5da14-128">Si el proceso puede tardar más tiempo, puede considerar una implementación alternativa.</span><span class="sxs-lookup"><span data-stu-id="5da14-128">If your process may take longer, you might consider an alternative implementation.</span></span>

<span data-ttu-id="5da14-129">Hay algunas excepciones y soluciones.</span><span class="sxs-lookup"><span data-stu-id="5da14-129">There are a few exceptions and solutions.</span></span> <span data-ttu-id="5da14-130">Una solución puede ser dividir el proceso en componentes más pequeños que, de forma individual, tardan menos tiempo en ejecutarse.</span><span class="sxs-lookup"><span data-stu-id="5da14-130">One solution may be to break your process into smaller components that individually take less time to run.</span></span> <span data-ttu-id="5da14-131">Si el proceso se ejecuta durante mucho tiempo debido a las dependencias, también puede considerar un flujo de trabajo asincrónico mediante una solución como durable functions.</span><span class="sxs-lookup"><span data-stu-id="5da14-131">If your process runs long because of dependencies, you can also consider an asynchronous workflow using a solution like durable functions.</span></span> <span data-ttu-id="5da14-132">Durable Functions pausa y mantiene el estado del proceso mientras está esperando a que finalice un proceso externo.</span><span class="sxs-lookup"><span data-stu-id="5da14-132">Durable functions pause and maintain the state of your process while it's waiting on an external process to finish.</span></span> <span data-ttu-id="5da14-133">El control asincrónico reduce el tiempo que se ejecuta el proceso real.</span><span class="sxs-lookup"><span data-stu-id="5da14-133">Asynchronous handling reduces the time the actual process runs.</span></span>

## <a name="startup-time"></a><span data-ttu-id="5da14-134">Tiempo de inicio</span><span class="sxs-lookup"><span data-stu-id="5da14-134">Startup time</span></span>

<span data-ttu-id="5da14-135">Un posible problema con las implementaciones sin servidor es el tiempo de inicio.</span><span class="sxs-lookup"><span data-stu-id="5da14-135">One potential concern with serverless implementations is startup time.</span></span> <span data-ttu-id="5da14-136">Para conservar recursos, muchos proveedores sin servidor crean la infraestructura "a petición".</span><span class="sxs-lookup"><span data-stu-id="5da14-136">To conserve resources, many serverless providers create infrastructure "on demand."</span></span> <span data-ttu-id="5da14-137">Cuando una función sin servidor se desencadena después de un período de tiempo, es posible que sea necesario crear o reiniciar los recursos para hospedar la función.</span><span class="sxs-lookup"><span data-stu-id="5da14-137">When a serverless function is triggered after a period of time, the resources to host the function may need to be created or restarted.</span></span> <span data-ttu-id="5da14-138">En algunas situaciones, los inicios en frío pueden dar lugar a retrasos de varios segundos.</span><span class="sxs-lookup"><span data-stu-id="5da14-138">In some situations, cold starts may result in delays of several seconds.</span></span> <span data-ttu-id="5da14-139">El tiempo de inicio varía entre proveedores y niveles de servicio.</span><span class="sxs-lookup"><span data-stu-id="5da14-139">Startup time varies across providers and service levels.</span></span> <span data-ttu-id="5da14-140">Hay algunos enfoques para abordar el tiempo de inicio si es importante minimizar el éxito de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5da14-140">There are a few approaches to address startup time if it's important to minimize for the success of the app.</span></span>

* <span data-ttu-id="5da14-141">Algunos proveedores permiten a los usuarios pagar por los niveles de servicio que garantizan que la infraestructura esté "siempre activada".</span><span class="sxs-lookup"><span data-stu-id="5da14-141">Some providers allow users to pay for service levels that guarantee infrastructure is "always on".</span></span>
* <span data-ttu-id="5da14-142">Implemente un mecanismo Keep-Alive (haga ping en el punto de conexión para mantenerlo "activo").</span><span class="sxs-lookup"><span data-stu-id="5da14-142">Implement a keep-alive mechanism (ping the endpoint to keep it "awake").</span></span>
* <span data-ttu-id="5da14-143">Use la orquestación como Kubernetes con un enfoque de función en contenedor (el host ya se está ejecutando, por lo que la ejecución de nuevas instancias es sumamente rápida).</span><span class="sxs-lookup"><span data-stu-id="5da14-143">Use orchestration like Kubernetes with a containerized function approach (the host is already running so spinning up new instances is extremely fast).</span></span>

## <a name="database-updates-and-migrations"></a><span data-ttu-id="5da14-144">Actualizaciones y migraciones de bases de datos</span><span class="sxs-lookup"><span data-stu-id="5da14-144">Database updates and migrations</span></span>

<span data-ttu-id="5da14-145">Una ventaja de código sin servidor es que puede liberar nuevas funciones sin tener que volver a implementar toda la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5da14-145">An advantage of serverless code is that you can release new functions without having to redeploy the entire application.</span></span> <span data-ttu-id="5da14-146">Esta ventaja puede ser una desventaja cuando hay una base de datos relacional implicada.</span><span class="sxs-lookup"><span data-stu-id="5da14-146">This advantage can become a disadvantage when there's a relational database involved.</span></span> <span data-ttu-id="5da14-147">Los cambios en los esquemas de base de datos son difíciles de sincronizar con las actualizaciones sin servidor.</span><span class="sxs-lookup"><span data-stu-id="5da14-147">Changes to database schemas are difficult to synchronize with serverless updates.</span></span> <span data-ttu-id="5da14-148">Se plantean desafíos adicionales cuando se produce un error y se deben revertir los cambios.</span><span class="sxs-lookup"><span data-stu-id="5da14-148">Additional challenges are posed when things go wrong and the changes must be rolled back.</span></span> <span data-ttu-id="5da14-149">La integridad de los datos es una de las razones por las que un procedimiento recomendado para los microservicios y las funciones sin servidor es que poseen sus propios datos.</span><span class="sxs-lookup"><span data-stu-id="5da14-149">Data integrity is one reason that a best practice for microservices and serverless functions is that they own their own data.</span></span> <span data-ttu-id="5da14-150">Es posible implementar los cambios como una sola unidad de proceso y datos.</span><span class="sxs-lookup"><span data-stu-id="5da14-150">It is possible to deploy changes as a single unit of compute and data.</span></span> <span data-ttu-id="5da14-151">La realidad es que muchos sistemas heredados incluyen una base de datos de back-end grande que se debe conciliar con la arquitectura sin servidor.</span><span class="sxs-lookup"><span data-stu-id="5da14-151">The reality is that many legacy systems feature a large back-end database that must be reconciled with the serverless architecture.</span></span>

<span data-ttu-id="5da14-152">Un enfoque popular para resolver el control de versiones de esquemas es no modificar nunca las propiedades y columnas existentes, sino agregar información nueva.</span><span class="sxs-lookup"><span data-stu-id="5da14-152">A popular approach to solve schema versioning is to never modify existing properties and columns, but instead add new information.</span></span> <span data-ttu-id="5da14-153">Por ejemplo, considere un cambio para pasar de una marca booleana "completado" para una lista de tareas pendientes a una "fecha de finalización".</span><span class="sxs-lookup"><span data-stu-id="5da14-153">For example, consider a change to move from a Boolean "completed" flag for a todo list to a "completed date."</span></span> <span data-ttu-id="5da14-154">En lugar de quitar el campo anterior, el cambio de la base de datos hará lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="5da14-154">Instead of removing the old field, the database change will:</span></span>

1. <span data-ttu-id="5da14-155">Agregue un nuevo campo "fecha de finalización".</span><span class="sxs-lookup"><span data-stu-id="5da14-155">Add a new "completed date" field.</span></span>
1. <span data-ttu-id="5da14-156">Transforme el campo booleano "completado" en una función calculada que evalúe si la fecha de finalización es posterior a la fecha actual.</span><span class="sxs-lookup"><span data-stu-id="5da14-156">Transform the "completed" Boolean field to a computed function that evaluates whether the completed date is after the current date.</span></span>
1. <span data-ttu-id="5da14-157">Agregue un desencadenador para establecer la fecha de finalización en la fecha actual cuando el valor booleano completado esté establecido en true.</span><span class="sxs-lookup"><span data-stu-id="5da14-157">Add a trigger to set the completed date to the current date when the completed Boolean is set to true.</span></span>

<span data-ttu-id="5da14-158">La secuencia de cambios garantiza que el código heredado continúe ejecutándose "tal cual", mientras que las funciones sin servidor más recientes pueden aprovechar el nuevo campo.</span><span class="sxs-lookup"><span data-stu-id="5da14-158">The sequence of changes ensures that legacy code continues to run "as is" while newer serverless functions can take advantage of the new field.</span></span>

<span data-ttu-id="5da14-159">Para obtener más información sobre los datos de las arquitecturas sin servidor, vea [desafíos y soluciones para la administración de datos distribuidos](../microservices/architect-microservice-container-applications/distributed-data-management.md).</span><span class="sxs-lookup"><span data-stu-id="5da14-159">For more information about data in serverless architectures, see [Challenges and solutions for distributed data management](../microservices/architect-microservice-container-applications/distributed-data-management.md).</span></span>

## <a name="scaling"></a><span data-ttu-id="5da14-160">Cambiar escala</span><span class="sxs-lookup"><span data-stu-id="5da14-160">Scaling</span></span>

<span data-ttu-id="5da14-161">Es una idea equivocada habitual que sin servidor significa "no hay servidor".</span><span class="sxs-lookup"><span data-stu-id="5da14-161">It's a common misconception that serverless means "no server."</span></span> <span data-ttu-id="5da14-162">En realidad, es "menos servidor".</span><span class="sxs-lookup"><span data-stu-id="5da14-162">It's in fact "less server."</span></span> <span data-ttu-id="5da14-163">El hecho de que haya una infraestructura de respaldo es importante comprender cuándo se va a escalar.</span><span class="sxs-lookup"><span data-stu-id="5da14-163">The fact there is a backing infrastructure is important to understand when it comes to scaling.</span></span> <span data-ttu-id="5da14-164">La mayoría de las plataformas sin servidor proporcionan un conjunto de controles para controlar cómo se debe escalar la infraestructura cuando aumenta la densidad de eventos.</span><span class="sxs-lookup"><span data-stu-id="5da14-164">Most serverless platforms provide a set of controls to handle how the infrastructure should scale when event density increases.</span></span> <span data-ttu-id="5da14-165">Puede elegir entre varias opciones, pero su estrategia puede variar en función de la función.</span><span class="sxs-lookup"><span data-stu-id="5da14-165">You can choose from a variety of options, but your strategy may vary depending on the function.</span></span> <span data-ttu-id="5da14-166">Además, las funciones se ejecutan normalmente en un host relacionado, de modo que las funciones en el mismo host tengan las mismas opciones de escala.</span><span class="sxs-lookup"><span data-stu-id="5da14-166">Furthermore, functions are typically run under a related host, so that functions on the same host have the same scale options.</span></span> <span data-ttu-id="5da14-167">Por lo tanto, es necesario organizar y planear las funciones que se hospedan juntas en función de los requisitos de escala.</span><span class="sxs-lookup"><span data-stu-id="5da14-167">Therefore it is necessary to organize and strategize which functions are hosted together based on scale requirements.</span></span>

<span data-ttu-id="5da14-168">Las reglas suelen especificar cómo realizar el escalado vertical (aumentar los recursos del host) y el escalado horizontal (aumentar el número de instancias de host) en función de los parámetros variables.</span><span class="sxs-lookup"><span data-stu-id="5da14-168">Rules often specify how to scale-up (increase the host resources) and scale-out (increase the number of host instances) based on varying parameters.</span></span> <span data-ttu-id="5da14-169">Los desencadenadores para las escalas pueden incluir programación, tasas de solicitudes, uso de CPU y uso de memoria.</span><span class="sxs-lookup"><span data-stu-id="5da14-169">Triggers for scales may include schedule, request rates, CPU utilization, and memory usage.</span></span> <span data-ttu-id="5da14-170">A menudo, el rendimiento es mayor.</span><span class="sxs-lookup"><span data-stu-id="5da14-170">Higher performance often comes at a greater cost.</span></span> <span data-ttu-id="5da14-171">Es posible que los enfoques más económicos basados en el consumo no escalen con rapidez cuando la tasa de solicitudes aumente repentinamente.</span><span class="sxs-lookup"><span data-stu-id="5da14-171">The less expensive, consumption-based approaches may not scale as quickly when the request rate suddenly increases.</span></span> <span data-ttu-id="5da14-172">Hay un equilibrio entre el pago por adelantado del "costo de seguro" frente al pago estricto de "a medida que avanza" y el riesgo de respuestas más lentas debido a aumentos repentinos de la demanda.</span><span class="sxs-lookup"><span data-stu-id="5da14-172">There is a trade-off between paying up front "insurance cost" versus paying strictly "as you go" and risking slower responses due to sudden increases in demand.</span></span>

## <a name="monitoring-tracing-and-logging"></a><span data-ttu-id="5da14-173">Supervisión, seguimiento y registro</span><span class="sxs-lookup"><span data-stu-id="5da14-173">Monitoring, tracing, and logging</span></span>

<span data-ttu-id="5da14-174">Un aspecto que a menudo se pasa por alto de DevOps es la supervisión de las aplicaciones una vez implementadas.</span><span class="sxs-lookup"><span data-stu-id="5da14-174">An often overlooked aspect of DevOps is monitoring applications once deployed.</span></span> <span data-ttu-id="5da14-175">Es importante tener una estrategia para supervisar las funciones sin servidor.</span><span class="sxs-lookup"><span data-stu-id="5da14-175">It's important to have a strategy for monitoring serverless functions.</span></span> <span data-ttu-id="5da14-176">El mayor desafío suele ser la correlación o reconocer cuándo un usuario llama a varias funciones como parte de la misma interacción.</span><span class="sxs-lookup"><span data-stu-id="5da14-176">The biggest challenge is often correlation, or recognizing when a user calls multiple functions as part of the same interaction.</span></span> <span data-ttu-id="5da14-177">La mayoría de las plataformas sin servidor permiten el registro de la consola que se puede importar en herramientas de terceros.</span><span class="sxs-lookup"><span data-stu-id="5da14-177">Most serverless platforms allow console logging that can be imported into third-party tools.</span></span> <span data-ttu-id="5da14-178">También hay opciones para automatizar la recopilación de telemetría, generar y realizar un seguimiento de los identificadores de correlación y supervisar acciones específicas para proporcionar información detallada.</span><span class="sxs-lookup"><span data-stu-id="5da14-178">There are also options to automate collection of telemetry, generate and track correlation IDs, and monitor specific actions to provide detailed insights.</span></span> <span data-ttu-id="5da14-179">Azure proporciona la [plataforma de Application Insights](https://docs.microsoft.com/azure/azure-functions/functions-monitoring) avanzada para la supervisión y el análisis.</span><span class="sxs-lookup"><span data-stu-id="5da14-179">Azure provides the advanced [Application Insights platform](https://docs.microsoft.com/azure/azure-functions/functions-monitoring) for monitoring and analytics.</span></span>

## <a name="inter-service-dependencies"></a><span data-ttu-id="5da14-180">Dependencias entre servicios</span><span class="sxs-lookup"><span data-stu-id="5da14-180">Inter-service dependencies</span></span>

<span data-ttu-id="5da14-181">Una arquitectura sin servidor puede incluir funciones que dependen de otras funciones.</span><span class="sxs-lookup"><span data-stu-id="5da14-181">A serverless architecture may include functions that rely on other functions.</span></span> <span data-ttu-id="5da14-182">De hecho, no es raro que una arquitectura sin servidor tenga varios servicios que se llamen entre sí como parte de una interacción o transacción distribuida.</span><span class="sxs-lookup"><span data-stu-id="5da14-182">In fact, it isn't uncommon in a serverless architecture to have multiple services call each other as part of an interaction or distributed transaction.</span></span> <span data-ttu-id="5da14-183">Para evitar el acoplamiento fuerte, se recomienda que los servicios no se hagan referencia entre sí directamente.</span><span class="sxs-lookup"><span data-stu-id="5da14-183">To avoid strong coupling, it's recommended that services don't reference each other directly.</span></span> <span data-ttu-id="5da14-184">Cuando el extremo de un servicio debe cambiar, las referencias directas pueden dar lugar a una refactorización importante.</span><span class="sxs-lookup"><span data-stu-id="5da14-184">When the endpoint for a service needs to change, direct references could result in major refactoring.</span></span> <span data-ttu-id="5da14-185">Una solución sugerida es proporcionar un mecanismo de detección de servicios, como un registro, que proporcione el extremo adecuado para un tipo de solicitud.</span><span class="sxs-lookup"><span data-stu-id="5da14-185">A suggested solution is to provide a service discovery mechanism, such as a registry, that provides the appropriate end point for a request type.</span></span> <span data-ttu-id="5da14-186">Otra solución consiste en aprovechar servicios de mensajería como colas o temas para la comunicación entre servicios.</span><span class="sxs-lookup"><span data-stu-id="5da14-186">Another solution is to leverage messaging services like queues or topics for communication between services.</span></span>

## <a name="managing-failure-and-providing-resiliency"></a><span data-ttu-id="5da14-187">Administrar errores y proporcionar resistencia</span><span class="sxs-lookup"><span data-stu-id="5da14-187">Managing failure and providing resiliency</span></span>

<span data-ttu-id="5da14-188">También es importante tener en cuenta el *patrón de*disyuntor: Si, por alguna razón, un servicio sigue produciendo errores, no es aconsejable llamar a ese servicio repetidamente.</span><span class="sxs-lookup"><span data-stu-id="5da14-188">It's also important to consider the *circuit-breaker pattern*: If, for some reason, a service continues to fail, it isn't advisable to call that service repeatedly.</span></span> <span data-ttu-id="5da14-189">En su lugar, se llama a un servicio alternativo o se devuelve un mensaje hasta que se restablece el estado del servicio dependiente.</span><span class="sxs-lookup"><span data-stu-id="5da14-189">Instead, an alternative service is called or a message returned until the health of the dependent service is re-established.</span></span> <span data-ttu-id="5da14-190">La arquitectura sin servidor debe tener en cuenta la estrategia para resolver y administrar las dependencias entre servicios.</span><span class="sxs-lookup"><span data-stu-id="5da14-190">The serverless architecture needs to take into account the strategy for resolving and managing inter-service dependencies.</span></span>

<span data-ttu-id="5da14-191">Para continuar con el patrón de disyuntor, los servicios deben ser tolerantes a errores y resistentes.</span><span class="sxs-lookup"><span data-stu-id="5da14-191">To continue the circuit-breaker pattern, services need to be fault tolerant and resilient.</span></span> <span data-ttu-id="5da14-192">La tolerancia a errores hace referencia a la capacidad de la aplicación de seguir ejecutándose incluso después de encontrar excepciones inesperadas o Estados no válidos.</span><span class="sxs-lookup"><span data-stu-id="5da14-192">Fault tolerance refers to the ability of your application to continue running even after unexpected exceptions or invalid states are encountered.</span></span> <span data-ttu-id="5da14-193">La tolerancia a errores suele ser una función del propio código y cómo se escribe para controlar las excepciones.</span><span class="sxs-lookup"><span data-stu-id="5da14-193">Fault tolerance is typically a function of the code itself and how it's written to handle exceptions.</span></span> <span data-ttu-id="5da14-194">La resistencia hace referencia al modo en que la aplicación se encuentra en recuperación ante errores.</span><span class="sxs-lookup"><span data-stu-id="5da14-194">Resiliency refers to how capable the app is at recovering from failures.</span></span> <span data-ttu-id="5da14-195">La plataforma sin servidor suele administrar la resistencia.</span><span class="sxs-lookup"><span data-stu-id="5da14-195">Resiliency is often managed by the serverless platform.</span></span> <span data-ttu-id="5da14-196">La plataforma debe ser capaz de poner en marcha una nueva instancia de función sin servidor cuando se produce un error en la existente.</span><span class="sxs-lookup"><span data-stu-id="5da14-196">The platform should be able to spin up a new serverless function instance when the existing one fails.</span></span> <span data-ttu-id="5da14-197">La plataforma también debe ser lo suficientemente inteligente como para detener la marcha de nuevas instancias cuando se produce un error en cada nueva instancia.</span><span class="sxs-lookup"><span data-stu-id="5da14-197">The platform should also be intelligent enough to stop spinning up new instances when every new instance fails.</span></span>

<span data-ttu-id="5da14-198">Para obtener más información, vea [implementar el patrón de disyuntor](../microservices/implement-resilient-applications/implement-circuit-breaker-pattern.md).</span><span class="sxs-lookup"><span data-stu-id="5da14-198">For more information, see [Implementing the Circuit Breaker pattern](../microservices/implement-resilient-applications/implement-circuit-breaker-pattern.md).</span></span>

## <a name="versioning-and-greenblue-deployments"></a><span data-ttu-id="5da14-199">Versiones y implementaciones verdes/azules</span><span class="sxs-lookup"><span data-stu-id="5da14-199">Versioning and green/blue deployments</span></span>

<span data-ttu-id="5da14-200">Una ventaja importante de Serverless es la capacidad de actualizar una función específica sin tener que volver a implementar toda la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5da14-200">A major benefit of serverless is the ability to upgrade a specific function without having to redeploy the entire application.</span></span> <span data-ttu-id="5da14-201">Para que las actualizaciones se realicen correctamente, las funciones deben tener versiones para que los servicios que las llaman se enruten a la versión correcta del código.</span><span class="sxs-lookup"><span data-stu-id="5da14-201">For upgrades to be successful, functions must be versioned so that services calling them are routed to the correct version of code.</span></span> <span data-ttu-id="5da14-202">También es importante una estrategia para implementar nuevas versiones.</span><span class="sxs-lookup"><span data-stu-id="5da14-202">A strategy for deploying new versions is also important.</span></span> <span data-ttu-id="5da14-203">Un enfoque común es usar "implementaciones verdes/azules".</span><span class="sxs-lookup"><span data-stu-id="5da14-203">A common approach is to use "green/blue deployments."</span></span> <span data-ttu-id="5da14-204">La implementación verde es la función actual.</span><span class="sxs-lookup"><span data-stu-id="5da14-204">The green deployment is the current function.</span></span> <span data-ttu-id="5da14-205">Una nueva versión "azul" se implementa en producción y se prueba.</span><span class="sxs-lookup"><span data-stu-id="5da14-205">A new "blue" version is deployed to production and tested.</span></span> <span data-ttu-id="5da14-206">Cuando se superan las pruebas, las versiones verde y azul se intercambian, por lo que la nueva versión entra en marcha.</span><span class="sxs-lookup"><span data-stu-id="5da14-206">When testing passes, the green and blue versions are swapped so the new version comes live.</span></span> <span data-ttu-id="5da14-207">Si se detecta algún problema, se pueden intercambiar de nuevo.</span><span class="sxs-lookup"><span data-stu-id="5da14-207">If any issues are encountered, they can be swapped back.</span></span> <span data-ttu-id="5da14-208">La compatibilidad con el control de versiones y las implementaciones verdes/azules requiere una combinación de creación de las funciones para acomodar los cambios de versión y trabajar con la plataforma sin servidor para administrar las implementaciones.</span><span class="sxs-lookup"><span data-stu-id="5da14-208">Supporting versioning and green/blue deployments requires a combination of authoring the functions to accommodate version changes and working with the serverless platform to handle deployments.</span></span> <span data-ttu-id="5da14-209">Un posible enfoque consiste en usar servidores proxy, que se describen en el capítulo [plataforma sin servidor de Azure](azure-functions.md#proxies) .</span><span class="sxs-lookup"><span data-stu-id="5da14-209">One possible approach is to use proxies, which are described in the [Azure serverless platform](azure-functions.md#proxies) chapter.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="5da14-210">[Anterior](serverless-architecture.md)
>[Siguiente](serverless-design-examples.md)</span><span class="sxs-lookup"><span data-stu-id="5da14-210">[Previous](serverless-architecture.md)
[Next](serverless-design-examples.md)</span></span>

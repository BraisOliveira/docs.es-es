---
title: Migración de .NET Core desde project.json
description: Aprenda a migrar un proyecto anterior de .NET Core con project.json.
ms.date: 07/19/2017
ms.custom: seodec18
ms.openlocfilehash: 167f0707bbaf34ce12a1c56ee2320e7cc4f48bd3
ms.sourcegitcommit: 3094dcd17141b32a570a82ae3f62a331616e2c9c
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 10/01/2019
ms.locfileid: "71698916"
---
# <a name="migrating-net-core-projects-from-projectjson"></a><span data-ttu-id="dfeab-103">Migración de proyectos de .NET Core desde project.json</span><span class="sxs-lookup"><span data-stu-id="dfeab-103">Migrating .NET Core projects from project.json</span></span>

<span data-ttu-id="dfeab-104">En este documento se tratan los tres escenarios de migración siguientes para los proyectos de .NET Core:</span><span class="sxs-lookup"><span data-stu-id="dfeab-104">This document covers the following three migration scenarios for .NET Core projects:</span></span>

1. [<span data-ttu-id="dfeab-105">Migración desde un esquema válido más reciente de *project.json* a *csproj*</span><span class="sxs-lookup"><span data-stu-id="dfeab-105">Migration from a valid latest schema of *project.json* to *csproj*</span></span>](#migration-from-projectjson-to-csproj)
2. [<span data-ttu-id="dfeab-106">Migración desde DNX a csproj</span><span class="sxs-lookup"><span data-stu-id="dfeab-106">Migration from DNX to csproj</span></span>](#migration-from-dnx-to-csproj)
3. [<span data-ttu-id="dfeab-107">Migración desde proyectos de csproj de .NET Core RC3 y anteriores al formato final</span><span class="sxs-lookup"><span data-stu-id="dfeab-107">Migration from RC3 and previous .NET Core csproj projects to the final format</span></span>](#migration-from-earlier-net-core-csproj-formats-to-rtm-csproj)

<span data-ttu-id="dfeab-108">Este documento solo es aplicable a proyectos antiguos de .NET Core que usan project.json.</span><span class="sxs-lookup"><span data-stu-id="dfeab-108">This document is only applicable to older .NET Core projects that use project.json.</span></span> <span data-ttu-id="dfeab-109">No se aplica a la migración de .NET Framework a .NET Core.</span><span class="sxs-lookup"><span data-stu-id="dfeab-109">It does not apply to migrating from .NET Framework to .NET Core.</span></span>

## <a name="migration-from-projectjson-to-csproj"></a><span data-ttu-id="dfeab-110">Migración desde project.json a csproj</span><span class="sxs-lookup"><span data-stu-id="dfeab-110">Migration from project.json to csproj</span></span>

<span data-ttu-id="dfeab-111">La migración desde *project.json* a *.csproj* puede realizarse mediante uno de los métodos siguientes:</span><span class="sxs-lookup"><span data-stu-id="dfeab-111">Migration from *project.json* to *.csproj* can be done using one of the following methods:</span></span>

- [<span data-ttu-id="dfeab-112">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="dfeab-112">Visual Studio</span></span>](#visual-studio)
- [<span data-ttu-id="dfeab-113">Herramienta de línea de comandos dotnet migrate</span><span class="sxs-lookup"><span data-stu-id="dfeab-113">dotnet migrate command-line tool</span></span>](#dotnet-migrate)

<span data-ttu-id="dfeab-114">Ambos métodos usan el mismo motor subyacente para migrar los proyectos, por lo que los resultados serán los mismos para ambos.</span><span class="sxs-lookup"><span data-stu-id="dfeab-114">Both methods use the same underlying engine to migrate the projects, so the results will be the same for both.</span></span> <span data-ttu-id="dfeab-115">En la mayoría de los casos, tan solo será necesario usar una de estas dos formas de migrar *project.json* a *csproj*, y no se requerirá ninguna otra edición manual del archivo del proyecto.</span><span class="sxs-lookup"><span data-stu-id="dfeab-115">In most cases, using one of these two ways to migrate the *project.json* to *csproj* is the only thing that is needed, and no further manual editing of the project file is necessary.</span></span> <span data-ttu-id="dfeab-116">El archivo *.csproj* resultante tendrá el mismo nombre que el directorio que lo contiene.</span><span class="sxs-lookup"><span data-stu-id="dfeab-116">The resulting *.csproj* file will be named the same as the containing directory name.</span></span>

### <a name="visual-studio"></a><span data-ttu-id="dfeab-117">Programa para la mejora</span><span class="sxs-lookup"><span data-stu-id="dfeab-117">Visual Studio</span></span>

<span data-ttu-id="dfeab-118">Al abrir un archivo *.xproj* o un archivo de solución que hace referencia a archivos *.xproj* en Visual Studio 2017 o Visual Studio 2019, versión 16.2 y versiones anteriores, se abre el cuadro de diálogo **Actualización unidireccional**.</span><span class="sxs-lookup"><span data-stu-id="dfeab-118">When you open an *.xproj* file or a solution file that references *.xproj* files in Visual Studio 2017 or Visual Studio 2019 version 16.2 and earlier, the **One-way upgrade** dialog appears.</span></span> <span data-ttu-id="dfeab-119">El cuadro de diálogo muestra los proyectos que se van a migrar.</span><span class="sxs-lookup"><span data-stu-id="dfeab-119">The dialog displays the projects to be migrated.</span></span> <span data-ttu-id="dfeab-120">Si se abre un archivo de solución, se enumeran todos los proyectos especificados en el archivo de solución.</span><span class="sxs-lookup"><span data-stu-id="dfeab-120">If you open a solution file, all the projects specified in the solution file are listed.</span></span> <span data-ttu-id="dfeab-121">Revise la lista de proyectos que se van a migrar y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="dfeab-121">Review the list of projects to be migrated and select **OK**.</span></span>

![Cuadro de diálogo Actualización unidireccional con la lista de proyectos que se van a migrar](media/one-way-upgrade.jpg)

<span data-ttu-id="dfeab-123">Visual Studio migra automáticamente los proyectos seleccionados.</span><span class="sxs-lookup"><span data-stu-id="dfeab-123">Visual Studio migrates the selected projects automatically.</span></span> <span data-ttu-id="dfeab-124">Al migrar una solución, si no elige todos los proyectos, aparece el mismo cuadro de diálogo preguntando si quiere actualizar los proyectos restantes de esa solución.</span><span class="sxs-lookup"><span data-stu-id="dfeab-124">When migrating a solution, if you don't choose all projects, the same dialog appears asking you to upgrade the remaining projects from that solution.</span></span> <span data-ttu-id="dfeab-125">Después de migrar el proyecto, puede ver y modificar su contenido. Para ello, haga clic con el botón derecho en el proyecto en la ventana del **Explorador de soluciones** y seleccione **Editar \<nombre del proyecto>.csproj**.</span><span class="sxs-lookup"><span data-stu-id="dfeab-125">After the project is migrated, you can see and modify its contents by right-clicking the project in the **Solution Explorer** window and selecting **Edit \<project name>.csproj**.</span></span>

<span data-ttu-id="dfeab-126">Los archivos que se migraron (*project.json*, *global.json*, *.xproj* y el archivo de solución) se mueven a una carpeta *Copia de seguridad*.</span><span class="sxs-lookup"><span data-stu-id="dfeab-126">Files that were migrated (*project.json*, *global.json*, *.xproj*, and solution file) are moved to a *Backup* folder.</span></span> <span data-ttu-id="dfeab-127">El archivo de solución migrado se actualiza a Visual Studio 2017 o Visual Studio 2019 y no podrá abrir ese archivo de solución en Visual Studio 2015 ni en versiones anteriores.</span><span class="sxs-lookup"><span data-stu-id="dfeab-127">The migrated solution file is upgraded to Visual Studio 2017 or Visual Studio 2019 and you won't be able to open that solution file in Visual Studio 2015 or earlier versions.</span></span> <span data-ttu-id="dfeab-128">También se guarda y se abre automáticamente un archivo denominado *UpgradeLog.htm* que contiene un informe de migración.</span><span class="sxs-lookup"><span data-stu-id="dfeab-128">A file named *UpgradeLog.htm* that contains a migration report is also saved and opened automatically.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="dfeab-129">No puede migrar sus proyectos con Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="dfeab-129">You cannot migrate your projects using Visual Studio 2015.</span></span>

### <a name="dotnet-migrate"></a><span data-ttu-id="dfeab-130">dotnet migrate</span><span class="sxs-lookup"><span data-stu-id="dfeab-130">dotnet migrate</span></span>

<span data-ttu-id="dfeab-131">En el escenario de la línea de comandos, puede usar el comando [`dotnet migrate`](../tools/dotnet-migrate.md).</span><span class="sxs-lookup"><span data-stu-id="dfeab-131">In the command-line scenario, you can use the [`dotnet migrate`](../tools/dotnet-migrate.md) command.</span></span> <span data-ttu-id="dfeab-132">Se migra un proyecto, una solución o un conjunto de carpetas, en ese orden, dependiendo de lo que se encuentre.</span><span class="sxs-lookup"><span data-stu-id="dfeab-132">It migrates a project, a solution, or a set of folders in that order, depending on which ones were found.</span></span> <span data-ttu-id="dfeab-133">Cuando se migra un proyecto, se migra el proyecto y todas sus dependencias.</span><span class="sxs-lookup"><span data-stu-id="dfeab-133">When you migrate a project, the project and all its dependencies are migrated.</span></span>

<span data-ttu-id="dfeab-134">Los archivos que se migraron (*project.json*, *global.json* y *.xproj*) se mueven a una carpeta *Copia de seguridad*.</span><span class="sxs-lookup"><span data-stu-id="dfeab-134">Files that were migrated (*project.json*, *global.json*, and *.xproj*) are moved to a *backup* folder.</span></span>

> [!NOTE]
> <span data-ttu-id="dfeab-135">Si se usa Visual Studio Code, el comando `dotnet migrate` no modifica archivos específicos de Visual Studio Code, como `tasks.json`.</span><span class="sxs-lookup"><span data-stu-id="dfeab-135">If you are using Visual Studio Code, the `dotnet migrate` command does not modify Visual Studio Code-specific files such as `tasks.json`.</span></span> <span data-ttu-id="dfeab-136">Estos archivos deben modificarse de forma manual.</span><span class="sxs-lookup"><span data-stu-id="dfeab-136">These files need to be changed manually.</span></span>
> <span data-ttu-id="dfeab-137">Esto también sucede si se usa Project Ryder o cualquier editor o entorno de desarrollo integrado (IDE) que no sea Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="dfeab-137">This is also true if you are using Project Ryder or any editor or Integrated Development Environment (IDE) other than Visual Studio.</span></span>

<span data-ttu-id="dfeab-138">Consulte [Una asignación entre propiedades project.json y csproj](../tools/project-json-to-csproj.md) para una comparación de los formatos project.json y csproj.</span><span class="sxs-lookup"><span data-stu-id="dfeab-138">See [A mapping between project.json and csproj properties](../tools/project-json-to-csproj.md) for a comparison of project.json and csproj formats.</span></span>

### <a name="common-issues"></a><span data-ttu-id="dfeab-139">Problemas comunes</span><span class="sxs-lookup"><span data-stu-id="dfeab-139">Common issues</span></span>

- <span data-ttu-id="dfeab-140">Si se produce un error que indica que no se encuentra ningún archivo que coincida con el comando dotnet-migrate:</span><span class="sxs-lookup"><span data-stu-id="dfeab-140">If you get an error: "No executable found matching command dotnet-migrate":</span></span>

<span data-ttu-id="dfeab-141">Ejecute `dotnet --version` para ver qué versión está usando.</span><span class="sxs-lookup"><span data-stu-id="dfeab-141">Run `dotnet --version` to see which version you are using.</span></span> <span data-ttu-id="dfeab-142">[`dotnet migrate`](../tools/dotnet-migrate.md) requiere .NET Core CLI RC3 o superior.</span><span class="sxs-lookup"><span data-stu-id="dfeab-142">[`dotnet migrate`](../tools/dotnet-migrate.md) requires .NET Core CLI RC3 or higher.</span></span>
<span data-ttu-id="dfeab-143">Obtendrá este error si tiene un archivo *global.json* en el directorio actual o principal y la versión de `sdk` está establecida en una versión anterior.</span><span class="sxs-lookup"><span data-stu-id="dfeab-143">You’ll get this error if you have a *global.json* file in the current or parent directory and the `sdk` version is set to an older version.</span></span>

## <a name="migration-from-dnx-to-csproj"></a><span data-ttu-id="dfeab-144">Migración desde DNX a csproj</span><span class="sxs-lookup"><span data-stu-id="dfeab-144">Migration from DNX to csproj</span></span>

<span data-ttu-id="dfeab-145">Si aún usa DNX para el desarrollo de .NET Core, el proceso de migración debe realizarse en dos fases:</span><span class="sxs-lookup"><span data-stu-id="dfeab-145">If you are still using DNX for .NET Core development, your migration process should be done in two stages:</span></span>

1. <span data-ttu-id="dfeab-146">Use la [guía de migración de DNX existente](from-dnx.md) para migrar desde DNX a la CLI compatible con project.json.</span><span class="sxs-lookup"><span data-stu-id="dfeab-146">Use the [existing DNX migration guidance](from-dnx.md) to migrate from DNX to project-json enabled CLI.</span></span>
2. <span data-ttu-id="dfeab-147">Siga los pasos de la sección anterior para migrar desde *project.json* a *.csproj*.</span><span class="sxs-lookup"><span data-stu-id="dfeab-147">Follow the steps from the previous section to migrate from *project.json* to *.csproj*.</span></span>  

> [!NOTE]
> <span data-ttu-id="dfeab-148">DNX quedó oficialmente en desuso durante la versión Preview 1 de la CLI de .NET Core.</span><span class="sxs-lookup"><span data-stu-id="dfeab-148">DNX has become officially deprecated during the Preview 1 release of the .NET Core CLI.</span></span>

## <a name="migration-from-earlier-net-core-csproj-formats-to-rtm-csproj"></a><span data-ttu-id="dfeab-149">Migración desde formatos anteriores de csproj de .NET Core a csproj RTM</span><span class="sxs-lookup"><span data-stu-id="dfeab-149">Migration from earlier .NET Core csproj formats to RTM csproj</span></span>

<span data-ttu-id="dfeab-150">El formato de csproj de .NET Core ha cambiado y evolucionado con cada nueva versión preliminar de las herramientas.</span><span class="sxs-lookup"><span data-stu-id="dfeab-150">The .NET Core csproj format has been changing and evolving with each new pre-release version of the tooling.</span></span> <span data-ttu-id="dfeab-151">No hay ninguna herramienta que migre el archivo del proyecto de versiones anteriores de csproj a la versión más reciente, por lo que tendrá que editar manualmente el archivo del proyecto.</span><span class="sxs-lookup"><span data-stu-id="dfeab-151">There is no tool that will migrate your project file from earlier versions of csproj to the latest, so you need to manually edit the project file.</span></span> <span data-ttu-id="dfeab-152">Los pasos reales dependen de la versión del archivo del proyecto que se va a migrar.</span><span class="sxs-lookup"><span data-stu-id="dfeab-152">The actual steps depend on the version of the project file you are migrating.</span></span> <span data-ttu-id="dfeab-153">Tenga en cuenta los siguientes consejos basados en los cambios que se produjeron entre las versiones:</span><span class="sxs-lookup"><span data-stu-id="dfeab-153">The following is some guidance to consider based on the changes that happened between versions:</span></span>

- <span data-ttu-id="dfeab-154">Quite la propiedad de versión de las herramientas del elemento `<Project>`, si existe.</span><span class="sxs-lookup"><span data-stu-id="dfeab-154">Remove the tools version property from the `<Project>` element, if it exists.</span></span>
- <span data-ttu-id="dfeab-155">Quite el espacio de nombres XML (`xmlns`) del elemento `<Project>`.</span><span class="sxs-lookup"><span data-stu-id="dfeab-155">Remove the XML namespace (`xmlns`) from the `<Project>` element.</span></span>
- <span data-ttu-id="dfeab-156">Si no existe, agregue el atributo `Sdk` al elemento `<Project>` y establézcalo en `Microsoft.NET.Sdk` o `Microsoft.NET.Sdk.Web`.</span><span class="sxs-lookup"><span data-stu-id="dfeab-156">If it doesn't exist, add the `Sdk` attribute to the `<Project>` element and set it to `Microsoft.NET.Sdk` or `Microsoft.NET.Sdk.Web`.</span></span> <span data-ttu-id="dfeab-157">Este atributo especifica que el proyecto usa el SDK que se va a usar.</span><span class="sxs-lookup"><span data-stu-id="dfeab-157">This attribute specifies that the project uses the SDK to be used.</span></span> <span data-ttu-id="dfeab-158">`Microsoft.NET.Sdk.Web` se usa para las aplicaciones web.</span><span class="sxs-lookup"><span data-stu-id="dfeab-158">`Microsoft.NET.Sdk.Web` is used for web apps.</span></span>
- <span data-ttu-id="dfeab-159">Quite las instrucciones `<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" />` e `<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />` de la parte superior e inferior del proyecto.</span><span class="sxs-lookup"><span data-stu-id="dfeab-159">Remove the `<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" />` and `<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />` statements from the top and bottom of the project.</span></span> <span data-ttu-id="dfeab-160">Estas instrucciones de importación están implícitas en el SDK, por lo que no es necesario que estén en el proyecto.</span><span class="sxs-lookup"><span data-stu-id="dfeab-160">These import statements are implied by the SDK, so there is no need for them to be in the project.</span></span>
- <span data-ttu-id="dfeab-161">Si tiene elementos `Microsoft.NETCore.App` o `NETStandard.Library` `<PackageReference>` en el proyecto, debe quitarlos.</span><span class="sxs-lookup"><span data-stu-id="dfeab-161">If you have `Microsoft.NETCore.App` or `NETStandard.Library` `<PackageReference>` items in your project, you should remove them.</span></span> <span data-ttu-id="dfeab-162">Estas referencias de paquete son [implícitas para el SDK ](https://aka.ms/sdkimplicitrefs).</span><span class="sxs-lookup"><span data-stu-id="dfeab-162">These package references are [implied by the SDK](https://aka.ms/sdkimplicitrefs).</span></span>
- <span data-ttu-id="dfeab-163">Quite el elemento `Microsoft.NET.Sdk` `<PackageReference>`, si existe.</span><span class="sxs-lookup"><span data-stu-id="dfeab-163">Remove the `Microsoft.NET.Sdk` `<PackageReference>` element, if it exists.</span></span> <span data-ttu-id="dfeab-164">La referencia del SDK procede del atributo `Sdk` del elemento `<Project>`.</span><span class="sxs-lookup"><span data-stu-id="dfeab-164">The SDK reference comes through the `Sdk` attribute on the `<Project>` element.</span></span>
- <span data-ttu-id="dfeab-165">Quite los [globs](https://en.wikipedia.org/wiki/Glob_(programming)) que están [implícitos en el SDK](../tools/csproj.md#default-compilation-includes-in-net-core-projects).</span><span class="sxs-lookup"><span data-stu-id="dfeab-165">Remove the [globs](https://en.wikipedia.org/wiki/Glob_(programming)) that are [implied by the SDK](../tools/csproj.md#default-compilation-includes-in-net-core-projects).</span></span> <span data-ttu-id="dfeab-166">Dejar estos patrones globales en el proyecto producirá un error de compilación porque se duplicarán los elementos de compilación.</span><span class="sxs-lookup"><span data-stu-id="dfeab-166">Leaving these globs in your project will cause an error on build because compile items will be duplicated.</span></span>

<span data-ttu-id="dfeab-167">Tras seguir estos pasos, el proyecto debe ser totalmente compatible con el formato csproj RTM de .NET Core.</span><span class="sxs-lookup"><span data-stu-id="dfeab-167">After these steps your project should be fully compatible with the RTM .NET Core csproj format.</span></span>

<span data-ttu-id="dfeab-168">Para obtener ejemplos de antes y después de la migración desde el formato csproj antiguo al nuevo, vea el artículo [Updating Visual Studio 2017 RC – .NET Core Tooling improvements](https://devblogs.microsoft.com/dotnet/updating-visual-studio-2017-rc-net-core-tooling-improvements/) (Actualización de Visual Studio 2017 RC: Mejoras de las herramientas de .NET Core) en el blog de .NET.</span><span class="sxs-lookup"><span data-stu-id="dfeab-168">For examples of before and after the migration from old csproj format to the new one, see the [Updating Visual Studio 2017 RC – .NET Core Tooling improvements](https://devblogs.microsoft.com/dotnet/updating-visual-studio-2017-rc-net-core-tooling-improvements/) article on the .NET blog.</span></span>

## <a name="see-also"></a><span data-ttu-id="dfeab-169">Vea también</span><span class="sxs-lookup"><span data-stu-id="dfeab-169">See also</span></span>

- [<span data-ttu-id="dfeab-170">Portar, migrar y actualizar proyectos de Visual Studio</span><span class="sxs-lookup"><span data-stu-id="dfeab-170">Port, Migrate, and Upgrade Visual Studio Projects</span></span>](/visualstudio/porting/port-migrate-and-upgrade-visual-studio-projects)

---
title: Migración de .NET Core desde project.json
description: Aprenda a migrar un proyecto anterior de .NET Core con project.json.
ms.date: 07/19/2017
ms.custom: seodec18
ms.openlocfilehash: f48728e647b57a8c5796bdc2119f72b58a49d80f
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 04/23/2019
ms.locfileid: "61663353"
---
# <a name="migrating-net-core-projects-from-projectjson"></a><span data-ttu-id="fe6f0-103">Migración de proyectos de .NET Core desde project.json</span><span class="sxs-lookup"><span data-stu-id="fe6f0-103">Migrating .NET Core projects from project.json</span></span>

<span data-ttu-id="fe6f0-104">En este documento se tratarán los escenarios de migración para los proyectos de .NET Core y se repasarán los tres siguientes escenarios de migración:</span><span class="sxs-lookup"><span data-stu-id="fe6f0-104">This document will cover migration scenarios for .NET Core projects and will go over the following three migration scenarios:</span></span>

1. [<span data-ttu-id="fe6f0-105">Migración desde un esquema válido más reciente de *project.json* a *csproj*</span><span class="sxs-lookup"><span data-stu-id="fe6f0-105">Migration from a valid latest schema of *project.json* to *csproj*</span></span>](#migration-from-projectjson-to-csproj)
2. [<span data-ttu-id="fe6f0-106">Migración desde DNX a csproj</span><span class="sxs-lookup"><span data-stu-id="fe6f0-106">Migration from DNX to csproj</span></span>](#migration-from-dnx-to-csproj)
3. [<span data-ttu-id="fe6f0-107">Migración desde proyectos de csproj de .NET Core RC3 y anteriores al formato final</span><span class="sxs-lookup"><span data-stu-id="fe6f0-107">Migration from RC3 and previous .NET Core csproj projects to the final format</span></span>](#migration-from-earlier-net-core-csproj-formats-to-rtm-csproj)

<span data-ttu-id="fe6f0-108">Este documento solo es aplicable a proyectos antiguos de .NET Core que aún usan project.json.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-108">This document is only applicable to older .NET Core projects that still use project.json.</span></span> <span data-ttu-id="fe6f0-109">No es aplicable a la migración de .NET Framework a .NET Core.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-109">It is not applicable for migrating from .NET Framework to .NET Core.</span></span>

## <a name="migration-from-projectjson-to-csproj"></a><span data-ttu-id="fe6f0-110">Migración desde project.json a csproj</span><span class="sxs-lookup"><span data-stu-id="fe6f0-110">Migration from project.json to csproj</span></span>

<span data-ttu-id="fe6f0-111">La migración desde *project.json* a *.csproj* puede realizarse mediante uno de los métodos siguientes:</span><span class="sxs-lookup"><span data-stu-id="fe6f0-111">Migration from *project.json* to *.csproj* can be done using one of the following methods:</span></span>

- [<span data-ttu-id="fe6f0-112">Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="fe6f0-112">Visual Studio 2017</span></span>](#visual-studio-2017)
- [<span data-ttu-id="fe6f0-113">Herramienta de línea de comandos dotnet migrate</span><span class="sxs-lookup"><span data-stu-id="fe6f0-113">dotnet migrate command-line tool</span></span>](#dotnet-migrate)

<span data-ttu-id="fe6f0-114">Ambos métodos usan el mismo motor subyacente para migrar los proyectos, por lo que los resultados serán los mismos para ambos.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-114">Both methods use the same underlying engine to migrate the projects, so the results will be the same for both.</span></span> <span data-ttu-id="fe6f0-115">En la mayoría de los casos, tan solo será necesario usar una de estas dos formas de migrar *project.json* a *csproj*, y no se requerirá ninguna otra edición manual del archivo del proyecto.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-115">In most cases, using one of these two ways to migrate the *project.json* to *csproj* is the only thing that is needed and no further manual editing of the project file is necessary.</span></span> <span data-ttu-id="fe6f0-116">El archivo *.csproj* resultante tendrá el mismo nombre que el directorio que lo contiene.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-116">The resulting *.csproj* file will be named the same as the containing directory name.</span></span>

### <a name="visual-studio-2017"></a><span data-ttu-id="fe6f0-117">Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="fe6f0-117">Visual Studio 2017</span></span>

<span data-ttu-id="fe6f0-118">Cuando se abre un archivo *.xproj* o un archivo de solución que hace referencia a archivos *.xproj*, aparece el cuadro de diálogo **Actualización unidireccional**.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-118">When you open a *.xproj* file or a solution file which references *.xproj* files, the **One-way upgrade** dialog appears.</span></span> <span data-ttu-id="fe6f0-119">El cuadro de diálogo muestra los proyectos que se van a migrar.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-119">The dialog displays the projects to be migrated.</span></span>
<span data-ttu-id="fe6f0-120">Si se abre un archivo de solución, se enumerarán todos los proyectos especificados en el archivo de solución.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-120">If you open a solution file, all the projects specified in the solution file will be listed.</span></span> <span data-ttu-id="fe6f0-121">Revise la lista de proyectos que se van a migrar y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-121">Review the list of projects to be migrated and select **OK**.</span></span>

![Cuadro de diálogo Actualización unidireccional con la lista de proyectos que se van a migrar](media/one-way-upgrade.jpg)

<span data-ttu-id="fe6f0-123">Visual Studio migrará automáticamente los proyectos seleccionados.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-123">Visual Studio will migrate the projects chosen automatically.</span></span> <span data-ttu-id="fe6f0-124">Al migrar una solución, si no elige todos los proyectos, aparecerá el mismo cuadro de diálogo preguntando si quiere actualizar los proyectos restantes de esa solución.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-124">When migrating a solution, if you don't choose all projects, the same dialog will appear asking you to upgrade the remaining projects from that solution.</span></span> <span data-ttu-id="fe6f0-125">Después de migrar el proyecto, puede ver y modificar su contenido. Para ello, haga clic con el botón derecho en el proyecto en la ventana del **Explorador de soluciones** y seleccione **Editar \<nombre del proyecto>.csproj**.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-125">After the project is migrated, you can see and modify its contents by right-clicking the project in the **Solution Explorer** window and selecting **Edit \<project name>.csproj**.</span></span>

<span data-ttu-id="fe6f0-126">Los archivos que se migraron (*project.json*, *global.json*, *.xproj* y el archivo de solución) se moverán a una carpeta *Copia de seguridad*.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-126">Files that were migrated (*project.json*, *global.json*, *.xproj* and solution file) will be moved to a *Backup* folder.</span></span> <span data-ttu-id="fe6f0-127">El archivo de solución que se migra se actualizará a Visual Studio 2017 y no se podrá abrir en versiones anteriores de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-127">The solution file that is migrated will be upgraded to Visual Studio 2017 and you won't be able to open that solution file in previous versions of Visual Studio.</span></span>
<span data-ttu-id="fe6f0-128">También se guarda y se abre automáticamente un archivo denominado *UpgradeLog.htm* que contiene un informe de migración.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-128">A file named *UpgradeLog.htm* is also saved and automatically opened that contains a migration report.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="fe6f0-129">Las nuevas herramientas no están disponibles en Visual Studio 2015, por lo que no puede migrar los proyectos mediante esa versión de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-129">The new tooling is not available in Visual Studio 2015, so you cannot migrate your projects using that version of Visual Studio.</span></span>

### <a name="dotnet-migrate"></a><span data-ttu-id="fe6f0-130">dotnet migrate</span><span class="sxs-lookup"><span data-stu-id="fe6f0-130">dotnet migrate</span></span>

<span data-ttu-id="fe6f0-131">En el escenario de la línea de comandos, puede usar el comando [`dotnet migrate`](../tools/dotnet-migrate.md).</span><span class="sxs-lookup"><span data-stu-id="fe6f0-131">In the command-line scenario, you can use the [`dotnet migrate`](../tools/dotnet-migrate.md) command.</span></span> <span data-ttu-id="fe6f0-132">Se migrará un proyecto, una solución o un conjunto de carpetas, en ese orden, dependiendo de lo que se encuentre.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-132">It will migrate a project, a solution or a set of folders in that order, depending on which ones were found.</span></span>
<span data-ttu-id="fe6f0-133">Cuando se migra un proyecto, se migra el proyecto y todas sus dependencias.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-133">When you migrate a project, the project and all its dependencies are migrated.</span></span>

<span data-ttu-id="fe6f0-134">Los archivos que se migraron (*project.json*, *global.json* y *.xproj*) se moverán a una carpeta *Copia de seguridad*.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-134">Files that were migrated (*project.json*, *global.json* and *.xproj*) will be moved to a *backup* folder.</span></span>

> [!NOTE]
> <span data-ttu-id="fe6f0-135">Si se usa Visual Studio Code, el comando `dotnet migrate` no modificará archivos específicos de Visual Studio Code, como `tasks.json`.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-135">If you are using Visual Studio Code, the `dotnet migrate` command will not modify Visual Studio Code-specific files such as `tasks.json`.</span></span> <span data-ttu-id="fe6f0-136">Estos archivos deben modificarse de forma manual.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-136">These files need to be changed manually.</span></span>
> <span data-ttu-id="fe6f0-137">Esto también sucede si se usa Project Ryder o cualquier editor o entorno de desarrollo integrado (IDE) que no sea Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-137">This is also true if you are using Project Ryder or any editor or Integrated Development Environment (IDE) other than Visual Studio.</span></span>

<span data-ttu-id="fe6f0-138">Consulte [Una asignación entre propiedades project.json y csproj](../tools/project-json-to-csproj.md) para una comparación de los formatos project.json y csproj.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-138">See [A mapping between project.json and csproj properties](../tools/project-json-to-csproj.md) for a comparison of project.json and csproj formats.</span></span>

### <a name="common-issues"></a><span data-ttu-id="fe6f0-139">Problemas comunes</span><span class="sxs-lookup"><span data-stu-id="fe6f0-139">Common issues</span></span>

- <span data-ttu-id="fe6f0-140">Si se produce un error que indica que no se encuentra ningún archivo que coincida con el comando dotnet-migrate:</span><span class="sxs-lookup"><span data-stu-id="fe6f0-140">If you get an error: "No executable found matching command dotnet-migrate":</span></span>

<span data-ttu-id="fe6f0-141">Ejecute `dotnet --version` para ver qué versión está usando.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-141">Run `dotnet --version` to see which version you are using.</span></span> <span data-ttu-id="fe6f0-142">[`dotnet migrate`](../tools/dotnet-migrate.md) requiere .NET Core CLI RC3 o superior.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-142">[`dotnet migrate`](../tools/dotnet-migrate.md) requires .NET Core CLI RC3 or higher.</span></span>
<span data-ttu-id="fe6f0-143">Obtendrá este error si tiene un archivo *global.json* en el directorio actual o principal y la versión de `sdk` está establecida en una versión anterior.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-143">You’ll get this error if you have a *global.json* file in the current or parent directory and the `sdk` version is set to an older version.</span></span>

## <a name="migration-from-dnx-to-csproj"></a><span data-ttu-id="fe6f0-144">Migración desde DNX a csproj</span><span class="sxs-lookup"><span data-stu-id="fe6f0-144">Migration from DNX to csproj</span></span>

<span data-ttu-id="fe6f0-145">Si aún usa DNX para el desarrollo de .NET Core, el proceso de migración debe realizarse en dos fases:</span><span class="sxs-lookup"><span data-stu-id="fe6f0-145">If you are still using DNX for .NET Core development, your migration process should be done in two stages:</span></span>

1. <span data-ttu-id="fe6f0-146">Use la [guía de migración de DNX existente](from-dnx.md) para migrar desde DNX a la CLI compatible con project.json.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-146">Use the [existing DNX migration guidance](from-dnx.md) to migrate from DNX to project-json enabled CLI.</span></span>
2. <span data-ttu-id="fe6f0-147">Siga los pasos de la sección anterior para migrar desde *project.json* a *.csproj*.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-147">Follow the steps from the previous section to migrate from *project.json* to *.csproj*.</span></span>  

> [!NOTE]
> <span data-ttu-id="fe6f0-148">DNX quedó oficialmente en desuso durante la versión Preview 1 de la CLI de .NET Core.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-148">DNX has become officially deprecated during the Preview 1 release of the .NET Core CLI.</span></span>

## <a name="migration-from-earlier-net-core-csproj-formats-to-rtm-csproj"></a><span data-ttu-id="fe6f0-149">Migración desde formatos anteriores de csproj de .NET Core a csproj RTM</span><span class="sxs-lookup"><span data-stu-id="fe6f0-149">Migration from earlier .NET Core csproj formats to RTM csproj</span></span>

<span data-ttu-id="fe6f0-150">El formato de csproj de .NET Core ha cambiado y evolucionado con cada nueva versión preliminar de las herramientas.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-150">The .NET Core csproj format has been changing and evolving with each new pre-release version of the tooling.</span></span> <span data-ttu-id="fe6f0-151">No hay ninguna herramienta que migre el archivo del proyecto de versiones anteriores de csproj a la versión más reciente, por lo que tendrá que editar manualmente el archivo del proyecto.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-151">There is no tool that will migrate your project file from earlier versions of csproj to the latest, so you need to manually edit the project file.</span></span> <span data-ttu-id="fe6f0-152">Los pasos reales dependen de la versión del archivo del proyecto que se va a migrar.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-152">The actual steps depend on the version of the project file you are migrating.</span></span> <span data-ttu-id="fe6f0-153">Tenga en cuenta los siguientes consejos basados en los cambios que se produjeron entre las versiones:</span><span class="sxs-lookup"><span data-stu-id="fe6f0-153">The following is some guidance to consider based on the changes that happened between versions:</span></span>

* <span data-ttu-id="fe6f0-154">Quite la propiedad de versión de las herramientas del elemento `<Project>`, si existe.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-154">Remove the tools version property from the `<Project>` element, if it exists.</span></span>
* <span data-ttu-id="fe6f0-155">Quite el espacio de nombres XML (`xmlns`) del elemento `<Project>`.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-155">Remove the XML namespace (`xmlns`) from the `<Project>` element.</span></span>
* <span data-ttu-id="fe6f0-156">Si no existe, agregue el atributo `Sdk` al elemento `<Project>` y establézcalo en `Microsoft.NET.Sdk` o `Microsoft.NET.Sdk.Web`.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-156">If it doesn't exist, add the `Sdk` attribute to the `<Project>` element and set it to `Microsoft.NET.Sdk` or `Microsoft.NET.Sdk.Web`.</span></span> <span data-ttu-id="fe6f0-157">Este atributo especifica que el proyecto usa el SDK que se va a usar.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-157">This attribute specifies that the project uses the SDK to be used.</span></span> <span data-ttu-id="fe6f0-158">`Microsoft.NET.Sdk.Web` se usa para las aplicaciones web.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-158">`Microsoft.NET.Sdk.Web` is used for web apps.</span></span>
* <span data-ttu-id="fe6f0-159">Quite las instrucciones `<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" />` e `<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />` de la parte superior e inferior del proyecto.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-159">Remove the `<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" />` and `<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />` statements from the top and bottom of the project.</span></span> <span data-ttu-id="fe6f0-160">Estas instrucciones de importación están implícitas en el SDK, por lo que no es necesario que estén en el proyecto.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-160">These import statements are implied by the SDK, so there is no need for them to be in the project.</span></span>
* <span data-ttu-id="fe6f0-161">Si tiene elementos `Microsoft.NETCore.App` o `NETStandard.Library` `<PackageReference>` en el proyecto, debe quitarlos.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-161">If you have `Microsoft.NETCore.App` or `NETStandard.Library` `<PackageReference>` items in your project, you should remove them.</span></span> <span data-ttu-id="fe6f0-162">Estas referencias de paquete son [implícitas para el SDK ](https://aka.ms/sdkimplicitrefs).</span><span class="sxs-lookup"><span data-stu-id="fe6f0-162">These package references are [implied by the SDK](https://aka.ms/sdkimplicitrefs).</span></span>
* <span data-ttu-id="fe6f0-163">Quite el elemento `Microsoft.NET.Sdk` `<PackageReference>`, si existe.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-163">Remove the `Microsoft.NET.Sdk` `<PackageReference>` element, if it exists.</span></span> <span data-ttu-id="fe6f0-164">La referencia del SDK procede del atributo `Sdk` del elemento `<Project>`.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-164">The SDK reference comes through the `Sdk` attribute on the `<Project>` element.</span></span>
* <span data-ttu-id="fe6f0-165">Quite los [globs](https://en.wikipedia.org/wiki/Glob_(programming)) que están [implícitos en el SDK](../tools/csproj.md#default-compilation-includes-in-net-core-projects).</span><span class="sxs-lookup"><span data-stu-id="fe6f0-165">Remove the [globs](https://en.wikipedia.org/wiki/Glob_(programming)) that are [implied by the SDK](../tools/csproj.md#default-compilation-includes-in-net-core-projects).</span></span> <span data-ttu-id="fe6f0-166">Dejar estos patrones globales en el proyecto producirá un error de compilación porque se duplicarán los elementos de compilación.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-166">Leaving these globs in your project will cause an error on build because compile items will be duplicated.</span></span>

<span data-ttu-id="fe6f0-167">Tras seguir estos pasos, el proyecto debe ser totalmente compatible con el formato csproj RTM de .NET Core.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-167">After these steps your project should be fully compatible with the RTM .NET Core csproj format.</span></span>

<span data-ttu-id="fe6f0-168">Para obtener ejemplos de antes y después de la migración desde el formato csproj antiguo al nuevo, vea el artículo [Updating Visual Studio 2017 RC – .NET Core Tooling improvements](https://devblogs.microsoft.com/dotnet/updating-visual-studio-2017-rc-net-core-tooling-improvements/) (Actualización de Visual Studio 2017 RC: Mejoras de las herramientas de .NET Core) en el blog de .NET.</span><span class="sxs-lookup"><span data-stu-id="fe6f0-168">For examples of before and after the migration from old csproj format to the new one, see the [Updating Visual Studio 2017 RC – .NET Core Tooling improvements](https://devblogs.microsoft.com/dotnet/updating-visual-studio-2017-rc-net-core-tooling-improvements/) article on the .NET blog.</span></span>

## <a name="see-also"></a><span data-ttu-id="fe6f0-169">Vea también</span><span class="sxs-lookup"><span data-stu-id="fe6f0-169">See also</span></span>

- [<span data-ttu-id="fe6f0-170">Portar, migrar y actualizar proyectos de Visual Studio</span><span class="sxs-lookup"><span data-stu-id="fe6f0-170">Port, Migrate, and Upgrade Visual Studio Projects</span></span>](/visualstudio/porting/port-migrate-and-upgrade-visual-studio-projects)
